---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Camping Gear Calculator";
const description = "Calculate pack weight budget, base weight vs consumables, weight per day, and comfort rating for backpacking trips.";
const relatedCalcs = [
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Daily calories." },
  { name: "Water Intake", url: "/water-intake-calculator", description: "Hydration needs." },
  { name: "Hiking Pace", url: "/hiking-pace-calculator", description: "Trail pace." },
  { name: "BMR Calculator", url: "/bmr-calculator", description: "Basal metabolic rate." },
  { name: "Macro Calculator", url: "/macro-calculator", description: "Macros." },
  { name: "Weight Loss", url: "/weight-loss-calculator", description: "Weight planning." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Camping Gear Calculator" keywords="camping gear calculator, pack weight, base weight, backpacking weight, ultralight, camping planner" breadcrumbs={[{ name: "Camping Gear", url: "/camping-gear-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Camping Gear Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Plan your pack weight: base weight, consumables, and total load for any backpacking trip.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Trip Duration (days)</label><input type="number" id="cg2-days" class="cg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" max="30" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Body Weight (lbs)</label><input type="number" id="cg2-bw" class="cg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="80" max="350" step="5"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Base Weight (Big 3)</h3>
          <div class="grid grid-cols-3 gap-2">
            <div><label class="block text-xs text-text-muted">Shelter (lbs)</label><input type="number" id="cg2-shelter" class="cg2-in w-full px-3 py-2 border border-border rounded-xl text-sm font-bold text-center" min="0" max="15" step="0.1"></div>
            <div><label class="block text-xs text-text-muted">Sleep System (lbs)</label><input type="number" id="cg2-sleep" class="cg2-in w-full px-3 py-2 border border-border rounded-xl text-sm font-bold text-center" min="0" max="15" step="0.1"></div>
            <div><label class="block text-xs text-text-muted">Pack (lbs)</label><input type="number" id="cg2-pack" class="cg2-in w-full px-3 py-2 border border-border rounded-xl text-sm font-bold text-center" min="0" max="10" step="0.1"></div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Other Base Weight</h3>
          <div class="grid grid-cols-3 gap-2">
            <div><label class="block text-xs text-text-muted">Cooking (lbs)</label><input type="number" id="cg2-cook" class="cg2-in w-full px-3 py-2 border border-border rounded-xl text-sm font-bold text-center" min="0" max="10" step="0.1"></div>
            <div><label class="block text-xs text-text-muted">Clothing (lbs)</label><input type="number" id="cg2-cloth" class="cg2-in w-full px-3 py-2 border border-border rounded-xl text-sm font-bold text-center" min="0" max="15" step="0.1"></div>
            <div><label class="block text-xs text-text-muted">Other (lbs)</label><input type="number" id="cg2-other" class="cg2-in w-full px-3 py-2 border border-border rounded-xl text-sm font-bold text-center" min="0" max="15" step="0.1"></div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Food (lbs/day)</label><input type="number" id="cg2-food" class="cg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0.5" max="5" step="0.1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Water Carry (liters)</label><input type="number" id="cg2-water" class="cg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" max="10" step="0.5"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Pack Weight (Day 1)</div>
          <div class="text-5xl font-extrabold font-mono" id="cg2-total">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Base Weight</div><div class="text-xl font-bold font-mono" id="cg2-base">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Consumables</div><div class="text-xl font-bold font-mono" id="cg2-consumable">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">% Body Weight</div><div class="text-xl font-bold font-mono" id="cg2-pct">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Comfort Rating</div><div class="text-xl font-bold" id="cg2-comfort">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Category</div><div class="text-xl font-bold" id="cg2-cat">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Weight by Day</h3>
          <div class="text-xs space-y-1 max-h-48 overflow-y-auto" id="cg2-daily"></div>
        </div>
      </div>
      <ShareButton calculatorId="camping-gear" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcCG2() {
      const days = parseInt((document.getElementById('cg2-days') as HTMLInputElement).value) || 1;
      const bw = parseFloat((document.getElementById('cg2-bw') as HTMLInputElement).value) || 0;
      const shelter = parseFloat((document.getElementById('cg2-shelter') as HTMLInputElement).value) || 0;
      const sleep = parseFloat((document.getElementById('cg2-sleep') as HTMLInputElement).value) || 0;
      const pack = parseFloat((document.getElementById('cg2-pack') as HTMLInputElement).value) || 0;
      const cook = parseFloat((document.getElementById('cg2-cook') as HTMLInputElement).value) || 0;
      const cloth = parseFloat((document.getElementById('cg2-cloth') as HTMLInputElement).value) || 0;
      const other = parseFloat((document.getElementById('cg2-other') as HTMLInputElement).value) || 0;
      const foodPerDay = parseFloat((document.getElementById('cg2-food') as HTMLInputElement).value) || 0;
      const waterL = parseFloat((document.getElementById('cg2-water') as HTMLInputElement).value) || 0;
      const baseWeight = shelter + sleep + pack + cook + cloth + other;
      const waterLbs = waterL * 2.205;
      const totalFood = foodPerDay * days;
      const consumables = totalFood + waterLbs;
      const totalDay1 = baseWeight + consumables;
      const pctBW = bw > 0 ? (totalDay1 / bw) * 100 : 0;
      let comfort = '';
      let category = '';
      if (baseWeight < 10) { category = 'Ultralight'; comfort = 'Excellent'; }
      else if (baseWeight < 15) { category = 'Lightweight'; comfort = 'Very Good'; }
      else if (baseWeight < 20) { category = 'Traditional'; comfort = 'Good'; }
      else if (baseWeight < 30) { category = 'Heavy'; comfort = 'Moderate'; }
      else { category = 'Very Heavy'; comfort = 'Tough'; }
      if (pctBW > 30) comfort = 'Strenuous';
      else if (pctBW > 25) comfort = 'Challenging';
      document.getElementById('cg2-total')!.textContent = totalDay1.toFixed(1) + ' lbs';
      document.getElementById('cg2-base')!.textContent = baseWeight.toFixed(1) + ' lbs';
      document.getElementById('cg2-consumable')!.textContent = consumables.toFixed(1) + ' lbs';
      document.getElementById('cg2-pct')!.textContent = pctBW.toFixed(1) + '%';
      document.getElementById('cg2-comfort')!.textContent = comfort;
      document.getElementById('cg2-cat')!.textContent = category;
      const dailyHTML: string[] = [];
      dailyHTML.push('<div class="flex justify-between font-semibold text-text-muted mb-1"><span>Day</span><span>Food Left</span><span>Total Weight</span></div>');
      for (let d = 1; d <= days; d++) {
        const foodRemaining = foodPerDay * (days - d + 1);
        const dayTotal = baseWeight + foodRemaining + waterLbs;
        const highlight = d === 1 ? 'font-bold text-primary' : '';
        dailyHTML.push(`<div class="flex justify-between ${highlight}"><span>Day ${d}</span><span class="font-mono">${foodRemaining.toFixed(1)} lbs</span><span class="font-mono font-bold">${dayTotal.toFixed(1)} lbs</span></div>`);
      }
      document.getElementById('cg2-daily')!.innerHTML = dailyHTML.join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('cg2-days') as HTMLInputElement).value = '3';
      (document.getElementById('cg2-bw') as HTMLInputElement).value = '170';
      (document.getElementById('cg2-shelter') as HTMLInputElement).value = '3.5';
      (document.getElementById('cg2-sleep') as HTMLInputElement).value = '3.0';
      (document.getElementById('cg2-pack') as HTMLInputElement).value = '2.5';
      (document.getElementById('cg2-cook') as HTMLInputElement).value = '1.0';
      (document.getElementById('cg2-cloth') as HTMLInputElement).value = '2.5';
      (document.getElementById('cg2-other') as HTMLInputElement).value = '1.5';
      (document.getElementById('cg2-food') as HTMLInputElement).value = '2.0';
      (document.getElementById('cg2-water') as HTMLInputElement).value = '2';
      document.querySelectorAll('.cg2-in').forEach(el => { el.addEventListener('input', calcCG2); el.addEventListener('change', calcCG2); });
      calcCG2();
    }, 50);
  </script>
</CalculatorLayout>
