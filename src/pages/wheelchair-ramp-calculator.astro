---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Wheelchair Ramp Calculator";
const description = "Calculate ADA-compliant wheelchair ramp length, slope, and landing requirements.";
const relatedCalcs = [
  { name: "Stair Calculator", url: "/stair-calculator", description: "Stairs." },
  { name: "Slope Calculator", url: "/slope-calculator", description: "Slope." },
  { name: "Concrete", url: "/concrete-calculator", description: "Concrete." },
  { name: "Square Footage", url: "/square-footage-calculator", description: "Sq ft." },
  { name: "Lumber", url: "/lumber-calculator", description: "Lumber." },
  { name: "Deck Calculator", url: "/deck-calculator", description: "Deck." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Wheelchair Ramp Calculator" keywords="wheelchair ramp, ADA ramp, ramp slope, ramp length, accessible ramp, handicap ramp" breadcrumbs={[{ name: "Wheelchair Ramp", url: "/wheelchair-ramp-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Wheelchair Ramp Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Design an ADA-compliant wheelchair ramp.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Total Rise (inches)</label><input type="number" id="wr-rise" class="wr-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="24" min="1" max="120" step="1"></div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Slope Ratio</label>
            <select id="wr-slope" class="wr-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="12" selected>1:12 (ADA standard)</option>
              <option value="16">1:16 (preferred)</option>
              <option value="20">1:20 (gentle)</option>
              <option value="8">1:8 (max residential)</option>
            </select>
          </div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Ramp Width (inches)</label><input type="number" id="wr-width" class="wr-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="36" min="36" max="60" step="6"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Ramp Length</div>
          <div class="text-5xl font-extrabold font-mono" id="wr-result">0 ft</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Slope Angle</div><div class="text-xl font-bold font-mono" id="wr-angle">0°</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Landings Needed</div><div class="text-xl font-bold font-mono" id="wr-landings">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Ramp Sections</div><div class="text-xl font-bold font-mono" id="wr-sections">1</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Surface Area</div><div class="text-xl font-bold font-mono" id="wr-area">0 sq ft</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Grade %</div><div class="text-xl font-bold font-mono" id="wr-grade">0%</div></div>
        </div>
        <div class="p-4 rounded-xl text-center" id="wr-status-box"><div class="font-bold text-sm" id="wr-status">-</div></div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">ADA Requirements</h3>
          <div class="text-xs space-y-1">
            <div>Max slope: 1:12 (1 inch rise per 12 inches run)</div>
            <div>Min width: 36 inches clear</div>
            <div>Max run before landing: 30 feet</div>
            <div>Landing size: 60 × 60 inches minimum</div>
            <div>Handrails required when rise > 6 inches</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="wheelchair-ramp" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcWR() {
      const rise = parseFloat((document.getElementById('wr-rise') as HTMLInputElement).value) || 0;
      const ratio = parseFloat((document.getElementById('wr-slope') as HTMLSelectElement).value) || 12;
      const width = parseFloat((document.getElementById('wr-width') as HTMLInputElement).value) || 36;
      const runIn = rise * ratio;
      const runFt = runIn / 12;
      const angle = Math.atan(1 / ratio) * 180 / Math.PI;
      const grade = (1 / ratio) * 100;
      const maxRunFt = 30;
      const sections = Math.ceil(runFt / maxRunFt);
      const landings = sections - 1;
      const landingArea = landings * 5 * 5;
      const rampArea = (runFt * width / 12) + landingArea;
      document.getElementById('wr-result')!.textContent = runFt.toFixed(1) + ' ft';
      document.getElementById('wr-angle')!.textContent = angle.toFixed(1) + '°';
      document.getElementById('wr-landings')!.textContent = landings.toString();
      document.getElementById('wr-sections')!.textContent = sections.toString();
      document.getElementById('wr-area')!.textContent = rampArea.toFixed(0) + ' sq ft';
      document.getElementById('wr-grade')!.textContent = grade.toFixed(1) + '%';
      let status: string, color: string;
      if (ratio >= 12 && width >= 36) { status = 'ADA Compliant'; color = 'bg-green-50 text-green-800'; }
      else if (ratio >= 8) { status = 'Residential — not ADA compliant'; color = 'bg-yellow-50 text-yellow-800'; }
      else { status = 'Too steep — increase ratio'; color = 'bg-red-50 text-red-800'; }
      document.getElementById('wr-status')!.textContent = status;
      document.getElementById('wr-status-box')!.className = `p-4 rounded-xl text-center ${color}`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.wr-in').forEach(el => { el.addEventListener('input', calcWR); el.addEventListener('change', calcWR); });
      calcWR();
    }, 50);
  </script>
</CalculatorLayout>
