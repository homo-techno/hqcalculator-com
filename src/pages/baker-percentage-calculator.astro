---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Baker's Percentage Calculator - Ingredient Ratios by Flour Weight";
const description = "Calculate baker's percentages for any bread or pastry recipe. Express all ingredient weights as a percentage of total flour weight for perfect scaling.";
const relatedCalcs = [
  { name: "Dough Hydration Calculator", url: "/dough-hydration-calculator", description: "Calculate and adjust dough hydration percentage." },
  { name: "Bread Flour Calculator", url: "/bread-flour-calculator", description: "Flour protein content and substitution ratios." },
  { name: "Yeast Conversion Calculator", url: "/yeast-conversion-calculator", description: "Convert between fresh, active dry, and instant yeast." },
  { name: "Fermentation Temperature Calculator", url: "/fermentation-temperature-calculator", description: "Calculate desired dough temperature." },
  { name: "Bread Hydration Visual Calculator", url: "/bread-hydration-visual-calculator", description: "Visualize dough at different hydration levels." },
  { name: "Baking Conversion Calculator", url: "/baking-conversion-calculator", description: "Convert between baking measurement units." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Baker's Percentage Calculator" keywords="baker's percentage, bread formula, flour weight ratio, baking math, dough recipe scaling, baker's math" breadcrumbs={[{ name: "Baker's Percentage", url: "/baker-percentage-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Baker's Percentage Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Enter your flour weight and ingredient weights to see baker's percentages, or enter percentages to calculate weights for any flour amount.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Total Flour Weight (g)</label>
          <input type="number" id="bkp-flour" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1000" min="1" step="1">
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Water (g)</label>
            <input type="number" id="bkp-water" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="650" min="0" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Salt (g)</label>
            <input type="number" id="bkp-salt" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="20" min="0" step="0.1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Yeast (g)</label>
            <input type="number" id="bkp-yeast" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="7" min="0" step="0.1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Sugar (g)</label>
            <input type="number" id="bkp-sugar" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="20" min="0" step="1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Fat/Oil (g)</label>
            <input type="number" id="bkp-fat" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" min="0" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Other (g)</label>
            <input type="number" id="bkp-other" class="bkp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" min="0" step="1">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Hydration</div>
          <div class="text-5xl font-extrabold font-mono" id="bkp-result">--</div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Flour</div>
            <div class="text-xl font-bold font-mono" id="bkp-flour-pct">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Water %</div>
            <div class="text-xl font-bold font-mono" id="bkp-water-pct">--</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Salt %</div>
            <div class="text-xl font-bold font-mono" id="bkp-salt-pct">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Yeast %</div>
            <div class="text-xl font-bold font-mono" id="bkp-yeast-pct">--</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Sugar %</div>
            <div class="text-xl font-bold font-mono" id="bkp-sugar-pct">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Fat %</div>
            <div class="text-xl font-bold font-mono" id="bkp-fat-pct">--</div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Total Dough Weight</div>
          <div class="text-xl font-bold font-mono" id="bkp-total">--</div>
        </div>
      </div>
      <ShareButton calculatorId="baker-percentage" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcBKP() {
      const flour = parseFloat((document.getElementById('bkp-flour') as HTMLInputElement).value) || 0;
      const water = parseFloat((document.getElementById('bkp-water') as HTMLInputElement).value) || 0;
      const salt = parseFloat((document.getElementById('bkp-salt') as HTMLInputElement).value) || 0;
      const yeast = parseFloat((document.getElementById('bkp-yeast') as HTMLInputElement).value) || 0;
      const sugar = parseFloat((document.getElementById('bkp-sugar') as HTMLInputElement).value) || 0;
      const fat = parseFloat((document.getElementById('bkp-fat') as HTMLInputElement).value) || 0;
      const other = parseFloat((document.getElementById('bkp-other') as HTMLInputElement).value) || 0;

      if (flour <= 0) {
        document.getElementById('bkp-result')!.textContent = 'Enter flour weight';
        return;
      }

      const waterPct = (water / flour) * 100;
      const saltPct = (salt / flour) * 100;
      const yeastPct = (yeast / flour) * 100;
      const sugarPct = (sugar / flour) * 100;
      const fatPct = (fat / flour) * 100;
      const total = flour + water + salt + yeast + sugar + fat + other;

      document.getElementById('bkp-result')!.textContent = waterPct.toFixed(1) + '%';
      document.getElementById('bkp-flour-pct')!.textContent = '100%';
      document.getElementById('bkp-water-pct')!.textContent = waterPct.toFixed(1) + '%';
      document.getElementById('bkp-salt-pct')!.textContent = saltPct.toFixed(2) + '%';
      document.getElementById('bkp-yeast-pct')!.textContent = yeastPct.toFixed(2) + '%';
      document.getElementById('bkp-sugar-pct')!.textContent = sugarPct.toFixed(1) + '%';
      document.getElementById('bkp-fat-pct')!.textContent = fatPct.toFixed(1) + '%';
      document.getElementById('bkp-total')!.textContent = total.toFixed(0) + ' g';

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.bkp-in').forEach(el => { el.addEventListener('input', calcBKP); el.addEventListener('change', calcBKP); });
      calcBKP();
    }, 50);
  </script>
</CalculatorLayout>
