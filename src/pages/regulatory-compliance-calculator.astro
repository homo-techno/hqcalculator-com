---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Regulatory Compliance Calculator - Staffing & Budget by Company Size";
const description = "Calculate regulatory compliance staffing requirements and budget needs based on company size, industry, and regulatory complexity.";
const relatedCalcs = [
  { name: "Compliance Cost Calculator", url: "/compliance-cost-calculator", description: "Annual compliance costs." },
  { name: "GDPR Fine Calculator", url: "/gdpr-fine-calculator", description: "GDPR penalty estimates." },
  { name: "OSHA Penalty Calculator", url: "/osha-penalty-calculator", description: "OSHA violation costs." },
  { name: "ADA Compliance Calculator", url: "/ada-compliance-calculator", description: "ADA renovation costs." },
  { name: "Workers Comp Calculator", url: "/workers-comp-calculator", description: "Workers comp premiums." },
  { name: "Incorporation Calculator", url: "/incorporation-calculator", description: "Business formation." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="Regulatory Compliance Calculator" keywords="regulatory compliance calculator, compliance staffing, compliance budget, compliance officer, regulatory requirements, compliance program, GRC" breadcrumbs={[{ name: "Regulatory Compliance", url: "/regulatory-compliance-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Regulatory Compliance Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate compliance staffing needs and budget requirements for your organization.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Total Employees</label>
          <input type="number" id="rcm-employees" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="200" min="1" max="100000" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Annual Revenue ($)</label>
          <input type="number" id="rcm-revenue" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="25000000" min="0" step="1000000">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Industry</label>
          <select id="rcm-industry" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="finance">Financial Services / Banking</option>
            <option value="healthcare" selected>Healthcare / Life Sciences</option>
            <option value="tech">Technology / SaaS</option>
            <option value="energy">Energy / Utilities</option>
            <option value="manufacturing">Manufacturing</option>
            <option value="retail">Retail / Consumer</option>
            <option value="government">Government Contractor</option>
            <option value="general">General / Other</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Regulatory Complexity</label>
          <select id="rcm-complexity" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="low">Low (basic state/local)</option>
            <option value="moderate" selected>Moderate (state + federal)</option>
            <option value="high">High (multiple federal agencies)</option>
            <option value="very-high">Very High (multi-jurisdictional / international)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Publicly Traded?</label>
          <select id="rcm-public" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="no" selected>No</option>
            <option value="yes">Yes (SOX, SEC reporting)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Data Processing (personal data)</label>
          <select id="rcm-data" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="minimal">Minimal</option>
            <option value="moderate" selected>Moderate (customer data)</option>
            <option value="extensive">Extensive (PII, PHI, financial)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Geographic Scope</label>
          <select id="rcm-geo" class="rcm-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="local">Single state</option>
            <option value="national" selected>Multi-state / National</option>
            <option value="international">International operations</option>
          </select>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Annual Compliance Budget</div>
          <div class="text-5xl font-extrabold font-mono" id="rcm-total"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Compliance Staff Needed</div>
            <div class="text-xl font-bold text-secondary" id="rcm-staff"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Staffing Cost</div>
            <div class="text-xl font-bold" id="rcm-staff-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Technology & Tools</div>
            <div class="text-xl font-bold text-orange-600" id="rcm-tech"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Training & Consulting</div>
            <div class="text-xl font-bold" id="rcm-training"></div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Compliance Cost as % of Revenue</div>
          <div class="text-2xl font-bold" id="rcm-pct"></div>
        </div>
      </div>
      <ShareButton calculatorId="regulatory-compliance" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Building a Compliance Program</h2>
      <p>A well-structured compliance program requires dedicated staff, technology tools, training, and external consulting. Industry benchmarks suggest 1 compliance professional per 50-200 employees depending on regulatory complexity. Financial services and healthcare typically need the highest ratios. Investing in compliance technology (GRC platforms, monitoring tools) can reduce manual effort by 30-50%.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Key Budget Components</h3>
      <p>Major cost drivers include compliance officer salaries ($80,000-$200,000+), GRC software ($5,000-$100,000+/year), external audits ($15,000-$200,000+), employee training programs ($200-$500/employee), and regulatory filing costs. Budget 5-10% for unexpected regulatory changes or enforcement actions.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + Math.round(n).toLocaleString();

    function calcRCM() {
      const employees = parseInt((document.getElementById('rcm-employees') as HTMLInputElement).value) || 1;
      const revenue = parseFloat((document.getElementById('rcm-revenue') as HTMLInputElement).value) || 0;
      const industry = (document.getElementById('rcm-industry') as HTMLSelectElement).value;
      const complexity = (document.getElementById('rcm-complexity') as HTMLSelectElement).value;
      const isPublic = (document.getElementById('rcm-public') as HTMLSelectElement).value;
      const dataLevel = (document.getElementById('rcm-data') as HTMLSelectElement).value;
      const geo = (document.getElementById('rcm-geo') as HTMLSelectElement).value;

      // Staff ratio (employees per compliance staff)
      const ratios: Record<string, Record<string, number>> = {
        finance: { low: 80, moderate: 50, high: 30, 'very-high': 20 },
        healthcare: { low: 100, moderate: 60, high: 35, 'very-high': 25 },
        tech: { low: 200, moderate: 120, high: 60, 'very-high': 40 },
        energy: { low: 100, moderate: 70, high: 40, 'very-high': 25 },
        manufacturing: { low: 150, moderate: 80, high: 50, 'very-high': 30 },
        retail: { low: 250, moderate: 150, high: 80, 'very-high': 50 },
        government: { low: 80, moderate: 50, high: 30, 'very-high': 20 },
        general: { low: 200, moderate: 120, high: 70, 'very-high': 45 }
      };

      const ratio = (ratios[industry] && ratios[industry][complexity]) || 100;
      let staffNeeded = Math.max(1, Math.ceil(employees / ratio));

      // Public company needs more staff
      if (isPublic === 'yes') staffNeeded = Math.max(staffNeeded, Math.ceil(staffNeeded * 1.5));

      // International scope
      if (geo === 'international') staffNeeded = Math.ceil(staffNeeded * 1.3);

      // Salary by industry and seniority
      const baseSalary: Record<string, number> = {
        finance: 110000, healthcare: 100000, tech: 105000, energy: 95000,
        manufacturing: 85000, retail: 80000, government: 90000, general: 85000
      };
      const avgSalary = (baseSalary[industry] || 85000) * 1.3; // 30% benefits
      const staffCost = staffNeeded * avgSalary;

      // Technology costs
      let techCost = 0;
      if (employees <= 50) techCost = 8000;
      else if (employees <= 200) techCost = 25000;
      else if (employees <= 1000) techCost = 60000;
      else techCost = 120000;
      if (dataLevel === 'extensive') techCost *= 1.5;
      if (isPublic === 'yes') techCost *= 1.4;

      // Training & consulting
      let trainingPerEmp = 200;
      if (complexity === 'high' || complexity === 'very-high') trainingPerEmp = 400;
      if (industry === 'finance' || industry === 'healthcare') trainingPerEmp *= 1.3;
      const trainingCost = employees * trainingPerEmp;

      // External audit costs
      let auditCost = 20000;
      if (isPublic === 'yes') auditCost += 100000;
      if (complexity === 'very-high') auditCost += 40000;
      const consultingTotal = trainingCost + auditCost;

      const total = staffCost + techCost + consultingTotal;
      const pctRevenue = revenue > 0 ? ((total / revenue) * 100).toFixed(1) + '%' : 'N/A';

      document.getElementById('rcm-total')!.textContent = fmt(total);
      document.getElementById('rcm-staff')!.textContent = staffNeeded + (staffNeeded === 1 ? ' person' : ' people');
      document.getElementById('rcm-staff-cost')!.textContent = fmt(staffCost);
      document.getElementById('rcm-tech')!.textContent = fmt(techCost);
      document.getElementById('rcm-training')!.textContent = fmt(consultingTotal);
      document.getElementById('rcm-pct')!.textContent = pctRevenue;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.rcm-in').forEach(el => {
        el.addEventListener('input', calcRCM);
        el.addEventListener('change', calcRCM);
      });
      calcRCM();
    }, 50);
  </script>
</CalculatorLayout>
