---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Slope Calculator - Find Slope, Distance & Midpoint";
const description = "Calculate the slope, distance, midpoint, and equation of a line from two points.";
const relatedCalcs = [
  { name: "Midpoint Calculator", url: "/midpoint-calculator", description: "Midpoint & distance." },
  { name: "Pythagorean Theorem", url: "/pythagorean-theorem-calculator", description: "Right triangles." },
  { name: "Triangle Calculator", url: "/triangle-calculator", description: "Triangles." },
  { name: "Area Calculator", url: "/area-calculator", description: "2D areas." },
  { name: "Quadratic Equation", url: "/quadratic-equation-calculator", description: "Quadratics." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Slope Calculator" keywords="slope calculator, slope formula, rise over run, line equation, distance between points" breadcrumbs={[{ name: "Slope Calculator", url: "/slope-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Slope Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Enter two points to find the slope, distance, midpoint, and line equation.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-4">
          <div class="space-y-2">
            <h3 class="font-semibold text-sm text-text">Point 1 (x₁, y₁)</h3>
            <div class="grid grid-cols-2 gap-2">
              <div><label class="block text-xs font-medium text-text mb-1">x₁</label><input type="number" id="sl-x1" class="w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="1" step="0.5"></div>
              <div><label class="block text-xs font-medium text-text mb-1">y₁</label><input type="number" id="sl-y1" class="w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="2" step="0.5"></div>
            </div>
          </div>
          <div class="space-y-2">
            <h3 class="font-semibold text-sm text-text">Point 2 (x₂, y₂)</h3>
            <div class="grid grid-cols-2 gap-2">
              <div><label class="block text-xs font-medium text-text mb-1">x₂</label><input type="number" id="sl-x2" class="w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="4" step="0.5"></div>
              <div><label class="block text-xs font-medium text-text mb-1">y₂</label><input type="number" id="sl-y2" class="w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="6" step="0.5"></div>
            </div>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Slope (m)</div>
          <div class="text-5xl font-extrabold font-mono" id="sl-slope">0</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-secondary rounded-xl text-white text-center"><div class="text-xs uppercase tracking-wide mb-1 opacity-80">Distance</div><div class="text-xl font-bold" id="sl-dist">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Midpoint</div><div class="text-xl font-bold" id="sl-mid">0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Angle (°)</div><div class="text-xl font-bold" id="sl-angle">0°</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Δy / Δx</div><div class="text-xl font-bold font-mono" id="sl-rise-run">0/0</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Line Equations</h3>
          <div class="font-mono text-sm space-y-1">
            <div>Slope-Intercept: <span id="sl-si" class="font-bold">y = mx + b</span></div>
            <div>Point-Slope: <span id="sl-ps" class="font-bold">y - y₁ = m(x - x₁)</span></div>
            <div>Standard: <span id="sl-std" class="font-bold">Ax + By = C</span></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="slope" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Slope Formula</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p>m = (y₂ − y₁) / (x₂ − x₁)</p>
        <p>Distance = √((x₂−x₁)² + (y₂−y₁)²)</p>
        <p>Midpoint = ((x₁+x₂)/2, (y₁+y₂)/2)</p>
      </div>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcSlope() {
      const x1 = parseFloat((document.getElementById('sl-x1') as HTMLInputElement).value) || 0;
      const y1 = parseFloat((document.getElementById('sl-y1') as HTMLInputElement).value) || 0;
      const x2 = parseFloat((document.getElementById('sl-x2') as HTMLInputElement).value) || 0;
      const y2 = parseFloat((document.getElementById('sl-y2') as HTMLInputElement).value) || 0;
      const dx = x2 - x1, dy = y2 - y1;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const mx = (x1 + x2) / 2, my = (y1 + y2) / 2;
      if (dx === 0) {
        document.getElementById('sl-slope')!.textContent = 'Undefined';
        document.getElementById('sl-angle')!.textContent = '90°';
        document.getElementById('sl-rise-run')!.textContent = `${dy} / 0`;
        document.getElementById('sl-si')!.textContent = `x = ${x1}`;
        document.getElementById('sl-ps')!.textContent = `x = ${x1} (vertical)`;
        document.getElementById('sl-std')!.textContent = `x = ${x1}`;
      } else {
        const m = dy / dx;
        const b = y1 - m * x1;
        const angle = Math.atan(m) * 180 / Math.PI;
        document.getElementById('sl-slope')!.textContent = m % 1 === 0 ? String(m) : m.toFixed(4);
        document.getElementById('sl-angle')!.textContent = angle.toFixed(2) + '°';
        document.getElementById('sl-rise-run')!.textContent = `${dy} / ${dx}`;
        const bStr = b >= 0 ? `+ ${b.toFixed(2)}` : `− ${Math.abs(b).toFixed(2)}`;
        document.getElementById('sl-si')!.textContent = `y = ${m.toFixed(2)}x ${bStr}`;
        document.getElementById('sl-ps')!.textContent = `y − ${y1} = ${m.toFixed(2)}(x − ${x1})`;
        const A = -dy, B = dx, C = A * x1 + B * y1;
        document.getElementById('sl-std')!.textContent = `${A}x + ${B}y = ${C}`;
      }
      document.getElementById('sl-dist')!.textContent = dist.toFixed(4);
      document.getElementById('sl-mid')!.textContent = `(${mx.toFixed(2)}, ${my.toFixed(2)})`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { ['sl-x1','sl-y1','sl-x2','sl-y2'].forEach(id => document.getElementById(id)!.addEventListener('input', calcSlope)); calcSlope(); }, 50);
  </script>
</CalculatorLayout>
