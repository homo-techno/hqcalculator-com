---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Floral Budget Calculator - Flower Arrangement Cost Estimator";
const description = "Estimate flower arrangement costs for events including centerpieces, bouquets, boutonnieres, corsages, and ceremony arch decorations.";
const relatedCalcs = [
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Seating Chart Calculator", url: "/seating-chart-calculator", description: "Table layout planner." },
  { name: "Event Lighting Calculator", url: "/event-lighting-calculator", description: "Venue lighting plan." },
  { name: "Invitation Calculator", url: "/invitation-calculator", description: "Invitation quantities." },
  { name: "Wedding Timeline Calculator", url: "/wedding-timeline-calculator", description: "Wedding day schedule." },
  { name: "Cake Serving Calculator", url: "/cake-serving-calculator", description: "Cake size for guests." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Floral Budget Calculator"
  keywords="floral budget, wedding flowers cost, centerpiece cost, bouquet price, event flowers, floral arrangement calculator"
  breadcrumbs={[{ name: "Floral Budget", url: "/floral-budget-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Floral Budget Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate the cost of flowers for your event or wedding.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Flower Price Tier</label>
          <select id="fb2-tier" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="budget">Budget ($)</option>
            <option value="mid" selected>Mid-Range ($$)</option>
            <option value="luxury">Luxury ($$$)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Bridal Bouquets</label>
          <input type="number" id="fb2-bridal" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Bridesmaid Bouquets</label>
          <input type="number" id="fb2-bmaids" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="0" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Boutonnieres</label>
          <input type="number" id="fb2-bouts" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="6" min="0" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Corsages</label>
          <input type="number" id="fb2-corsages" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="0" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Table Centerpieces</label>
          <input type="number" id="fb2-centers" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="12" min="0" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Ceremony Arch / Altar Arrangement</label>
          <select id="fb2-arch" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="0">None</option>
            <option value="1" selected>Simple arch (1 arrangement)</option>
            <option value="2">Full arch (2 arrangements)</option>
            <option value="3">Grand arch + aisle (3 arrangements)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Aisle Pew / Chair Markers</label>
          <input type="number" id="fb2-pews" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" min="0" step="2">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Flower Girl Petals (bags)</label>
          <input type="number" id="fb2-petals" class="fb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0" step="1">
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Floral Budget</div>
        <div class="text-5xl font-extrabold" id="fb2-total">--</div>
        <div class="text-sm mt-1" id="fb2-tier-label">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Personal Flowers</div>
          <div class="text-xl font-bold" id="fb2-personal">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Ceremony Flowers</div>
          <div class="text-xl font-bold" id="fb2-ceremony">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Reception Flowers</div>
          <div class="text-xl font-bold" id="fb2-reception">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Total Items</div>
          <div class="text-xl font-bold" id="fb2-items">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="fb2-details"></div>

      <ShareButton calculatorId="floral-budget" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Floral Budget Guide</h2>
      <p>Wedding flowers typically cost 8-10% of the total budget. Seasonal and local flowers save 20-30%. Common budget ranges: $1,500-$3,000 budget, $3,000-$6,000 mid-range, $6,000-$15,000+ luxury.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcFB2() {
      const tier = (document.getElementById('fb2-tier') as HTMLSelectElement).value;
      const bridal = parseInt((document.getElementById('fb2-bridal') as HTMLInputElement).value) || 0;
      const bmaids = parseInt((document.getElementById('fb2-bmaids') as HTMLInputElement).value) || 0;
      const bouts = parseInt((document.getElementById('fb2-bouts') as HTMLInputElement).value) || 0;
      const corsages = parseInt((document.getElementById('fb2-corsages') as HTMLInputElement).value) || 0;
      const centers = parseInt((document.getElementById('fb2-centers') as HTMLInputElement).value) || 0;
      const archCount = parseInt((document.getElementById('fb2-arch') as HTMLSelectElement).value) || 0;
      const pews = parseInt((document.getElementById('fb2-pews') as HTMLInputElement).value) || 0;
      const petals = parseInt((document.getElementById('fb2-petals') as HTMLInputElement).value) || 0;

      let mult = 1;
      let tierLabel = 'Mid-Range pricing';
      if (tier === 'budget') { mult = 0.6; tierLabel = 'Budget pricing'; }
      else if (tier === 'luxury') { mult = 1.8; tierLabel = 'Luxury pricing'; }

      const prices = {
        bridal: 200 * mult,
        bmaid: 85 * mult,
        bout: 18 * mult,
        corsage: 35 * mult,
        center: 120 * mult,
        arch: 350 * mult,
        pew: 30 * mult,
        petals: 25 * mult,
      };

      const pBridal = bridal * prices.bridal;
      const pBmaids = bmaids * prices.bmaid;
      const pBouts = bouts * prices.bout;
      const pCorsages = corsages * prices.corsage;
      const pCenters = centers * prices.center;
      const pArch = archCount * prices.arch;
      const pPews = pews * prices.pew;
      const pPetals = petals * prices.petals;

      const personalTotal = pBridal + pBmaids + pBouts + pCorsages;
      const ceremonyTotal = pArch + pPews + pPetals;
      const receptionTotal = pCenters;
      const deliverySetup = Math.round((personalTotal + ceremonyTotal + receptionTotal) * 0.10);
      const total = personalTotal + ceremonyTotal + receptionTotal + deliverySetup;
      const totalItems = bridal + bmaids + bouts + corsages + centers + archCount + pews + petals;

      const fmt = (n: number) => '$' + Math.round(n).toLocaleString();
      document.getElementById('fb2-total')!.textContent = fmt(total);
      document.getElementById('fb2-tier-label')!.textContent = tierLabel + ' (includes 10% delivery/setup)';
      document.getElementById('fb2-personal')!.textContent = fmt(personalTotal);
      document.getElementById('fb2-ceremony')!.textContent = fmt(ceremonyTotal);
      document.getElementById('fb2-reception')!.textContent = fmt(receptionTotal);
      document.getElementById('fb2-items')!.textContent = totalItems.toString();

      let details = '<h3 class="font-semibold text-sm text-text mb-2">Itemized Estimate</h3><ul class="text-sm text-text-secondary space-y-1">';
      if (bridal > 0) details += '<li>Bridal bouquet(s): ' + bridal + ' x ' + fmt(prices.bridal) + ' = ' + fmt(pBridal) + '</li>';
      if (bmaids > 0) details += '<li>Bridesmaid bouquets: ' + bmaids + ' x ' + fmt(prices.bmaid) + ' = ' + fmt(pBmaids) + '</li>';
      if (bouts > 0) details += '<li>Boutonnieres: ' + bouts + ' x ' + fmt(prices.bout) + ' = ' + fmt(pBouts) + '</li>';
      if (corsages > 0) details += '<li>Corsages: ' + corsages + ' x ' + fmt(prices.corsage) + ' = ' + fmt(pCorsages) + '</li>';
      if (centers > 0) details += '<li>Centerpieces: ' + centers + ' x ' + fmt(prices.center) + ' = ' + fmt(pCenters) + '</li>';
      if (archCount > 0) details += '<li>Arch/altar arrangements: ' + archCount + ' x ' + fmt(prices.arch) + ' = ' + fmt(pArch) + '</li>';
      if (pews > 0) details += '<li>Pew/chair markers: ' + pews + ' x ' + fmt(prices.pew) + ' = ' + fmt(pPews) + '</li>';
      if (petals > 0) details += '<li>Flower girl petals: ' + petals + ' x ' + fmt(prices.petals) + ' = ' + fmt(pPetals) + '</li>';
      details += '<li>Delivery & setup (10%): ' + fmt(deliverySetup) + '</li>';
      details += '</ul>';
      document.getElementById('fb2-details')!.innerHTML = details;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.fb2-in').forEach(el => { el.addEventListener('input', calcFB2); el.addEventListener('change', calcFB2); });
      calcFB2();
    }, 50);
  </script>
</CalculatorLayout>
