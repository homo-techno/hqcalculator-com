---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Carbon Sequestration Calculator - CO2 Offset by Trees";
const description = "Calculate CO2 absorbed by trees based on count, age, and species. Estimate carbon credits value and annual offset potential.";
const relatedCalcs = [
  { name: "Carbon Footprint", url: "/carbon-footprint-calculator", description: "Estimate your carbon footprint." },
  { name: "Carbon Offset", url: "/carbon-offset-calculator", description: "Calculate carbon offsets." },
  { name: "Compost Calculator", url: "/compost-calculator", description: "Composting needs and ratios." },
  { name: "Evapotranspiration", url: "/evapotranspiration-calculator", description: "Water loss from plants." },
  { name: "Air Quality Index", url: "/air-quality-index-calculator", description: "Air quality analysis." },
  { name: "Energy Converter", url: "/energy-converter", description: "Convert energy units." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Carbon Sequestration Calculator" keywords="carbon sequestration, CO2 absorption, tree carbon offset, carbon credits, tree planting carbon" breadcrumbs={[{ name: "Carbon Sequestration", url: "/carbon-sequestration-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Carbon Sequestration Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate CO2 absorption by trees and calculate carbon credit values for offset projects.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Tree Species Type</label>
          <select id="cs2-species" class="cs2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="48">Hardwood - Fast (Poplar, 48 lbs CO2/yr)</option>
            <option value="36" selected>Hardwood - Medium (Oak/Maple, 36 lbs CO2/yr)</option>
            <option value="25">Hardwood - Slow (Walnut, 25 lbs CO2/yr)</option>
            <option value="40">Softwood - Fast (Pine, 40 lbs CO2/yr)</option>
            <option value="30">Softwood - Medium (Spruce, 30 lbs CO2/yr)</option>
            <option value="22">Softwood - Slow (Cedar, 22 lbs CO2/yr)</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Number of Trees</label>
            <input type="number" id="cs2-count" class="cs2-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="100" min="1" max="100000" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Average Tree Age (years)</label>
            <input type="number" id="cs2-age" class="cs2-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="20" min="1" max="200" step="1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Carbon Credit Price ($/ton)</label>
            <input type="number" id="cs2-credit" class="cs2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" min="1" max="200" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Project Years</label>
            <input type="number" id="cs2-years" class="cs2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="1" max="100" step="1">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Annual CO2 Sequestered</div>
          <div class="text-5xl font-extrabold font-mono" id="cs2-annual">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Lifetime CO2</div>
            <div class="text-xl font-bold font-mono" id="cs2-lifetime">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Project Total</div>
            <div class="text-xl font-bold font-mono" id="cs2-project">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Carbon Tons/Yr</div>
            <div class="text-xl font-bold font-mono" id="cs2-tons">--</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Credit Value/Yr</div>
            <div class="text-xl font-bold font-mono" id="cs2-valueyr">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Total Credit Value</div>
            <div class="text-xl font-bold font-mono" id="cs2-valuetot">--</div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Cars Offset Equivalent (per year)</div>
          <div class="text-xl font-bold font-mono" id="cs2-cars">--</div>
        </div>
      </div>
      <ShareButton calculatorId="carbon-sequestration" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcCS2() {
      const co2PerTreeYr = parseFloat((document.getElementById('cs2-species') as HTMLSelectElement).value) || 36;
      const count = parseFloat((document.getElementById('cs2-count') as HTMLInputElement).value) || 100;
      const age = parseFloat((document.getElementById('cs2-age') as HTMLInputElement).value) || 20;
      const creditPrice = parseFloat((document.getElementById('cs2-credit') as HTMLInputElement).value) || 30;
      const projYears = parseFloat((document.getElementById('cs2-years') as HTMLInputElement).value) || 10;
      const ageFactor = age < 10 ? 0.5 : age < 30 ? 1.0 : age < 60 ? 0.85 : 0.6;
      const adjustedRate = co2PerTreeYr * ageFactor;
      const annualCO2lbs = adjustedRate * count;
      const annualCO2tons = annualCO2lbs / 2000;
      const lifetimeCO2 = adjustedRate * count * age;
      const projectCO2 = annualCO2lbs * projYears;
      const creditValueYr = annualCO2tons * creditPrice;
      const creditValueTotal = creditValueYr * projYears;
      const carsOffset = annualCO2lbs / 10000;
      document.getElementById('cs2-annual')!.textContent = Math.round(annualCO2lbs).toLocaleString() + ' lbs';
      document.getElementById('cs2-lifetime')!.textContent = (lifetimeCO2 / 2000).toFixed(1) + ' tons';
      document.getElementById('cs2-project')!.textContent = (projectCO2 / 2000).toFixed(1) + ' tons';
      document.getElementById('cs2-tons')!.textContent = annualCO2tons.toFixed(2);
      document.getElementById('cs2-valueyr')!.textContent = '$' + Math.round(creditValueYr).toLocaleString();
      document.getElementById('cs2-valuetot')!.textContent = '$' + Math.round(creditValueTotal).toLocaleString();
      document.getElementById('cs2-cars')!.textContent = carsOffset.toFixed(1) + ' cars';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.cs2-in').forEach(el => { el.addEventListener('input', calcCS2); el.addEventListener('change', calcCS2); });
      calcCS2();
    }, 50);
  </script>
</CalculatorLayout>
