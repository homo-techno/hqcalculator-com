---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Photo Booth Calculator - Rental Cost & Print Estimation";
const description = "Estimate photo booth rental costs including prints, backdrop, props, and digital sharing options based on event duration and guest count.";
const relatedCalcs = [
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Wedding Timeline Calculator", url: "/wedding-timeline-calculator", description: "Wedding day schedule." },
  { name: "DJ Playlist Calculator", url: "/dj-playlist-calculator", description: "Music for event time slots." },
  { name: "Event Lighting Calculator", url: "/event-lighting-calculator", description: "Venue lighting plan." },
  { name: "Party Supplies Calculator", url: "/party-supplies-calculator", description: "Event supply planning." },
  { name: "Invitation Calculator", url: "/invitation-calculator", description: "Invitation quantities." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Photo Booth Calculator"
  keywords="photo booth calculator, photo booth rental cost, event photo booth, wedding photo booth, photo booth prints"
  breadcrumbs={[{ name: "Photo Booth", url: "/photo-booth-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Photo Booth Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate photo booth rental costs and print quantities for your event.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Guests</label>
          <input type="number" id="pb2-guests" class="pb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="100" min="10" step="5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Booth Duration (hours)</label>
          <input type="number" id="pb2-hours" class="pb2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="1" max="8" step="0.5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Booth Type</label>
          <select id="pb2-type" class="pb2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="enclosed">Enclosed Booth (classic)</option>
            <option value="openair" selected>Open Air Booth</option>
            <option value="mirror">Mirror Booth (premium)</option>
            <option value="360">360 Video Booth</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Print Option</label>
          <select id="pb2-print" class="pb2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="unlimited" selected>Unlimited Prints</option>
            <option value="limited">2 prints per session</option>
            <option value="digital">Digital Only (no prints)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Extras</label>
          <select id="pb2-extras" class="pb2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="basic">Basic (standard backdrop)</option>
            <option value="premium" selected>Premium (custom backdrop + props)</option>
            <option value="deluxe">Deluxe (scrapbook + attendant + custom template)</option>
          </select>
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Rental Cost</div>
        <div class="text-5xl font-extrabold" id="pb2-cost">--</div>
        <div class="text-sm mt-1" id="pb2-perhour">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Expected Sessions</div>
          <div class="text-xl font-bold" id="pb2-sessions">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Total Prints</div>
          <div class="text-xl font-bold" id="pb2-prints">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Per Guest Cost</div>
          <div class="text-xl font-bold" id="pb2-perguest">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Space Needed</div>
          <div class="text-xl font-bold" id="pb2-space">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="pb2-details"></div>

      <ShareButton calculatorId="photo-booth" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Photo Booth Planning Guide</h2>
      <p>Average photo booth usage: 65-80% of guests will use it. Each session takes 2-3 minutes. Plan for 20-30 sessions per hour. Open air booths need 8x8 ft minimum space; enclosed booths need 6x6 ft.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcPB2() {
      const guests = parseInt((document.getElementById('pb2-guests') as HTMLInputElement).value) || 10;
      const hours = parseFloat((document.getElementById('pb2-hours') as HTMLInputElement).value) || 3;
      const boothType = (document.getElementById('pb2-type') as HTMLSelectElement).value;
      const printOpt = (document.getElementById('pb2-print') as HTMLSelectElement).value;
      const extras = (document.getElementById('pb2-extras') as HTMLSelectElement).value;

      const usageRate = 0.75;
      const sessions = Math.ceil(guests * usageRate);
      let printsPerSession = 2;
      if (printOpt === 'unlimited') printsPerSession = 3;
      else if (printOpt === 'digital') printsPerSession = 0;
      const totalPrints = sessions * printsPerSession;

      let baseCostPerHr = 200;
      if (boothType === 'enclosed') baseCostPerHr = 175;
      else if (boothType === 'openair') baseCostPerHr = 200;
      else if (boothType === 'mirror') baseCostPerHr = 300;
      else if (boothType === '360') baseCostPerHr = 350;

      let extrasCost = 0;
      if (extras === 'basic') extrasCost = 0;
      else if (extras === 'premium') extrasCost = 150;
      else if (extras === 'deluxe') extrasCost = 400;

      let printCost = 0;
      if (printOpt === 'unlimited') printCost = 100;
      else if (printOpt === 'limited') printCost = 50;

      const totalCost = baseCostPerHr * hours + extrasCost + printCost;
      const perGuest = totalCost / guests;

      let space = '8x8 ft';
      if (boothType === 'enclosed') space = '6x6 ft';
      else if (boothType === '360') space = '10x10 ft';

      const fmt = (n: number) => '$' + Math.round(n).toLocaleString();
      document.getElementById('pb2-cost')!.textContent = fmt(totalCost);
      document.getElementById('pb2-perhour')!.textContent = fmt(baseCostPerHr) + '/hour base rate';
      document.getElementById('pb2-sessions')!.textContent = sessions.toString();
      document.getElementById('pb2-prints')!.textContent = totalPrints > 0 ? totalPrints.toString() : 'Digital only';
      document.getElementById('pb2-perguest')!.textContent = fmt(perGuest);
      document.getElementById('pb2-space')!.textContent = space;

      let details = '<h3 class="font-semibold text-sm text-text mb-2">Cost Breakdown</h3><ul class="text-sm text-text-secondary space-y-1">';
      details += '<li>Booth rental (' + hours + ' hrs): ' + fmt(baseCostPerHr * hours) + '</li>';
      if (printCost > 0) details += '<li>Print package: ' + fmt(printCost) + '</li>';
      if (extrasCost > 0) details += '<li>Extras (' + extras + '): ' + fmt(extrasCost) + '</li>';
      details += '<li>Expected sessions: ~' + sessions + ' (75% guest usage)</li>';
      if (totalPrints > 0) details += '<li>Estimated prints: ' + totalPrints + ' strips</li>';
      details += '<li>Booth attendant: Typically included</li>';
      details += '</ul>';
      document.getElementById('pb2-details')!.innerHTML = details;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.pb2-in').forEach(el => { el.addEventListener('input', calcPB2); el.addEventListener('change', calcPB2); });
      calcPB2();
    }, 50);
  </script>
</CalculatorLayout>
