---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Cat Age Calculator - Cat Years to Human Years";
const description = "Convert your cat's age to human years and understand their life stage based on the latest veterinary guidelines.";
const relatedCalcs = [
  { name: "Dog Age Calculator", url: "/dog-age-calculator", description: "Dog years." },
  { name: "Age Calculator", url: "/age-calculator", description: "Human age." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "BMI." },
  { name: "Date Calculator", url: "/date-calculator", description: "Dates." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Calories." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Cat Age Calculator" keywords="cat age calculator, cat years to human years, cat age chart, feline age, cat life stage" breadcrumbs={[{ name: "Cat Age", url: "/cat-age-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Cat Age Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find out how old your cat is in human years.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Cat's Age (years)</label>
            <input type="number" id="ca-years" class="w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="5" min="0" max="30" step="0.5">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Lifestyle</label>
            <select id="ca-life" class="w-full px-4 py-3 border border-border rounded-xl text-lg">
              <option value="indoor" selected>Indoor Only</option>
              <option value="outdoor">Outdoor/Mixed</option>
            </select>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Human Equivalent Age</div>
          <div class="text-5xl font-extrabold" id="ca-human">0</div>
          <div class="text-sm text-blue-200 mt-1">human years</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Life Stage</div><div class="text-xl font-bold" id="ca-stage">-</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Avg. Lifespan</div><div class="text-xl font-bold" id="ca-lifespan">-</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Age Conversion Table</h3>
          <div class="grid grid-cols-4 gap-1 text-sm text-center">
            <span class="font-semibold text-xs">Cat</span><span class="font-semibold text-xs">Human</span><span class="font-semibold text-xs">Cat</span><span class="font-semibold text-xs">Human</span>
          </div>
          <div class="grid grid-cols-4 gap-1 text-sm text-center" id="ca-table"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Cat Life Stages</h3>
          <div class="grid grid-cols-2 gap-2 text-sm">
            <div class="flex justify-between"><span>Kitten</span><span class="font-bold">0-1 yr</span></div>
            <div class="flex justify-between"><span>Junior</span><span class="font-bold">1-2 yrs</span></div>
            <div class="flex justify-between"><span>Prime</span><span class="font-bold">3-6 yrs</span></div>
            <div class="flex justify-between"><span>Mature</span><span class="font-bold">7-10 yrs</span></div>
            <div class="flex justify-between"><span>Senior</span><span class="font-bold">11-14 yrs</span></div>
            <div class="flex justify-between"><span>Geriatric</span><span class="font-bold">15+ yrs</span></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="cat-age" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Cat Age Conversion</h2>
      <p>A cat's first year equals about 15 human years, the second year adds 9 more, and each year after adds about 4 human years.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function catToHuman(catYears: number): number {
      if (catYears <= 0) return 0;
      if (catYears <= 1) return catYears * 15;
      if (catYears <= 2) return 15 + (catYears - 1) * 9;
      return 24 + (catYears - 2) * 4;
    }
    function getStage(years: number): string {
      if (years < 1) return 'Kitten';
      if (years < 2) return 'Junior';
      if (years < 7) return 'Prime';
      if (years < 11) return 'Mature';
      if (years < 15) return 'Senior';
      return 'Geriatric';
    }
    function calcCatAge() {
      const years = parseFloat((document.getElementById('ca-years') as HTMLInputElement).value) || 0;
      const lifestyle = (document.getElementById('ca-life') as HTMLSelectElement).value;
      const humanAge = catToHuman(years);
      document.getElementById('ca-human')!.textContent = Math.round(humanAge).toString();
      document.getElementById('ca-stage')!.textContent = getStage(years);
      document.getElementById('ca-lifespan')!.textContent = lifestyle === 'indoor' ? '12-18 yrs' : '5-12 yrs';
      const tableRows: string[] = [];
      const ages = [0.5, 1, 2, 3, 5, 7, 10, 12, 15, 18, 20, 25];
      for (let i = 0; i < ages.length; i += 2) {
        const a1 = ages[i], a2 = ages[i + 1];
        const isCurrent1 = Math.abs(a1 - years) < 0.5;
        const isCurrent2 = a2 !== undefined && Math.abs(a2 - years) < 0.5;
        tableRows.push(`<span class="${isCurrent1 ? 'font-bold text-primary' : ''}">${a1}yr</span>`);
        tableRows.push(`<span class="${isCurrent1 ? 'font-bold text-primary' : ''}">${Math.round(catToHuman(a1))}</span>`);
        if (a2 !== undefined) {
          tableRows.push(`<span class="${isCurrent2 ? 'font-bold text-primary' : ''}">${a2}yr</span>`);
          tableRows.push(`<span class="${isCurrent2 ? 'font-bold text-primary' : ''}">${Math.round(catToHuman(a2))}</span>`);
        }
      }
      document.getElementById('ca-table')!.innerHTML = tableRows.join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.getElementById('ca-years')!.addEventListener('input', calcCatAge);
      document.getElementById('ca-life')!.addEventListener('change', calcCatAge);
      calcCatAge();
    }, 50);
  </script>
</CalculatorLayout>
