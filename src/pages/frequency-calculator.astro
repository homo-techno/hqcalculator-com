---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Frequency Calculator - Hz, kHz, MHz, GHz & Period";
const description = "Convert between frequency units and calculate period, wavelength, and angular frequency.";
const relatedCalcs = [
  { name: "Wavelength Calculator", url: "/wavelength-calculator", description: "Wavelength." },
  { name: "Ohm's Law", url: "/ohms-law-calculator", description: "Electrical." },
  { name: "Energy Converter", url: "/energy-converter", description: "Energy." },
  { name: "Speed Calculator", url: "/speed-calculator", description: "Speed." },
  { name: "Scientific Calculator", url: "/scientific-calculator", description: "Scientific." },
  { name: "Scientific Notation", url: "/scientific-notation-calculator", description: "Sci notation." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Frequency Calculator" keywords="frequency calculator, hertz, kHz, MHz, GHz, period, angular frequency, frequency to wavelength" breadcrumbs={[{ name: "Frequency", url: "/frequency-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Frequency Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert frequency units and calculate period and wavelength.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Frequency Value</label><input type="number" id="fq-val" class="fq-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="440" step="any" min="0"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Unit</label><select id="fq-unit" class="fq-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="Hz" selected>Hertz (Hz)</option>
            <option value="kHz">Kilohertz (kHz)</option>
            <option value="MHz">Megahertz (MHz)</option>
            <option value="GHz">Gigahertz (GHz)</option>
            <option value="rpm">RPM</option>
            <option value="rads">rad/s</option>
          </select></div>
        </div>
        <div class="flex gap-2 flex-wrap">
          <button class="fq-preset px-3 py-1 rounded-full text-xs border border-border font-bold hover:bg-blue-50" data-f="440" data-u="Hz">A4 Note (440 Hz)</button>
          <button class="fq-preset px-3 py-1 rounded-full text-xs border border-border font-bold hover:bg-blue-50" data-f="2.4" data-u="GHz">WiFi 2.4 GHz</button>
          <button class="fq-preset px-3 py-1 rounded-full text-xs border border-border font-bold hover:bg-blue-50" data-f="50" data-u="Hz">Mains 50 Hz</button>
          <button class="fq-preset px-3 py-1 rounded-full text-xs border border-border font-bold hover:bg-blue-50" data-f="98.5" data-u="MHz">FM Radio</button>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Frequency</div>
          <div class="text-4xl font-extrabold font-mono" id="fq-hz">0</div>
          <div class="text-sm text-blue-200 mt-1">Hz</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Period</div><div class="text-xl font-bold font-mono" id="fq-period">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Angular Freq (ω)</div><div class="text-xl font-bold font-mono" id="fq-omega">0 rad/s</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wavelength (light)</div><div class="text-xl font-bold font-mono" id="fq-wl">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wavelength (sound)</div><div class="text-xl font-bold font-mono" id="fq-ws">0</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3" id="fq-units"></div>
      </div>
      <ShareButton calculatorId="frequency" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    const fqFactors: Record<string, number> = { Hz: 1, kHz: 1e3, MHz: 1e6, GHz: 1e9, rpm: 1/60, rads: 1/(2*Math.PI) };
    function fmtSI(val: number, unit: string): string {
      if (val === 0) return '0 ' + unit;
      const prefixes = [['T',1e12],['G',1e9],['M',1e6],['k',1e3],['',1],['m',1e-3],['μ',1e-6],['n',1e-9],['p',1e-12]] as [string,number][];
      for (const [p, f] of prefixes) {
        if (Math.abs(val) >= f * 0.999) return (val / f).toFixed(4) + ' ' + p + unit;
      }
      return val.toExponential(4) + ' ' + unit;
    }
    function calcFQ() {
      const val = parseFloat((document.getElementById('fq-val') as HTMLInputElement).value) || 0;
      const unit = (document.getElementById('fq-unit') as HTMLSelectElement).value;
      const hz = val * fqFactors[unit];
      document.getElementById('fq-hz')!.textContent = hz >= 1e6 ? hz.toExponential(6) : hz.toLocaleString(undefined, { maximumFractionDigits: 4 });
      const period = hz > 0 ? 1 / hz : 0;
      document.getElementById('fq-period')!.textContent = fmtSI(period, 's');
      document.getElementById('fq-omega')!.textContent = (2 * Math.PI * hz).toFixed(4) + ' rad/s';
      const c = 299792458;
      const wl = hz > 0 ? c / hz : 0;
      document.getElementById('fq-wl')!.textContent = fmtSI(wl, 'm');
      const vsound = 343;
      const ws = hz > 0 ? vsound / hz : 0;
      document.getElementById('fq-ws')!.textContent = fmtSI(ws, 'm');
      const units = document.getElementById('fq-units')!;
      const conversions: [string, string, number][] = [
        ['kHz', 'kHz', hz / 1e3], ['MHz', 'MHz', hz / 1e6], ['GHz', 'GHz', hz / 1e9],
        ['RPM', 'RPM', hz * 60], ['rad/s', 'rad/s', hz * 2 * Math.PI], ['BPM', 'BPM', hz * 60],
      ];
      units.innerHTML = conversions.map(([label, , v]) =>
        `<div class="p-3 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">${label}</div><div class="text-lg font-bold font-mono">${Math.abs(v) < 0.001 || Math.abs(v) >= 1e9 ? v.toExponential(4) : v.toFixed(4)}</div></div>`
      ).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.fq-in').forEach(el => { el.addEventListener('input', calcFQ); el.addEventListener('change', calcFQ); });
      document.querySelectorAll('.fq-preset').forEach(btn => btn.addEventListener('click', () => {
        (document.getElementById('fq-val') as HTMLInputElement).value = (btn as HTMLElement).dataset.f!;
        (document.getElementById('fq-unit') as HTMLSelectElement).value = (btn as HTMLElement).dataset.u!;
        calcFQ();
      }));
      calcFQ();
    }, 50);
  </script>
</CalculatorLayout>
