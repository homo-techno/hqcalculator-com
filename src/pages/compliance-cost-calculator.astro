---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Compliance Cost Calculator - Annual Business Compliance Budget";
const description = "Estimate annual compliance costs for your business based on industry, company size, regulatory requirements, and staffing needs.";
const relatedCalcs = [
  { name: "Regulatory Compliance", url: "/regulatory-compliance-calculator", description: "Compliance staffing." },
  { name: "GDPR Fine Calculator", url: "/gdpr-fine-calculator", description: "GDPR penalty estimates." },
  { name: "OSHA Penalty Calculator", url: "/osha-penalty-calculator", description: "OSHA violation costs." },
  { name: "Incorporation Calculator", url: "/incorporation-calculator", description: "Business formation." },
  { name: "Workers Comp Calculator", url: "/workers-comp-calculator", description: "Workers comp premiums." },
  { name: "ADA Compliance Calculator", url: "/ada-compliance-calculator", description: "ADA renovation costs." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="Compliance Cost Calculator" keywords="compliance cost calculator, regulatory compliance, compliance budget, industry compliance, SOX compliance, HIPAA cost, compliance staffing" breadcrumbs={[{ name: "Compliance Cost", url: "/compliance-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Compliance Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate your annual compliance budget by industry and company size.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Industry</label>
          <select id="cco-industry" class="cco-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="finance">Financial Services / Banking</option>
            <option value="healthcare" selected>Healthcare / Pharma</option>
            <option value="tech">Technology / SaaS</option>
            <option value="manufacturing">Manufacturing</option>
            <option value="energy">Energy / Utilities</option>
            <option value="retail">Retail / E-commerce</option>
            <option value="construction">Construction</option>
            <option value="food">Food & Beverage</option>
            <option value="general">General / Other</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Employees</label>
          <input type="number" id="cco-employees" class="cco-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50" min="1" max="100000" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Annual Revenue ($)</label>
          <input type="number" id="cco-revenue" class="cco-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="5000000" min="0" step="100000">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Regulatory Frameworks</label>
          <select id="cco-framework" class="cco-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="basic" selected>Basic (state/local only)</option>
            <option value="moderate">Moderate (+ federal regulations)</option>
            <option value="heavy">Heavy (SOX, HIPAA, PCI, etc.)</option>
            <option value="international">International (+ GDPR, ISO, etc.)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Publicly Traded?</label>
          <select id="cco-public" class="cco-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="no" selected>No - Private company</option>
            <option value="yes">Yes - Publicly traded (SOX)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Data Handling Level</label>
          <select id="cco-data" class="cco-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="minimal">Minimal personal data</option>
            <option value="moderate" selected>Moderate data processing</option>
            <option value="extensive">Extensive / sensitive data (PII, PHI)</option>
          </select>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Annual Compliance Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="cco-total"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Staffing Cost</div>
            <div class="text-xl font-bold text-secondary" id="cco-staff"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Technology & Tools</div>
            <div class="text-xl font-bold" id="cco-tech"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Audit & Consulting</div>
            <div class="text-xl font-bold text-orange-600" id="cco-audit"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">% of Revenue</div>
            <div class="text-xl font-bold" id="cco-pct"></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="compliance-cost" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Understanding Compliance Costs</h2>
      <p>Compliance costs typically range from 1.5% to 10% of revenue depending on industry and regulatory burden. Financial services and healthcare face the highest compliance costs due to extensive federal regulations. The cost of non-compliance (fines, lawsuits, reputation damage) is typically 2-3 times the cost of compliance.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Key Cost Drivers</h3>
      <p>Major cost components include dedicated compliance staff, regulatory technology (RegTech), external audits, legal counsel, training programs, and reporting requirements. Companies should budget for both ongoing maintenance and periodic regulatory changes.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + Math.round(n).toLocaleString();

    function calcCCO() {
      const industry = (document.getElementById('cco-industry') as HTMLSelectElement).value;
      const employees = parseInt((document.getElementById('cco-employees') as HTMLInputElement).value) || 50;
      const revenue = parseFloat((document.getElementById('cco-revenue') as HTMLInputElement).value) || 0;
      const framework = (document.getElementById('cco-framework') as HTMLSelectElement).value;
      const isPublic = (document.getElementById('cco-public') as HTMLSelectElement).value;
      const dataLevel = (document.getElementById('cco-data') as HTMLSelectElement).value;

      // Industry base cost per employee
      const industryBase: Record<string, number> = {
        finance: 3500, healthcare: 3200, tech: 2000, manufacturing: 1800,
        energy: 2800, retail: 1200, construction: 1500, food: 1600, general: 1000
      };

      const frameworkMultiplier: Record<string, number> = {
        basic: 1.0, moderate: 1.5, heavy: 2.2, international: 2.8
      };

      const dataMultiplier: Record<string, number> = { minimal: 0.8, moderate: 1.0, extensive: 1.5 };

      const basePerEmp = (industryBase[industry] || 1000) * (frameworkMultiplier[framework] || 1) * (dataMultiplier[dataLevel] || 1);

      // Staffing: compliance officers needed
      let complianceStaff = Math.max(1, Math.ceil(employees / 100));
      if (framework === 'heavy' || framework === 'international') complianceStaff = Math.max(2, Math.ceil(employees / 50));
      const avgSalary = industry === 'finance' ? 95000 : industry === 'healthcare' ? 85000 : 75000;
      const staffingCost = complianceStaff * avgSalary;

      // Technology
      const techCost = employees * (dataLevel === 'extensive' ? 500 : dataLevel === 'moderate' ? 250 : 100);

      // Audit & consulting
      let auditCost = 15000;
      if (isPublic === 'yes') auditCost += 150000; // SOX audit
      if (framework === 'heavy') auditCost += 30000;
      if (framework === 'international') auditCost += 50000;
      if (employees > 500) auditCost *= 1.5;

      const total = staffingCost + techCost + auditCost;
      const pctRevenue = revenue > 0 ? ((total / revenue) * 100).toFixed(1) + '%' : 'N/A';

      document.getElementById('cco-total')!.textContent = fmt(total);
      document.getElementById('cco-staff')!.textContent = fmt(staffingCost);
      document.getElementById('cco-tech')!.textContent = fmt(techCost);
      document.getElementById('cco-audit')!.textContent = fmt(auditCost);
      document.getElementById('cco-pct')!.textContent = pctRevenue;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.cco-in').forEach(el => {
        el.addEventListener('input', calcCCO);
        el.addEventListener('change', calcCCO);
      });
      calcCCO();
    }, 50);
  </script>
</CalculatorLayout>
