---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Eyelash Extension Calculator - Count, Length & Curl by Eye Shape";
const description = "Calculate ideal lash extension count, length, and curl type based on your eye shape, natural lashes, and desired look.";
const relatedCalcs = [
  { name: "Facial Proportion Calculator", url: "/facial-proportion-calculator", description: "Golden ratio measurements." },
  { name: "Permanent Makeup Calculator", url: "/permanent-makeup-calculator", description: "PMU cost and timeline." },
  { name: "Botox Unit Calculator", url: "/botox-unit-calculator", description: "Botox units by area." },
  { name: "Beauty Budget Calculator", url: "/beauty-budget-calculator", description: "Beauty spending breakdown." },
  { name: "Nail Salon Pricing Calculator", url: "/nail-salon-pricing-calculator", description: "Nail service pricing." },
  { name: "Skincare Routine Calculator", url: "/skincare-routine-calculator", description: "Product layering order." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Eyelash Extension Calculator" keywords="eyelash extensions, lash extensions, lash count, lash curl, eye shape, lash length, classic lashes, volume lashes" breadcrumbs={[{ name: "Eyelash Extension", url: "/eyelash-extension-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Eyelash Extension Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the ideal lash extension specifications for your eye shape and desired look.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Eye Shape</label>
          <select id="ele-shape" class="ele-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="almond" selected>Almond</option>
            <option value="round">Round</option>
            <option value="hooded">Hooded</option>
            <option value="monolid">Monolid</option>
            <option value="downturned">Downturned</option>
            <option value="upturned">Upturned</option>
            <option value="closeset">Close-Set</option>
            <option value="wideset">Wide-Set</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Desired Look</label>
          <select id="ele-look" class="ele-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="natural">Natural Enhancement</option>
            <option value="classic" selected>Classic Glam</option>
            <option value="dramatic">Dramatic / Full</option>
            <option value="cat">Cat Eye</option>
            <option value="doll">Doll Eye</option>
            <option value="wispy">Wispy / Textured</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Extension Type</label>
          <select id="ele-type" class="ele-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="classic" selected>Classic (1:1)</option>
            <option value="hybrid">Hybrid (mix classic + volume)</option>
            <option value="volume">Volume (2-6 fans)</option>
            <option value="mega">Mega Volume (6-16 fans)</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Natural Lash Condition</label>
          <select id="ele-natural" class="ele-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="strong">Strong / Thick naturals</option>
            <option value="average" selected>Average naturals</option>
            <option value="fine">Fine / Sparse naturals</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Cost Per Full Set ($)</label>
          <input type="number" id="ele-cost" class="ele-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="200" min="50" max="600" step="10">
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recommended Lash Count</div>
          <div class="text-5xl font-extrabold font-mono" id="ele-count">0</div>
          <div class="text-sm text-blue-200 mt-1">extensions per eye</div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Recommended Curl</div><div class="text-xl font-bold" id="ele-curl">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Length Range</div><div class="text-xl font-bold" id="ele-length">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Diameter</div><div class="text-xl font-bold" id="ele-diameter">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Application Time</div><div class="text-xl font-bold" id="ele-time">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Fill Cost (2-3 wk)</div><div class="text-xl font-bold" id="ele-fill">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Annual Cost</div><div class="text-xl font-bold" id="ele-annual">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Style Mapping</h3>
          <div class="text-sm space-y-1" id="ele-mapping"></div>
        </div>
      </div>
      <ShareButton calculatorId="eyelash-extension" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Lash Extension Guide</h2>
      <p>Lash extensions are customized by count, length, curl, and diameter to complement your eye shape. Classic lashes (1:1 ratio) provide natural enhancement, while volume (2-6 fans) and mega volume (6-16 fans) create dramatic fullness. Curl types range from J (subtle) to D and L (dramatic lift). Length typically ranges from 8-15mm, with longer lashes in the center for doll eye or outer corners for cat eye styles. Fills every 2-3 weeks maintain the look.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcELE() {
      const shape = (document.getElementById('ele-shape') as HTMLSelectElement).value;
      const look = (document.getElementById('ele-look') as HTMLSelectElement).value;
      const type = (document.getElementById('ele-type') as HTMLSelectElement).value;
      const natural = (document.getElementById('ele-natural') as HTMLSelectElement).value;
      const cost = parseFloat((document.getElementById('ele-cost') as HTMLInputElement).value) || 200;

      let baseCount = 80;
      if (type === 'classic') baseCount = 80;
      else if (type === 'hybrid') baseCount = 100;
      else if (type === 'volume') baseCount = 120;
      else baseCount = 140;

      if (look === 'natural') baseCount *= 0.8;
      else if (look === 'dramatic' || look === 'cat') baseCount *= 1.2;
      else if (look === 'doll') baseCount *= 1.1;

      if (natural === 'fine') baseCount *= 0.85;
      else if (natural === 'strong') baseCount *= 1.1;

      let curl = 'C Curl';
      if (shape === 'hooded' || shape === 'monolid') curl = 'D or L Curl';
      else if (shape === 'round') curl = 'B or C Curl';
      else if (shape === 'downturned') curl = 'C or D Curl';
      else if (shape === 'upturned') curl = 'B or C Curl';
      else curl = 'C Curl';

      if (look === 'dramatic') curl = 'D Curl';
      else if (look === 'natural') curl = 'B or C Curl';

      let lengthRange = '9-12mm';
      if (look === 'natural') lengthRange = '8-10mm';
      else if (look === 'classic') lengthRange = '9-12mm';
      else if (look === 'dramatic') lengthRange = '11-14mm';
      else if (look === 'cat') lengthRange = '10-14mm';
      else if (look === 'doll') lengthRange = '10-13mm';
      else if (look === 'wispy') lengthRange = '9-13mm';

      let diameter = '0.15mm';
      if (type === 'classic') diameter = '0.15-0.20mm';
      else if (type === 'hybrid') diameter = '0.10-0.15mm';
      else if (type === 'volume') diameter = '0.05-0.07mm';
      else diameter = '0.03-0.05mm';

      let appTime = '90-120 min';
      if (type === 'classic') appTime = '90-120 min';
      else if (type === 'hybrid') appTime = '120-150 min';
      else if (type === 'volume') appTime = '150-180 min';
      else appTime = '180-240 min';

      const fillCost = cost * 0.5;
      const annualCost = cost + (fillCost * 17);

      const mapping: string[] = [];
      if (shape === 'almond') mapping.push('Almond eyes: most versatile - almost any style works well.');
      else if (shape === 'round') mapping.push('Round eyes: cat eye placement elongates; avoid heavy center volume.');
      else if (shape === 'hooded') mapping.push('Hooded eyes: use D/L curl to lift and open the eye area.');
      else if (shape === 'monolid') mapping.push('Monolid: L curl recommended for maximum visibility and lift.');
      else if (shape === 'downturned') mapping.push('Downturned: longer outer lashes with strong curl to lift corners.');
      else if (shape === 'upturned') mapping.push('Upturned: balanced lengths; avoid extra outer length to keep symmetry.');
      else if (shape === 'closeset') mapping.push('Close-set: longer outer extensions create the illusion of wider spacing.');
      else if (shape === 'wideset') mapping.push('Wide-set: focus length at inner and center to bring eyes together.');

      mapping.push('Lash type: ' + type.charAt(0).toUpperCase() + type.slice(1) + ' provides ' + (type === 'classic' ? 'subtle, natural density' : type === 'hybrid' ? 'a mix of texture and fullness' : type === 'volume' ? 'full, fluffy density' : 'maximum dramatic density') + '.');
      mapping.push('Recommended maintenance: fills every 2-3 weeks to replace shed lashes.');

      const count = Math.round(baseCount);
      document.getElementById('ele-count')!.textContent = count.toString();
      document.getElementById('ele-curl')!.textContent = curl;
      document.getElementById('ele-length')!.textContent = lengthRange;
      document.getElementById('ele-diameter')!.textContent = diameter;
      document.getElementById('ele-time')!.textContent = appTime;
      document.getElementById('ele-fill')!.textContent = '$' + fillCost.toFixed(0);
      document.getElementById('ele-annual')!.textContent = '$' + annualCost.toFixed(0);
      document.getElementById('ele-mapping')!.innerHTML = mapping.map(m => '<p>' + m + '</p>').join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ele-in').forEach(el => { el.addEventListener('input', calcELE); el.addEventListener('change', calcELE); });
      calcELE();
    }, 50);
  </script>
</CalculatorLayout>
