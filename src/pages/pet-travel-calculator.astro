---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Pet Travel Calculator - Crate Size, Documents & Airline Fees";
const description = "Calculate travel crate dimensions, required documents, quarantine periods by destination, and airline pet fees for traveling with your pet.";
const relatedCalcs = [
  { name: "Pet Cost Calculator", url: "/pet-cost-calculator", description: "Annual pet ownership costs." },
  { name: "Pet Insurance Calculator", url: "/pet-insurance-calculator", description: "Pet insurance premiums." },
  { name: "Dog Food Calculator", url: "/dog-food-calculator", description: "Daily food portions for dogs." },
  { name: "Cat Food Calculator", url: "/cat-food-calculator", description: "Daily calories for cats." },
  { name: "Dog BMI Calculator", url: "/dog-bmi-calculator", description: "Body condition score for dogs." },
  { name: "Pet Medication Calculator", url: "/pet-medication-calculator", description: "Medication dosage calculator." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Pet Travel Calculator" keywords="pet travel calculator, pet crate size, airline pet fees, pet quarantine, travel with pets, IATA crate" breadcrumbs={[{ name: "Pet Travel", url: "/pet-travel-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Pet Travel Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate crate dimensions, estimate airline fees, and check quarantine requirements for traveling with your pet.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Pet Type</label>
            <select id="pv-type" class="pv-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="small_dog" selected>Small Dog (&lt;20 lbs)</option>
              <option value="medium_dog">Medium Dog (20-50 lbs)</option>
              <option value="large_dog">Large Dog (50-100 lbs)</option>
              <option value="xlarge_dog">XL Dog (100+ lbs)</option>
              <option value="cat">Cat</option>
              <option value="small_pet">Small Pet (rabbit, etc.)</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Pet Length (nose to tail, in)</label>
            <input type="number" id="pv-length" class="pv-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="18" min="6" max="60" step="1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Pet Height (floor to ear, in)</label>
            <input type="number" id="pv-height" class="pv-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="12" min="4" max="40" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Destination</label>
            <select id="pv-dest" class="pv-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="domestic" selected>Domestic (US)</option>
              <option value="canada">Canada</option>
              <option value="eu">European Union</option>
              <option value="uk">United Kingdom</option>
              <option value="australia">Australia</option>
              <option value="japan">Japan</option>
              <option value="hawaii">Hawaii</option>
            </select>
          </div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Travel Method</label>
          <select id="pv-method" class="pv-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="cabin" selected>In-Cabin (airline)</option>
            <option value="cargo">Cargo (airline)</option>
            <option value="car">Road Trip</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">IATA Crate Size Needed</div>
          <div class="text-5xl font-extrabold font-mono" id="pv-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Crate Length</div><div class="text-xl font-bold font-mono" id="pv-clen">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Crate Width</div><div class="text-xl font-bold font-mono" id="pv-cwid">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Crate Height</div><div class="text-xl font-bold font-mono" id="pv-cht">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Airline Fee Est.</div><div class="text-xl font-bold font-mono" id="pv-fee">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Quarantine</div><div class="text-xl font-bold font-mono" id="pv-quarantine">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Documents</div><div class="text-xl font-bold font-mono" id="pv-docs">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="pet-travel" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPV() {
      const type = (document.getElementById('pv-type') as HTMLSelectElement).value;
      const petLength = parseFloat((document.getElementById('pv-length') as HTMLInputElement).value) || 18;
      const petHeight = parseFloat((document.getElementById('pv-height') as HTMLInputElement).value) || 12;
      const dest = (document.getElementById('pv-dest') as HTMLSelectElement).value;
      const method = (document.getElementById('pv-method') as HTMLSelectElement).value;

      // IATA crate requirements: L = pet length + 50%, W = pet width (shoulder) * 2, H = pet standing height + 10%
      const crateLength = Math.ceil(petLength * 1.5);
      const crateWidth = Math.ceil(petLength * 0.6);
      const crateHeight = Math.ceil(petHeight * 1.1);

      const crateDisplay = crateLength + '" x ' + crateWidth + '" x ' + crateHeight + '"';

      // Airline fees
      const fees: Record<string, Record<string, number>> = {
        cabin: { small_dog: 125, medium_dog: 0, large_dog: 0, xlarge_dog: 0, cat: 125, small_pet: 125 },
        cargo: { small_dog: 200, medium_dog: 300, large_dog: 400, xlarge_dog: 500, cat: 200, small_pet: 200 },
        car: { small_dog: 0, medium_dog: 0, large_dog: 0, xlarge_dog: 0, cat: 0, small_pet: 0 },
      };
      let fee = (fees[method] && fees[method][type]) || 0;
      if (method === 'cabin' && (type === 'medium_dog' || type === 'large_dog' || type === 'xlarge_dog')) {
        fee = 0; // Too large for cabin
      }

      // Quarantine periods
      const quarantine: Record<string, string> = {
        domestic: 'None', canada: 'None', eu: 'None (w/ docs)',
        uk: 'None (w/ docs)', australia: '10+ days', japan: 'Up to 180 days', hawaii: '5-120 days'
      };

      // Required documents
      const docs: Record<string, string> = {
        domestic: 'Health cert.', canada: 'Rabies + cert.',
        eu: 'EU pet passport', uk: 'AHC + rabies',
        australia: 'Import permit', japan: 'Rabies + microchip',
        hawaii: 'Rabies + blood test'
      };

      let feeDisplay = fee > 0 ? '$' + fee : (method === 'car' ? 'N/A' : 'Too large');

      document.getElementById('pv-result')!.textContent = crateDisplay;
      document.getElementById('pv-clen')!.textContent = crateLength + ' in';
      document.getElementById('pv-cwid')!.textContent = crateWidth + ' in';
      document.getElementById('pv-cht')!.textContent = crateHeight + ' in';
      document.getElementById('pv-fee')!.textContent = feeDisplay;
      document.getElementById('pv-quarantine')!.textContent = quarantine[dest] || 'Varies';
      document.getElementById('pv-docs')!.textContent = docs[dest] || 'Health cert.';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.pv-in').forEach(el => { el.addEventListener('input', calcPV); el.addEventListener('change', calcPV); });
      calcPV();
    }, 50);
  </script>
</CalculatorLayout>
