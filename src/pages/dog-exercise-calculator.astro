---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Dog Exercise Calculator - Daily Needs, Walk Duration & Calories Burned";
const description = "Calculate your dog's daily exercise requirements by breed, age, and size. Get walk duration recommendations and estimated calories burned.";
const relatedCalcs = [
  { name: "Dog Food Calculator", url: "/dog-food-calculator", description: "Daily food portions for dogs." },
  { name: "Dog BMI Calculator", url: "/dog-bmi-calculator", description: "Body condition score for dogs." },
  { name: "Dog Age Calculator", url: "/dog-age-calculator", description: "Convert dog years to human years." },
  { name: "Animal Calorie Calculator", url: "/animal-calorie-calculator", description: "Energy requirements for animals." },
  { name: "Pet Cost Calculator", url: "/pet-cost-calculator", description: "Annual pet ownership costs." },
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Calculate human calorie needs." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Dog Exercise Calculator" keywords="dog exercise calculator, dog walk duration, dog exercise needs, calories burned walking dog, daily activity" breadcrumbs={[{ name: "Dog Exercise", url: "/dog-exercise-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Dog Exercise Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find out how much exercise your dog needs daily based on breed type, age, and size.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Dog Weight (lbs)</label>
            <input type="number" id="de-weight" class="de-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="40" min="3" max="250" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Breed Energy Level</label>
            <select id="de-energy" class="de-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="low">Low (Bulldog, Basset)</option>
              <option value="moderate" selected>Moderate (Lab, Golden)</option>
              <option value="high">High (Border Collie, Husky)</option>
              <option value="very_high">Very High (Pointer, Vizsla)</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Age</label>
            <select id="de-age" class="de-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="puppy">Puppy (&lt;1 yr)</option>
              <option value="young">Young (1-3 yrs)</option>
              <option value="adult" selected>Adult (3-7 yrs)</option>
              <option value="senior">Senior (7+ yrs)</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Health Status</label>
            <select id="de-health" class="de-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="healthy" selected>Healthy</option>
              <option value="overweight">Overweight</option>
              <option value="limited">Joint/Health Issues</option>
            </select>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Daily Exercise Needed</div>
          <div class="text-5xl font-extrabold font-mono" id="de-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Walk Duration</div><div class="text-xl font-bold font-mono" id="de-walk">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Walks / Day</div><div class="text-xl font-bold font-mono" id="de-walks">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Distance (mi)</div><div class="text-xl font-bold font-mono" id="de-dist">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Calories Burned</div><div class="text-xl font-bold font-mono" id="de-cal">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Active Play</div><div class="text-xl font-bold font-mono" id="de-play">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Weekly Total</div><div class="text-xl font-bold font-mono" id="de-weekly">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="dog-exercise" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcDE() {
      const weight = parseFloat((document.getElementById('de-weight') as HTMLInputElement).value) || 0;
      const energy = (document.getElementById('de-energy') as HTMLSelectElement).value;
      const age = (document.getElementById('de-age') as HTMLSelectElement).value;
      const health = (document.getElementById('de-health') as HTMLSelectElement).value;

      // Base daily exercise minutes by energy level
      const baseMins: Record<string, number> = {
        low: 30, moderate: 60, high: 90, very_high: 120
      };

      // Age adjustment
      const ageAdj: Record<string, number> = {
        puppy: 0.6, young: 1.2, adult: 1.0, senior: 0.6
      };

      // Health adjustment
      const healthAdj: Record<string, number> = {
        healthy: 1.0, overweight: 0.85, limited: 0.5
      };

      const totalMins = (baseMins[energy] || 60) * (ageAdj[age] || 1.0) * (healthAdj[health] || 1.0);

      // Walk duration per session (60% of total exercise)
      const walkMins = totalMins * 0.6;
      // Number of walks (at least 2 for most dogs)
      const numWalks = totalMins >= 60 ? 2 : totalMins >= 90 ? 3 : 2;
      const perWalk = Math.round(walkMins / numWalks);

      // Distance: avg walking speed ~3 mph for moderate pace
      const walkHours = walkMins / 60;
      const distance = walkHours * 3;

      // Calories burned during exercise (approx 0.8 kcal/lb/mile for walking)
      const calBurned = Math.round(0.8 * weight * distance);

      // Active play time (40% of total)
      const playMins = Math.round(totalMins * 0.4);

      // Weekly total
      const weeklyHours = (totalMins * 7) / 60;

      document.getElementById('de-result')!.textContent = Math.round(totalMins) + ' min';
      document.getElementById('de-walk')!.textContent = perWalk + ' min each';
      document.getElementById('de-walks')!.textContent = numWalks.toString();
      document.getElementById('de-dist')!.textContent = distance.toFixed(1);
      document.getElementById('de-cal')!.textContent = calBurned + ' kcal';
      document.getElementById('de-play')!.textContent = playMins + ' min';
      document.getElementById('de-weekly')!.textContent = weeklyHours.toFixed(1) + ' hrs';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.de-in').forEach(el => { el.addEventListener('input', calcDE); el.addEventListener('change', calcDE); });
      calcDE();
    }, 50);
  </script>
</CalculatorLayout>
