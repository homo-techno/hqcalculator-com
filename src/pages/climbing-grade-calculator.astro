---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Climbing Grade Calculator";
const description = "Convert between climbing grade systems: YDS, French, UIAA, British, and V-scale bouldering. Compare difficulty across systems.";
const relatedCalcs = [
  { name: "Calories Burned", url: "/calories-burned-calculator", description: "Activity calories." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Heart Rate", url: "/heart-rate-calculator", description: "Heart rate zones." },
  { name: "Body Fat", url: "/body-fat-calculator", description: "Body fat percentage." },
  { name: "Hiking Pace", url: "/hiking-pace-calculator", description: "Hiking time estimate." },
  { name: "VO2 Max", url: "/vo2-max-calculator", description: "Aerobic fitness." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Climbing Grade Calculator" keywords="climbing grade converter, YDS grades, French climbing, UIAA scale, V-scale bouldering, rock climbing grades" breadcrumbs={[{ name: "Climbing Grade", url: "/climbing-grade-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Climbing Grade Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert climbing grades between YDS, French, UIAA, British, and V-scale bouldering systems.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="flex gap-2">
          <button class="cg-mode flex-1 py-2 rounded-xl font-bold text-sm border-2 border-primary bg-blue-50 text-primary" data-mode="route">Route Climbing</button>
          <button class="cg-mode flex-1 py-2 rounded-xl font-bold text-sm border-2 border-border text-text-muted" data-mode="boulder">Bouldering</button>
        </div>
        <div id="cg-route-section">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Select System</label>
            <select id="cg-system" class="cg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="yds">YDS (Yosemite Decimal)</option>
              <option value="french">French</option>
              <option value="uiaa">UIAA</option>
              <option value="british">British (Tech)</option>
            </select>
          </div>
          <div class="mt-3">
            <label class="block text-xs font-medium text-text mb-1">Grade</label>
            <select id="cg-grade" class="cg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold"></select>
          </div>
        </div>
        <div id="cg-boulder-section" class="hidden">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Select System</label>
            <select id="cg-bsystem" class="cg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="vscale">V-Scale (Hueco)</option>
              <option value="font">Font (Fontainebleau)</option>
            </select>
          </div>
          <div class="mt-3">
            <label class="block text-xs font-medium text-text mb-1">Grade</label>
            <select id="cg-bgrade" class="cg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold"></select>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Difficulty Level</div>
          <div class="text-4xl font-extrabold font-mono" id="cg-level">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Grade Equivalents</h3>
          <div class="text-sm space-y-2" id="cg-conversions"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Difficulty Description</h3>
          <p class="text-sm text-text-secondary" id="cg-desc">--</p>
        </div>
      </div>
      <ShareButton calculatorId="climbing-grade" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    let cgMode = 'route';
    const routeGrades = [
      { idx: 0, yds: '5.2', french: '2', uiaa: 'II', british: '1a', desc: 'Easy — simple climbing with large holds.' },
      { idx: 1, yds: '5.3', french: '2+', uiaa: 'III', british: '1b', desc: 'Easy — moderate scrambling.' },
      { idx: 2, yds: '5.4', french: '3', uiaa: 'IV', british: '1c', desc: 'Moderate — steeper with smaller holds.' },
      { idx: 3, yds: '5.5', french: '3+', uiaa: 'IV+', british: '2a', desc: 'Moderate — requires some technique.' },
      { idx: 4, yds: '5.6', french: '4a', uiaa: 'V-', british: '3a', desc: 'Moderate — good beginner outdoor grade.' },
      { idx: 5, yds: '5.7', french: '4b', uiaa: 'V', british: '3b', desc: 'Intermediate — some exposure, technique needed.' },
      { idx: 6, yds: '5.8', french: '4c', uiaa: 'V+', british: '3c', desc: 'Intermediate — sustained movement.' },
      { idx: 7, yds: '5.9', french: '5a', uiaa: 'VI-', british: '4a', desc: 'Upper intermediate — good fitness required.' },
      { idx: 8, yds: '5.10a', french: '5b', uiaa: 'VI', british: '4b', desc: 'Advanced beginner — technical sequences.' },
      { idx: 9, yds: '5.10b', french: '5c', uiaa: 'VI+', british: '4c', desc: 'Advanced — demanding moves.' },
      { idx: 10, yds: '5.10c', french: '6a', uiaa: 'VII-', british: '5a', desc: 'Advanced — strong technique and fitness.' },
      { idx: 11, yds: '5.10d', french: '6a+', uiaa: 'VII', british: '5b', desc: 'Advanced — sustained difficulty.' },
      { idx: 12, yds: '5.11a', french: '6b', uiaa: 'VII+', british: '5c', desc: 'Expert — powerful and technical.' },
      { idx: 13, yds: '5.11b', french: '6b+', uiaa: 'VIII-', british: '6a', desc: 'Expert — training required.' },
      { idx: 14, yds: '5.11c', french: '6c', uiaa: 'VIII', british: '6a', desc: 'Expert — high endurance needed.' },
      { idx: 15, yds: '5.11d', french: '6c+', uiaa: 'VIII+', british: '6b', desc: 'Expert — serious climbing.' },
      { idx: 16, yds: '5.12a', french: '7a', uiaa: 'VIII+', british: '6b', desc: 'Elite — dedicated training necessary.' },
      { idx: 17, yds: '5.12b', french: '7a+', uiaa: 'IX-', british: '6c', desc: 'Elite — athletic and precise.' },
      { idx: 18, yds: '5.12c', french: '7b', uiaa: 'IX', british: '6c', desc: 'Elite — exceptional fitness.' },
      { idx: 19, yds: '5.12d', french: '7b+', uiaa: 'IX+', british: '7a', desc: 'Elite — world-class amateur.' },
      { idx: 20, yds: '5.13a', french: '7c', uiaa: 'IX+', british: '7a', desc: 'Pro — professional level.' },
      { idx: 21, yds: '5.13b', french: '7c+', uiaa: 'X-', british: '7b', desc: 'Pro — competition level.' },
      { idx: 22, yds: '5.13c', french: '8a', uiaa: 'X', british: '7b', desc: 'Pro — world-class.' },
      { idx: 23, yds: '5.13d', french: '8a+', uiaa: 'X+', british: '7c', desc: 'Pro — among the best.' },
      { idx: 24, yds: '5.14a', french: '8b', uiaa: 'X+', british: '7c', desc: 'World-class — top 1% of climbers.' },
      { idx: 25, yds: '5.14b', french: '8b+', uiaa: 'XI-', british: '8a', desc: 'World-class — elite professional.' },
      { idx: 26, yds: '5.14c', french: '8c', uiaa: 'XI', british: '8a', desc: 'World-class — handful of climbers.' },
      { idx: 27, yds: '5.14d', french: '8c+', uiaa: 'XI+', british: '8b', desc: 'World-class — near human limit.' },
      { idx: 28, yds: '5.15a', french: '9a', uiaa: 'XII-', british: '8b', desc: 'Pinnacle — only a few in history.' },
      { idx: 29, yds: '5.15b', french: '9a+', uiaa: 'XII', british: '8c', desc: 'Pinnacle — hardest routes on Earth.' },
      { idx: 30, yds: '5.15c', french: '9b', uiaa: 'XII+', british: '8c', desc: 'Pinnacle — absolute human limit.' },
    ];
    const boulderGrades = [
      { idx: 0, vscale: 'VB', font: '3', desc: 'Beginner — easy moves, good holds.' },
      { idx: 1, vscale: 'V0', font: '4', desc: 'Beginner — first real bouldering grade.' },
      { idx: 2, vscale: 'V1', font: '5', desc: 'Novice — slightly harder moves.' },
      { idx: 3, vscale: 'V2', font: '5+', desc: 'Novice — technical moves required.' },
      { idx: 4, vscale: 'V3', font: '6A', desc: 'Intermediate — strength and technique.' },
      { idx: 5, vscale: 'V4', font: '6B', desc: 'Intermediate — solid climber.' },
      { idx: 6, vscale: 'V5', font: '6C', desc: 'Advanced — training needed.' },
      { idx: 7, vscale: 'V6', font: '7A', desc: 'Advanced — strong and skilled.' },
      { idx: 8, vscale: 'V7', font: '7A+', desc: 'Advanced — dedicated boulderer.' },
      { idx: 9, vscale: 'V8', font: '7B', desc: 'Expert — years of experience.' },
      { idx: 10, vscale: 'V9', font: '7B+', desc: 'Expert — elite fitness required.' },
      { idx: 11, vscale: 'V10', font: '7C', desc: 'Elite — very few reach this.' },
      { idx: 12, vscale: 'V11', font: '7C+', desc: 'Elite — competition level.' },
      { idx: 13, vscale: 'V12', font: '8A', desc: 'Pro — professional level.' },
      { idx: 14, vscale: 'V13', font: '8A+', desc: 'Pro — world-class.' },
      { idx: 15, vscale: 'V14', font: '8B', desc: 'World-class — top boulderers.' },
      { idx: 16, vscale: 'V15', font: '8B+', desc: 'World-class — near human limit.' },
      { idx: 17, vscale: 'V16', font: '8C', desc: 'Pinnacle — hardest problems known.' },
      { idx: 18, vscale: 'V17', font: '8C+', desc: 'Pinnacle — absolute limit.' },
    ];
    function populateRouteGrades() {
      const sys = (document.getElementById('cg-system') as HTMLSelectElement).value as 'yds' | 'french' | 'uiaa' | 'british';
      const sel = document.getElementById('cg-grade') as HTMLSelectElement;
      sel.innerHTML = routeGrades.map(g => `<option value="${g.idx}">${g[sys]}</option>`).join('');
      sel.value = '8';
    }
    function populateBoulderGrades() {
      const sys = (document.getElementById('cg-bsystem') as HTMLSelectElement).value as 'vscale' | 'font';
      const sel = document.getElementById('cg-bgrade') as HTMLSelectElement;
      sel.innerHTML = boulderGrades.map(g => `<option value="${g.idx}">${g[sys]}</option>`).join('');
      sel.value = '4';
    }
    function calcCG() {
      if (cgMode === 'route') {
        const idx = parseInt((document.getElementById('cg-grade') as HTMLSelectElement).value) || 0;
        const g = routeGrades[idx];
        if (!g) return;
        document.getElementById('cg-level')!.textContent = g.yds + ' / ' + g.french;
        document.getElementById('cg-conversions')!.innerHTML = [
          `<div class="flex justify-between"><span class="text-text-muted">YDS</span><span class="font-bold font-mono">${g.yds}</span></div>`,
          `<div class="flex justify-between"><span class="text-text-muted">French</span><span class="font-bold font-mono">${g.french}</span></div>`,
          `<div class="flex justify-between"><span class="text-text-muted">UIAA</span><span class="font-bold font-mono">${g.uiaa}</span></div>`,
          `<div class="flex justify-between"><span class="text-text-muted">British (Tech)</span><span class="font-bold font-mono">${g.british}</span></div>`,
        ].join('');
        document.getElementById('cg-desc')!.textContent = g.desc;
      } else {
        const idx = parseInt((document.getElementById('cg-bgrade') as HTMLSelectElement).value) || 0;
        const g = boulderGrades[idx];
        if (!g) return;
        document.getElementById('cg-level')!.textContent = g.vscale + ' / ' + g.font;
        document.getElementById('cg-conversions')!.innerHTML = [
          `<div class="flex justify-between"><span class="text-text-muted">V-Scale (Hueco)</span><span class="font-bold font-mono">${g.vscale}</span></div>`,
          `<div class="flex justify-between"><span class="text-text-muted">Font (Fontainebleau)</span><span class="font-bold font-mono">${g.font}</span></div>`,
        ].join('');
        document.getElementById('cg-desc')!.textContent = g.desc;
      }
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.cg-mode').forEach(b => b.addEventListener('click', () => {
        cgMode = (b as HTMLButtonElement).dataset.mode!;
        document.querySelectorAll('.cg-mode').forEach(btn => {
          const active = (btn as HTMLButtonElement).dataset.mode === cgMode;
          (btn as HTMLButtonElement).className = `cg-mode flex-1 py-2 rounded-xl font-bold text-sm border-2 ${active ? 'border-primary bg-blue-50 text-primary' : 'border-border text-text-muted'}`;
        });
        document.getElementById('cg-route-section')!.classList.toggle('hidden', cgMode !== 'route');
        document.getElementById('cg-boulder-section')!.classList.toggle('hidden', cgMode !== 'boulder');
        calcCG();
      }));
      populateRouteGrades();
      populateBoulderGrades();
      document.getElementById('cg-system')!.addEventListener('change', () => { populateRouteGrades(); calcCG(); });
      document.getElementById('cg-bsystem')!.addEventListener('change', () => { populateBoulderGrades(); calcCG(); });
      document.querySelectorAll('.cg-in').forEach(el => { el.addEventListener('input', calcCG); el.addEventListener('change', calcCG); });
      calcCG();
    }, 50);
  </script>
</CalculatorLayout>
