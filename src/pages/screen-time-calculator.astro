---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Screen Time Calculator - Daily Screen Usage Tracker 2026";
const description = "Calculate your total screen time across phone, computer, and TV. See weekly, monthly, and yearly totals, plus the percentage of your waking hours spent on screens.";

const relatedCalcs = [
  { name: "Pet Age Calculator", url: "/pet-age-calculator", description: "Pet age in human years." },
  { name: "Tip Calculator", url: "/tip-percentage-calculator", description: "Calculate tips." },
  { name: "Electricity Usage Calculator", url: "/electricity-usage-calculator", description: "Appliance electricity cost." },
  { name: "Event Countdown Calculator", url: "/event-countdown-calculator", description: "Count down to events." },
  { name: "Time Zone Calculator", url: "/time-zone-calculator", description: "Convert time zones." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Monthly budget planner." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Screen Time Calculator"
  keywords="screen time calculator, daily screen time, phone usage, computer time, TV time, digital wellness"
  breadcrumbs={[{ name: "Screen Time Calculator", url: "/screen-time-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Screen Time Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Track your daily screen time and see how it adds up over weeks, months, and years.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label for="sc2-phone" class="block text-sm font-medium text-text mb-1">Phone (hours/day)</label>
          <input type="number" id="sc2-phone" class="sc2-in w-full border border-border rounded-lg px-3 py-2" value="3.5" min="0" max="24" step="0.5" />
        </div>
        <div>
          <label for="sc2-computer" class="block text-sm font-medium text-text mb-1">Computer (hours/day)</label>
          <input type="number" id="sc2-computer" class="sc2-in w-full border border-border rounded-lg px-3 py-2" value="6" min="0" max="24" step="0.5" />
        </div>
        <div>
          <label for="sc2-tv" class="block text-sm font-medium text-text mb-1">TV / Streaming (hours/day)</label>
          <input type="number" id="sc2-tv" class="sc2-in w-full border border-border rounded-lg px-3 py-2" value="2" min="0" max="24" step="0.5" />
        </div>
        <div>
          <label for="sc2-other" class="block text-sm font-medium text-text mb-1">Other Screens (hours/day)</label>
          <input type="number" id="sc2-other" class="sc2-in w-full border border-border rounded-lg px-3 py-2" value="0.5" min="0" max="24" step="0.5" />
          <p class="text-xs text-text-muted mt-1">Tablet, gaming console, e-reader, etc.</p>
        </div>
        <div>
          <label for="sc2-waking" class="block text-sm font-medium text-text mb-1">Waking Hours Per Day</label>
          <input type="number" id="sc2-waking" class="sc2-in w-full border border-border rounded-lg px-3 py-2" value="16" min="8" max="24" step="0.5" />
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Daily Screen Time</div>
          <div class="text-5xl font-extrabold font-mono" id="sc2-result">0h</div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Weekly Total</div>
            <div class="text-xl font-bold" id="sc2-weekly">0h</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Monthly Total</div>
            <div class="text-xl font-bold" id="sc2-monthly">0h</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Yearly Total</div>
            <div class="text-xl font-bold" id="sc2-yearly">0 days</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">% of Waking Hours</div>
            <div class="text-xl font-bold" id="sc2-percent">0%</div>
          </div>
        </div>

        <!-- Health recommendations -->
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="text-sm font-bold text-text mb-2">Health Recommendations</h3>
          <div class="text-sm text-text-secondary space-y-1" id="sc2-recommendations"></div>
        </div>
      </div>

      <ShareButton calculatorId="screen-time" />
      <FeedbackWidget />
    </div>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcSC2() {
      const phone = parseFloat((document.getElementById('sc2-phone') as HTMLInputElement).value) || 0;
      const computer = parseFloat((document.getElementById('sc2-computer') as HTMLInputElement).value) || 0;
      const tv = parseFloat((document.getElementById('sc2-tv') as HTMLInputElement).value) || 0;
      const other = parseFloat((document.getElementById('sc2-other') as HTMLInputElement).value) || 0;
      const waking = parseFloat((document.getElementById('sc2-waking') as HTMLInputElement).value) || 16;

      const dailyTotal = phone + computer + tv + other;
      const weeklyTotal = dailyTotal * 7;
      const monthlyTotal = dailyTotal * 30.44;
      const yearlyHours = dailyTotal * 365;
      const yearlyDays = yearlyHours / 24;
      const percentWaking = waking > 0 ? (dailyTotal / waking) * 100 : 0;

      const fmtH = (h: number) => {
        if (h < 1) return Math.round(h * 60) + 'm';
        const hrs = Math.floor(h);
        const mins = Math.round((h - hrs) * 60);
        return mins > 0 ? `${hrs}h ${mins}m` : `${hrs}h`;
      };

      (document.getElementById('sc2-result') as HTMLElement).textContent = fmtH(dailyTotal);
      (document.getElementById('sc2-weekly') as HTMLElement).textContent = fmtH(weeklyTotal);
      (document.getElementById('sc2-monthly') as HTMLElement).textContent = fmtH(monthlyTotal);
      (document.getElementById('sc2-yearly') as HTMLElement).textContent = Math.round(yearlyDays) + ' days';
      (document.getElementById('sc2-percent') as HTMLElement).textContent = percentWaking.toFixed(0) + '%';

      // Health recommendations
      const recs: string[] = [];
      if (dailyTotal > 10) {
        recs.push('Your screen time is very high. Consider setting daily limits and taking regular breaks.');
      } else if (dailyTotal > 7) {
        recs.push('Your screen time is above average. Try the 20-20-20 rule: every 20 minutes, look at something 20 feet away for 20 seconds.');
      } else {
        recs.push('Your screen time is within a reasonable range. Keep maintaining healthy habits.');
      }

      if (phone > 4) recs.push('Phone usage over 4 hours/day is linked to increased stress and sleep issues. Try enabling app timers.');
      if (tv > 3) recs.push('Consider replacing some TV time with physical activity or social interaction.');
      if (computer > 8) recs.push('Extended computer use can cause eye strain and back pain. Use an ergonomic setup and take 5-minute breaks every hour.');

      recs.push('Avoid screens 1 hour before bedtime for better sleep quality.');

      (document.getElementById('sc2-recommendations') as HTMLElement).innerHTML = recs.map(r => `<p>-- ${r}</p>`).join('');

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.sc2-in').forEach(el => {
        el.addEventListener('input', calcSC2);
        el.addEventListener('change', calcSC2);
      });
      calcSC2();
    }, 50);
  </script>
</CalculatorLayout>
