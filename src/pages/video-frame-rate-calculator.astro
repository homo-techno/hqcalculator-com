---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Video Frame Rate Calculator - Frame Interval, Slow Motion & Timecode";
const description = "Calculate frame intervals, slow-motion factors, playback duration from capture FPS, and timecode conversions for video production.";
const relatedCalcs = [
  { name: "Video Bitrate", url: "/video-bitrate-calculator", description: "File size from bitrate." },
  { name: "Video Storage", url: "/video-storage-calculator", description: "Storage for video projects." },
  { name: "Timelapse", url: "/timelapse-calculator", description: "Timelapse frame calculations." },
  { name: "Animation Frames", url: "/animation-frame-calculator", description: "Animation timing." },
  { name: "Frequency", url: "/frequency-calculator", description: "Frequency and period." },
  { name: "Aspect Ratio", url: "/aspect-ratio-calculator", description: "Video dimensions." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Video Frame Rate Calculator" keywords="frame rate calculator, FPS, slow motion calculator, frame interval, timecode, playback duration, video fps" breadcrumbs={[{ name: "Video Frame Rate", url: "/video-frame-rate-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Video Frame Rate Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate frame intervals, slow-motion playback, and timecode from capture and playback frame rates.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Capture Frame Rate (fps)</label>
          <input type="number" id="vf-capture" class="vf-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="120" min="1" max="10000" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Playback Frame Rate (fps)</label>
          <select id="vf-playback" class="vf-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="23.976">23.976 fps (Film)</option>
            <option value="24">24 fps (Cinema)</option>
            <option value="25">25 fps (PAL)</option>
            <option value="29.97">29.97 fps (NTSC)</option>
            <option value="30" selected>30 fps</option>
            <option value="50">50 fps (PAL HFR)</option>
            <option value="59.94">59.94 fps (NTSC HFR)</option>
            <option value="60">60 fps</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Recording Duration</label>
          <div class="grid grid-cols-3 gap-2">
            <div>
              <label class="block text-xs text-text-secondary">Minutes</label>
              <input type="number" id="vf-mins" class="vf-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="0" min="0" step="1">
            </div>
            <div>
              <label class="block text-xs text-text-secondary">Seconds</label>
              <input type="number" id="vf-secs" class="vf-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="10" min="0" step="1">
            </div>
            <div>
              <label class="block text-xs text-text-secondary">Frames</label>
              <input type="number" id="vf-frames" class="vf-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="0" min="0" step="1">
            </div>
          </div>
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Slow-Motion Factor</div>
          <div class="text-4xl font-extrabold" id="vf-factor"></div>
          <div class="text-sm text-blue-200 mt-1" id="vf-desc"></div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Frame Interval</div>
            <div class="text-xl font-bold text-text" id="vf-interval"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Total Frames Captured</div>
            <div class="text-xl font-bold text-text" id="vf-totalframes"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Playback Duration</div>
            <div class="text-xl font-bold text-text" id="vf-playback-dur"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Timecode (HH:MM:SS:FF)</div>
            <div class="text-xl font-bold text-text" id="vf-timecode"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Capture Shutter Limit</div>
            <div class="text-xl font-bold text-text" id="vf-shutter"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">180-degree Shutter</div>
            <div class="text-xl font-bold text-text" id="vf-180shutter"></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="video-frame-rate" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Understanding Frame Rates</h2>
      <p>Frame rate (fps) determines how many images are captured or displayed per second. Filming at a higher fps than playback creates slow motion.</p>
      <p><strong>180-degree shutter rule:</strong> For natural motion blur, set shutter speed to double the frame rate (e.g., 1/48 for 24fps).</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcVF() {
      const captureFPS = parseFloat((document.getElementById('vf-capture') as HTMLInputElement).value) || 120;
      const playbackFPS = parseFloat((document.getElementById('vf-playback') as HTMLSelectElement).value);
      const mins = parseInt((document.getElementById('vf-mins') as HTMLInputElement).value) || 0;
      const secs = parseInt((document.getElementById('vf-secs') as HTMLInputElement).value) || 0;
      const frames = parseInt((document.getElementById('vf-frames') as HTMLInputElement).value) || 0;

      const totalRecordSecs = mins * 60 + secs + frames / captureFPS;
      const slowFactor = captureFPS / playbackFPS;
      const totalFrames = Math.round(totalRecordSecs * captureFPS);
      const playbackSecs = totalFrames / playbackFPS;

      document.getElementById('vf-factor')!.textContent = slowFactor.toFixed(2) + 'x';

      let desc = '';
      if (slowFactor > 1) desc = 'Slow motion (' + slowFactor.toFixed(1) + 'x slower)';
      else if (slowFactor < 1) desc = 'Speed up (' + (1 / slowFactor).toFixed(1) + 'x faster)';
      else desc = 'Real-time playback';
      document.getElementById('vf-desc')!.textContent = desc;

      const intervalMS = 1000 / captureFPS;
      document.getElementById('vf-interval')!.textContent = intervalMS.toFixed(3) + ' ms';
      document.getElementById('vf-totalframes')!.textContent = totalFrames.toLocaleString();

      const pbMins = Math.floor(playbackSecs / 60);
      const pbSecs = (playbackSecs % 60).toFixed(2);
      document.getElementById('vf-playback-dur')!.textContent = pbMins + 'm ' + pbSecs + 's';

      const tcH = Math.floor(playbackSecs / 3600);
      const tcM = Math.floor((playbackSecs % 3600) / 60);
      const tcS = Math.floor(playbackSecs % 60);
      const tcF = Math.floor((playbackSecs % 1) * playbackFPS);
      document.getElementById('vf-timecode')!.textContent =
        String(tcH).padStart(2, '0') + ':' +
        String(tcM).padStart(2, '0') + ':' +
        String(tcS).padStart(2, '0') + ':' +
        String(tcF).padStart(2, '0');

      document.getElementById('vf-shutter')!.textContent = '1/' + Math.round(captureFPS) + 's';
      document.getElementById('vf-180shutter')!.textContent = '1/' + Math.round(captureFPS * 2) + 's';

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.vf-in').forEach(el => {
        el.addEventListener('input', calcVF);
        el.addEventListener('change', calcVF);
      });
      calcVF();
    }, 50);
  </script>
</CalculatorLayout>
