---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Clothing Size Converter - US/UK/EU Size Chart 2026";
const description = "Convert clothing sizes between US, UK, and EU for men's and women's shirts, pants, and shoes. Get equivalent sizes instantly.";

const relatedCalcs = [
  { name: "Unit Converter - Weight", url: "/unit-converter-weight", description: "Convert weight units." },
  { name: "Tip Calculator", url: "/tip-percentage-calculator", description: "Calculate tips." },
  { name: "Screen Time Calculator", url: "/screen-time-calculator", description: "Track screen time." },
  { name: "Pet Age Calculator", url: "/pet-age-calculator", description: "Pet age in human years." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Monthly budget planner." },
  { name: "Time Zone Calculator", url: "/time-zone-calculator", description: "Convert time zones." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Clothing Size Converter"
  keywords="clothing size converter, US to EU size, UK size chart, shoe size converter, mens sizes, womens sizes"
  breadcrumbs={[{ name: "Clothing Size Converter", url: "/clothing-size-converter" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Clothing Size Converter</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert clothing sizes between US, UK, and EU for different garment types.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label for="cs2-gender" class="block text-sm font-medium text-text mb-1">Gender</label>
          <select id="cs2-gender" class="cs2-in w-full border border-border rounded-lg px-3 py-2">
            <option value="women">Women</option>
            <option value="men">Men</option>
          </select>
        </div>
        <div>
          <label for="cs2-category" class="block text-sm font-medium text-text mb-1">Category</label>
          <select id="cs2-category" class="cs2-in w-full border border-border rounded-lg px-3 py-2">
            <option value="tops">Tops / Shirts</option>
            <option value="pants">Pants / Trousers</option>
            <option value="shoes">Shoes</option>
          </select>
        </div>
        <div>
          <label for="cs2-from" class="block text-sm font-medium text-text mb-1">From Region</label>
          <select id="cs2-from" class="cs2-in w-full border border-border rounded-lg px-3 py-2">
            <option value="US">US</option>
            <option value="UK">UK</option>
            <option value="EU">EU</option>
          </select>
        </div>
        <div>
          <label for="cs2-size" class="block text-sm font-medium text-text mb-1">Your Size</label>
          <select id="cs2-size" class="cs2-in w-full border border-border rounded-lg px-3 py-2">
            <option value="0">Select size</option>
          </select>
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Equivalent Sizes</div>
          <div class="text-3xl font-extrabold font-mono" id="cs2-result">--</div>
        </div>

        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">US Size</div>
            <div class="text-xl font-bold" id="cs2-us">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">UK Size</div>
            <div class="text-xl font-bold" id="cs2-uk">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">EU Size</div>
            <div class="text-xl font-bold" id="cs2-eu">--</div>
          </div>
        </div>

        <!-- Full size chart -->
        <div class="mt-4">
          <h3 class="text-sm font-bold text-text mb-2">Full Size Chart</h3>
          <div class="overflow-x-auto">
            <table class="w-full text-sm" id="cs2-chart">
              <thead>
                <tr class="border-b border-border">
                  <th class="py-1 pr-3 font-semibold text-left">US</th>
                  <th class="py-1 pr-3 font-semibold text-left">UK</th>
                  <th class="py-1 font-semibold text-left">EU</th>
                </tr>
              </thead>
              <tbody id="cs2-chart-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <ShareButton calculatorId="clothing-size-converter" />
      <FeedbackWidget />
    </div>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    type SizeRow = { US: string; UK: string; EU: string };

    const sizeData: Record<string, Record<string, SizeRow[]>> = {
      women: {
        tops: [
          { US: 'XS (0-2)', UK: '4-6', EU: '32-34' },
          { US: 'S (4-6)', UK: '8-10', EU: '36-38' },
          { US: 'M (8-10)', UK: '12-14', EU: '40-42' },
          { US: 'L (12-14)', UK: '16-18', EU: '44-46' },
          { US: 'XL (16-18)', UK: '20-22', EU: '48-50' },
          { US: 'XXL (20)', UK: '24', EU: '52' },
        ],
        pants: [
          { US: '0 (24)', UK: '4', EU: '32' },
          { US: '2 (25)', UK: '6', EU: '34' },
          { US: '4 (26)', UK: '8', EU: '36' },
          { US: '6 (27)', UK: '10', EU: '38' },
          { US: '8 (28)', UK: '12', EU: '40' },
          { US: '10 (29)', UK: '14', EU: '42' },
          { US: '12 (30)', UK: '16', EU: '44' },
          { US: '14 (31)', UK: '18', EU: '46' },
          { US: '16 (32)', UK: '20', EU: '48' },
        ],
        shoes: [
          { US: '5', UK: '3', EU: '35-36' },
          { US: '5.5', UK: '3.5', EU: '36' },
          { US: '6', UK: '4', EU: '36-37' },
          { US: '6.5', UK: '4.5', EU: '37' },
          { US: '7', UK: '5', EU: '37-38' },
          { US: '7.5', UK: '5.5', EU: '38' },
          { US: '8', UK: '6', EU: '38-39' },
          { US: '8.5', UK: '6.5', EU: '39' },
          { US: '9', UK: '7', EU: '39-40' },
          { US: '9.5', UK: '7.5', EU: '40' },
          { US: '10', UK: '8', EU: '40-41' },
          { US: '11', UK: '9', EU: '41-42' },
        ],
      },
      men: {
        tops: [
          { US: 'XS (34)', UK: '34', EU: '44' },
          { US: 'S (36)', UK: '36', EU: '46' },
          { US: 'M (38-40)', UK: '38-40', EU: '48-50' },
          { US: 'L (42-44)', UK: '42-44', EU: '52-54' },
          { US: 'XL (46)', UK: '46', EU: '56' },
          { US: 'XXL (48)', UK: '48', EU: '58' },
        ],
        pants: [
          { US: '28', UK: '28', EU: '44' },
          { US: '30', UK: '30', EU: '46' },
          { US: '32', UK: '32', EU: '48' },
          { US: '34', UK: '34', EU: '50' },
          { US: '36', UK: '36', EU: '52' },
          { US: '38', UK: '38', EU: '54' },
          { US: '40', UK: '40', EU: '56' },
          { US: '42', UK: '42', EU: '58' },
        ],
        shoes: [
          { US: '7', UK: '6', EU: '39-40' },
          { US: '7.5', UK: '6.5', EU: '40' },
          { US: '8', UK: '7', EU: '40-41' },
          { US: '8.5', UK: '7.5', EU: '41' },
          { US: '9', UK: '8', EU: '41-42' },
          { US: '9.5', UK: '8.5', EU: '42' },
          { US: '10', UK: '9', EU: '42-43' },
          { US: '10.5', UK: '9.5', EU: '43' },
          { US: '11', UK: '10', EU: '43-44' },
          { US: '11.5', UK: '10.5', EU: '44' },
          { US: '12', UK: '11', EU: '44-45' },
          { US: '13', UK: '12', EU: '45-46' },
        ],
      },
    };

    function getCurrentData(): SizeRow[] {
      const gender = (document.getElementById('cs2-gender') as HTMLSelectElement).value;
      const category = (document.getElementById('cs2-category') as HTMLSelectElement).value;
      return sizeData[gender]?.[category] || [];
    }

    function populateSizes() {
      const from = (document.getElementById('cs2-from') as HTMLSelectElement).value as 'US' | 'UK' | 'EU';
      const data = getCurrentData();
      const sizeSelect = document.getElementById('cs2-size') as HTMLSelectElement;
      sizeSelect.innerHTML = '';
      data.forEach((row, i) => {
        const opt = document.createElement('option');
        opt.value = String(i);
        opt.textContent = row[from];
        sizeSelect.appendChild(opt);
      });
      calcCS2();
    }

    function calcCS2() {
      const data = getCurrentData();
      const idx = parseInt((document.getElementById('cs2-size') as HTMLSelectElement).value) || 0;
      const row = data[idx];

      if (row) {
        (document.getElementById('cs2-result') as HTMLElement).textContent = `US ${row.US} | UK ${row.UK} | EU ${row.EU}`;
        (document.getElementById('cs2-us') as HTMLElement).textContent = row.US;
        (document.getElementById('cs2-uk') as HTMLElement).textContent = row.UK;
        (document.getElementById('cs2-eu') as HTMLElement).textContent = row.EU;
      }

      // Render full chart
      let html = '';
      data.forEach((r, i) => {
        const highlight = i === idx ? 'bg-blue-50 font-semibold' : '';
        html += `<tr class="border-b border-border/30 ${highlight}">
          <td class="py-1 pr-3">${r.US}</td>
          <td class="py-1 pr-3">${r.UK}</td>
          <td class="py-1">${r.EU}</td>
        </tr>`;
      });
      (document.getElementById('cs2-chart-body') as HTMLElement).innerHTML = html;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.cs2-in').forEach(el => {
        el.addEventListener('change', () => {
          const id = (el as HTMLElement).id;
          if (id === 'cs2-gender' || id === 'cs2-category' || id === 'cs2-from') {
            populateSizes();
          } else {
            calcCS2();
          }
        });
      });
      populateSizes();
    }, 50);
  </script>
</CalculatorLayout>
