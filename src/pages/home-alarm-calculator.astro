---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Home Alarm Calculator - Sensor Count & Monitoring Cost";
const description = "Calculate the number of alarm sensors needed by doors, windows, and rooms. Estimate monitoring costs and battery backup time for your security system.";
const relatedCalcs = [
  { name: "Electricity Cost", url: "/electricity-cost-calculator", description: "Energy costs." },
  { name: "Battery Life", url: "/battery-life-calculator", description: "Battery runtime." },
  { name: "Square Footage", url: "/square-footage-calculator", description: "Area calculation." },
  { name: "Lighting", url: "/lighting-calculator", description: "Lighting design." },
  { name: "Electricity Bill", url: "/electricity-bill-calculator", description: "Bill estimates." },
  { name: "Solar Panel", url: "/solar-panel-calculator", description: "Solar sizing." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Home Alarm Calculator" keywords="home alarm calculator, security sensor count, monitoring cost, battery backup, alarm system sizing, door window sensors" breadcrumbs={[{ name: "Home Alarm", url: "/home-alarm-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Home Alarm Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Determine sensor counts, monitoring costs, and battery backup time for your home security system.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Entry Points & Rooms</h3>
          <div class="grid grid-cols-2 gap-2">
            <div><label class="block text-xs text-text-muted">Exterior Doors</label><input type="number" id="ha-doors" class="ha-in w-full px-2 py-2 border border-border rounded-xl text-lg font-bold text-center" value="3" min="0"></div>
            <div><label class="block text-xs text-text-muted">Windows (ground floor)</label><input type="number" id="ha-windows" class="ha-in w-full px-2 py-2 border border-border rounded-xl text-lg font-bold text-center" value="8" min="0"></div>
            <div><label class="block text-xs text-text-muted">Sliding Doors</label><input type="number" id="ha-sliding" class="ha-in w-full px-2 py-2 border border-border rounded-xl text-lg font-bold text-center" value="1" min="0"></div>
            <div><label class="block text-xs text-text-muted">Garage Doors</label><input type="number" id="ha-garage" class="ha-in w-full px-2 py-2 border border-border rounded-xl text-lg font-bold text-center" value="1" min="0"></div>
            <div><label class="block text-xs text-text-muted">Rooms for Motion Sensors</label><input type="number" id="ha-rooms" class="ha-in w-full px-2 py-2 border border-border rounded-xl text-lg font-bold text-center" value="4" min="0"></div>
            <div><label class="block text-xs text-text-muted">Smoke/CO Detectors</label><input type="number" id="ha-smoke" class="ha-in w-full px-2 py-2 border border-border rounded-xl text-lg font-bold text-center" value="3" min="0"></div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Monitoring Type</label>
            <select id="ha-monitor" class="ha-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="self">Self-Monitoring (free)</option>
              <option value="basic" selected>Basic Professional ($15/mo)</option>
              <option value="premium">Premium Professional ($30/mo)</option>
              <option value="full">Full Service ($45/mo)</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">System Power (watts)</label>
            <input type="number" id="ha-power" class="ha-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="15" min="1" step="1">
          </div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Backup Battery (Wh)</label>
          <input type="number" id="ha-battery" class="ha-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="120" min="10" step="10">
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Sensors Needed</div>
          <div class="text-5xl font-extrabold font-mono" id="ha-result">0</div>
          <div class="text-sm text-blue-200 mt-1" id="ha-note">-</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Contact Sensors</div>
            <div class="text-xl font-bold font-mono" id="ha-contacts">0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Motion Sensors</div>
            <div class="text-xl font-bold font-mono" id="ha-motion">0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Safety Detectors</div>
            <div class="text-xl font-bold font-mono" id="ha-safety">0</div>
          </div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Battery Backup</div>
            <div class="text-xl font-bold font-mono" id="ha-backup">0 hr</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Monthly Cost</div>
            <div class="text-xl font-bold font-mono" id="ha-monthly">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Annual Cost</div>
            <div class="text-xl font-bold font-mono" id="ha-annual">$0</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="home-alarm" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcHA() {
      const doors = parseInt((document.getElementById('ha-doors') as HTMLInputElement).value) || 0;
      const windows = parseInt((document.getElementById('ha-windows') as HTMLInputElement).value) || 0;
      const sliding = parseInt((document.getElementById('ha-sliding') as HTMLInputElement).value) || 0;
      const garage = parseInt((document.getElementById('ha-garage') as HTMLInputElement).value) || 0;
      const rooms = parseInt((document.getElementById('ha-rooms') as HTMLInputElement).value) || 0;
      const smoke = parseInt((document.getElementById('ha-smoke') as HTMLInputElement).value) || 0;
      const monitor = (document.getElementById('ha-monitor') as HTMLSelectElement).value;
      const power = parseFloat((document.getElementById('ha-power') as HTMLInputElement).value) || 15;
      const batteryWh = parseFloat((document.getElementById('ha-battery') as HTMLInputElement).value) || 120;

      const contacts = doors + windows + sliding + garage;
      const motionSensors = rooms;
      const safetyDetectors = smoke;
      const totalSensors = contacts + motionSensors + safetyDetectors;

      // Battery backup in hours
      const backupHours = power > 0 ? batteryWh / power : 0;

      // Monitoring cost
      const monitorCosts: Record<string, number> = { 'self': 0, 'basic': 15, 'premium': 30, 'full': 45 };
      const monthlyCost = monitorCosts[monitor] || 0;
      const annualCost = monthlyCost * 12;

      document.getElementById('ha-result')!.textContent = totalSensors.toString();
      document.getElementById('ha-note')!.textContent = contacts + ' contact + ' + motionSensors + ' motion + ' + safetyDetectors + ' safety';
      document.getElementById('ha-contacts')!.textContent = contacts.toString();
      document.getElementById('ha-motion')!.textContent = motionSensors.toString();
      document.getElementById('ha-safety')!.textContent = safetyDetectors.toString();
      document.getElementById('ha-backup')!.textContent = backupHours.toFixed(1) + ' hr';
      document.getElementById('ha-monthly')!.textContent = '$' + monthlyCost.toFixed(2);
      document.getElementById('ha-annual')!.textContent = '$' + annualCost.toFixed(2);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.ha-in').forEach(el => {
        el.addEventListener('input', calcHA);
        el.addEventListener('change', calcHA);
      });
      calcHA();
    }, 50);
  </script>
</CalculatorLayout>
