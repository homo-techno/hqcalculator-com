---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Fashion Markup Calculator - Wholesale to Retail Pricing";
const description = "Calculate fashion markup from wholesale to retail, keystone pricing, MAP, margin analysis, and MSRP for clothing and accessories.";
const relatedCalcs = [
  { name: "Profit Margin Calculator", url: "/profit-margin-calculator", description: "Profit margin analysis." },
  { name: "Break Even Calculator", url: "/break-even-calculator", description: "Break-even point." },
  { name: "Discount Calculator", url: "/discount-calculator", description: "Discount calculations." },
  { name: "Sales Tax Calculator", url: "/sales-tax-calculator", description: "Sales tax calculations." },
  { name: "ROI Calculator", url: "/roi-calculator", description: "Return on investment." },
  { name: "Unit Price Calculator", url: "/unit-price-calculator", description: "Unit price comparison." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Fashion Markup Calculator" keywords="fashion markup calculator, wholesale to retail, keystone pricing, MAP, MSRP, clothing margin, fashion pricing" breadcrumbs={[{ name: "Fashion Markup", url: "/fashion-markup-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Fashion Markup Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate wholesale to retail markup, keystone pricing, margins, and MSRP for fashion products.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Product Category</label>
          <select id="fm-cat" class="fm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="basic">Basic Apparel (2x-2.5x)</option>
            <option value="contemporary" selected>Contemporary (2.5x-3x)</option>
            <option value="designer">Designer / Luxury (3x-5x)</option>
            <option value="accessories">Accessories (3x-4x)</option>
            <option value="custom">Custom Markup</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Cost of Goods ($)</label><input type="number" id="fm-cost" class="fm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="25" min="0" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Wholesale Markup Multiplier</label><input type="number" id="fm-wmult" class="fm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="1" max="10" step="0.1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Retail Markup Multiplier</label><input type="number" id="fm-rmult" class="fm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2.5" min="1" max="10" step="0.1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">MAP Discount % (if any)</label><input type="number" id="fm-map" class="fm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" min="0" max="50" step="1"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Monthly Units Sold</label><input type="number" id="fm-units" class="fm-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="100" min="1" step="1"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recommended Retail Price (MSRP)</div>
          <div class="text-4xl font-extrabold font-mono" id="fm-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wholesale Price</div><div class="text-xl font-bold font-mono" id="fm-wholesale">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Gross Margin</div><div class="text-xl font-bold font-mono" id="fm-margin">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">MAP Price</div><div class="text-xl font-bold font-mono" id="fm-mapprice">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Profit / Unit</div><div class="text-xl font-bold font-mono" id="fm-profit">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Revenue</div><div class="text-xl font-bold font-mono" id="fm-revenue">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Profit</div><div class="text-xl font-bold font-mono" id="fm-monthprofit">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="fashion-markup" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcFM() {
      const cat = (document.getElementById('fm-cat') as HTMLSelectElement).value;
      const cost = parseFloat((document.getElementById('fm-cost') as HTMLInputElement).value) || 25;
      let wmult = parseFloat((document.getElementById('fm-wmult') as HTMLInputElement).value) || 2;
      let rmult = parseFloat((document.getElementById('fm-rmult') as HTMLInputElement).value) || 2.5;
      const mapDisc = parseFloat((document.getElementById('fm-map') as HTMLInputElement).value) || 0;
      const units = parseInt((document.getElementById('fm-units') as HTMLInputElement).value) || 100;

      // Category presets
      const catMult: Record<string, number[]> = {
        basic: [2, 2.2], contemporary: [2, 2.8],
        designer: [2.2, 4], accessories: [2.5, 3.5]
      };
      if (cat !== 'custom') {
        const m = catMult[cat] || [2, 2.5];
        wmult = m[0]; rmult = m[1];
        (document.getElementById('fm-wmult') as HTMLInputElement).value = wmult.toString();
        (document.getElementById('fm-rmult') as HTMLInputElement).value = rmult.toString();
      }

      const wholesale = cost * wmult;
      const retail = cost * rmult;
      const grossMargin = ((retail - cost) / retail * 100);
      const mapPrice = mapDisc > 0 ? retail * (1 - mapDisc / 100) : retail;
      const profitPerUnit = retail - cost;
      const monthlyRev = retail * units;
      const monthlyProfit = profitPerUnit * units;

      document.getElementById('fm-result')!.textContent = '$' + retail.toFixed(2);
      document.getElementById('fm-wholesale')!.textContent = '$' + wholesale.toFixed(2);
      document.getElementById('fm-margin')!.textContent = grossMargin.toFixed(1) + '%';
      document.getElementById('fm-mapprice')!.textContent = '$' + mapPrice.toFixed(2);
      document.getElementById('fm-profit')!.textContent = '$' + profitPerUnit.toFixed(2);
      document.getElementById('fm-revenue')!.textContent = '$' + monthlyRev.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0});
      document.getElementById('fm-monthprofit')!.textContent = '$' + monthlyProfit.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0});
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.fm-in').forEach(el => { el.addEventListener('input', calcFM); el.addEventListener('change', calcFM); });
      calcFM();
    }, 50);
  </script>
</CalculatorLayout>
