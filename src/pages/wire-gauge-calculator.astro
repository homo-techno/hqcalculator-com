---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Wire Gauge Calculator - AWG Size & Ampacity";
const description = "Calculate wire gauge size, resistance, ampacity, and voltage drop for electrical wiring projects.";
const relatedCalcs = [
  { name: "Ohm's Law", url: "/ohms-law-calculator", description: "Ohm's law." },
  { name: "Electricity Cost", url: "/electricity-cost-calculator", description: "Electricity." },
  { name: "LED Resistor", url: "/led-resistor-calculator", description: "LED." },
  { name: "Resistor Color Code", url: "/resistor-color-code-calculator", description: "Resistor." },
  { name: "Solar Panel", url: "/solar-panel-calculator", description: "Solar." },
  { name: "Length Converter", url: "/length-converter", description: "Length." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Wire Gauge Calculator" keywords="wire gauge calculator, AWG, wire size, ampacity, voltage drop, wire resistance" breadcrumbs={[{ name: "Wire Gauge", url: "/wire-gauge-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Wire Gauge Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate wire size, resistance, and voltage drop.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Wire Gauge (AWG)</label>
            <select id="wg-awg" class="wg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="14" selected>14 AWG</option>
              <option value="12">12 AWG</option>
              <option value="10">10 AWG</option>
              <option value="8">8 AWG</option>
              <option value="6">6 AWG</option>
              <option value="4">4 AWG</option>
              <option value="2">2 AWG</option>
              <option value="1">1 AWG</option>
              <option value="0">1/0 AWG</option>
              <option value="-1">2/0 AWG</option>
              <option value="-2">3/0 AWG</option>
              <option value="-3">4/0 AWG</option>
            </select>
          </div>
          <div><label class="block text-xs font-medium text-text mb-1">Wire Length (feet, one way)</label><input type="number" id="wg-len" class="wg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50" min="0" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Current (Amps)</label><input type="number" id="wg-amps" class="wg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="15" min="0" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Voltage (V)</label><input type="number" id="wg-volt" class="wg-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="120" min="0" step="1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Voltage Drop</div>
          <div class="text-5xl font-extrabold font-mono" id="wg-result">0 V</div>
          <div class="text-sm text-blue-200 mt-1" id="wg-pct">0%</div>
        </div>
        <div class="p-4 rounded-xl text-center" id="wg-status-box">
          <div class="font-bold text-sm" id="wg-status">-</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Resistance/1000ft</div><div class="text-xl font-bold font-mono" id="wg-res">0 Ω</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Ampacity (60°C)</div><div class="text-xl font-bold font-mono" id="wg-amp">0 A</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Diameter</div><div class="text-xl font-bold font-mono" id="wg-dia">0 mm</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Power Loss</div><div class="text-xl font-bold font-mono" id="wg-ploss">0 W</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wire Area</div><div class="text-xl font-bold font-mono" id="wg-area">0 mm²</div></div>
        </div>
      </div>
      <ShareButton calculatorId="wire-gauge" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    const AWG_DATA: Record<string, { res: number; amp: number; dia: number; area: number }> = {
      '14': { res: 2.525, amp: 15, dia: 1.628, area: 2.08 },
      '12': { res: 1.588, amp: 20, dia: 2.053, area: 3.31 },
      '10': { res: 0.999, amp: 30, dia: 2.588, area: 5.26 },
      '8': { res: 0.628, amp: 40, dia: 3.264, area: 8.37 },
      '6': { res: 0.395, amp: 55, dia: 4.115, area: 13.3 },
      '4': { res: 0.249, amp: 70, dia: 5.189, area: 21.2 },
      '2': { res: 0.156, amp: 95, dia: 6.544, area: 33.6 },
      '1': { res: 0.124, amp: 110, dia: 7.348, area: 42.4 },
      '0': { res: 0.098, amp: 125, dia: 8.251, area: 53.5 },
      '-1': { res: 0.078, amp: 145, dia: 9.266, area: 67.4 },
      '-2': { res: 0.062, amp: 165, dia: 10.405, area: 85.0 },
      '-3': { res: 0.049, amp: 195, dia: 11.684, area: 107.2 },
    };
    function calcWG() {
      const awg = (document.getElementById('wg-awg') as HTMLSelectElement).value;
      const len = parseFloat((document.getElementById('wg-len') as HTMLInputElement).value) || 0;
      const amps = parseFloat((document.getElementById('wg-amps') as HTMLInputElement).value) || 0;
      const voltage = parseFloat((document.getElementById('wg-volt') as HTMLInputElement).value) || 120;
      const data = AWG_DATA[awg];
      const totalRes = data.res * (len * 2) / 1000;
      const vDrop = amps * totalRes;
      const pctDrop = voltage > 0 ? (vDrop / voltage) * 100 : 0;
      const pLoss = amps * amps * totalRes;
      document.getElementById('wg-result')!.textContent = vDrop.toFixed(2) + ' V';
      document.getElementById('wg-pct')!.textContent = pctDrop.toFixed(1) + '% drop';
      document.getElementById('wg-res')!.textContent = data.res.toFixed(3) + ' Ω';
      document.getElementById('wg-amp')!.textContent = data.amp + ' A';
      document.getElementById('wg-dia')!.textContent = data.dia.toFixed(2) + ' mm';
      document.getElementById('wg-area')!.textContent = data.area.toFixed(1) + ' mm²';
      document.getElementById('wg-ploss')!.textContent = pLoss.toFixed(1) + ' W';
      let status: string, color: string;
      if (amps > data.amp) { status = 'OVER AMPACITY — use larger wire'; color = 'bg-red-50 text-red-800'; }
      else if (pctDrop > 5) { status = 'Voltage drop > 5% — consider larger wire'; color = 'bg-orange-50 text-orange-800'; }
      else if (pctDrop > 3) { status = 'Voltage drop 3-5% — acceptable for branch circuits'; color = 'bg-yellow-50 text-yellow-800'; }
      else { status = 'Good — within NEC voltage drop recommendations'; color = 'bg-green-50 text-green-800'; }
      document.getElementById('wg-status')!.textContent = status;
      document.getElementById('wg-status-box')!.className = `p-4 rounded-xl text-center ${color}`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.wg-in').forEach(el => { el.addEventListener('input', calcWG); el.addEventListener('change', calcWG); });
      calcWG();
    }, 50);
  </script>
</CalculatorLayout>
