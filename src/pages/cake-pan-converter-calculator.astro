---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Cake Pan Converter Calculator - Convert Between Pan Sizes & Shapes";
const description = "Convert cake recipes between different pan sizes and shapes. Calculate batter volume ratios for round, square, and rectangular pans.";
const relatedCalcs = [
  { name: "Frosting Calculator", url: "/frosting-calculator", description: "Calculate frosting quantities for cakes." },
  { name: "Cookie Batch Calculator", url: "/cookie-batch-calculator", description: "Scale cookie recipes by count and size." },
  { name: "Baking Conversion Calculator", url: "/baking-conversion-calculator", description: "Convert between baking measurement units." },
  { name: "Recipe Scaler", url: "/recipe-scaler", description: "Scale any recipe up or down." },
  { name: "Pie Crust Calculator", url: "/pie-crust-calculator", description: "Scale pie crust recipes." },
  { name: "Baking Altitude Calculator", url: "/baking-altitude-calculator", description: "Adjust recipes for altitude." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Cake Pan Converter" keywords="cake pan converter, pan size conversion, cake recipe scaling, round to square pan, batter volume, cake pan size" breadcrumbs={[{ name: "Cake Pan Converter", url: "/cake-pan-converter-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Cake Pan Converter Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert cake recipes between different pan sizes and shapes. Find the exact multiplier for your available pan.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <h3 class="font-bold text-text text-sm uppercase tracking-wide">Original Pan</h3>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Shape</label>
            <select id="cpc-shape1" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
              <option value="round">Round</option>
              <option value="square">Square</option>
              <option value="rect">Rectangular</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Height (in)</label>
            <input type="number" id="cpc-h1" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0.5" step="0.5">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Width / Diameter (in)</label>
            <input type="number" id="cpc-w1" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="9" min="1" step="0.5">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Length (in) - rect only</label>
            <input type="number" id="cpc-l1" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="13" min="1" step="0.5">
          </div>
        </div>
        <h3 class="font-bold text-text text-sm uppercase tracking-wide pt-2">New Pan</h3>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Shape</label>
            <select id="cpc-shape2" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
              <option value="round" selected>Round</option>
              <option value="square">Square</option>
              <option value="rect">Rectangular</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Height (in)</label>
            <input type="number" id="cpc-h2" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0.5" step="0.5">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Width / Diameter (in)</label>
            <input type="number" id="cpc-w2" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="1" step="0.5">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Length (in) - rect only</label>
            <input type="number" id="cpc-l2" class="cpc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="13" min="1" step="0.5">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recipe Multiplier</div>
          <div class="text-5xl font-extrabold font-mono" id="cpc-result">--</div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Original Volume</div>
            <div class="text-xl font-bold font-mono" id="cpc-vol1">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">New Volume</div>
            <div class="text-xl font-bold font-mono" id="cpc-vol2">--</div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Baking Time Adjustment</div>
          <div class="text-xl font-bold font-mono" id="cpc-time">--</div>
        </div>
      </div>
      <ShareButton calculatorId="cake-pan-converter" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcCPC() {
      const shape1 = (document.getElementById('cpc-shape1') as HTMLSelectElement).value;
      const shape2 = (document.getElementById('cpc-shape2') as HTMLSelectElement).value;
      const w1 = parseFloat((document.getElementById('cpc-w1') as HTMLInputElement).value) || 0;
      const l1 = parseFloat((document.getElementById('cpc-l1') as HTMLInputElement).value) || 0;
      const h1 = parseFloat((document.getElementById('cpc-h1') as HTMLInputElement).value) || 0;
      const w2 = parseFloat((document.getElementById('cpc-w2') as HTMLInputElement).value) || 0;
      const l2 = parseFloat((document.getElementById('cpc-l2') as HTMLInputElement).value) || 0;
      const h2 = parseFloat((document.getElementById('cpc-h2') as HTMLInputElement).value) || 0;

      function volume(shape: string, w: number, l: number, h: number): number {
        if (shape === 'round') return Math.PI * Math.pow(w / 2, 2) * h;
        if (shape === 'square') return w * w * h;
        return w * l * h; // rectangular
      }

      const vol1 = volume(shape1, w1, l1, h1);
      const vol2 = volume(shape2, w2, l2, h2);

      if (vol1 <= 0 || vol2 <= 0) {
        document.getElementById('cpc-result')!.textContent = 'Enter dimensions';
        return;
      }

      const multiplier = vol2 / vol1;

      document.getElementById('cpc-result')!.textContent = multiplier.toFixed(2) + 'x';
      document.getElementById('cpc-vol1')!.textContent = vol1.toFixed(1) + ' cu in';
      document.getElementById('cpc-vol2')!.textContent = vol2.toFixed(1) + ' cu in';

      // Baking time: thinner layers bake faster, thicker slower
      let timeAdj = '';
      if (multiplier < 0.7) timeAdj = 'Reduce time by 10-15 min, check early';
      else if (multiplier < 0.9) timeAdj = 'Reduce time by 5-10 min';
      else if (multiplier <= 1.1) timeAdj = 'Keep same baking time';
      else if (multiplier <= 1.4) timeAdj = 'Add 5-10 min, cover if browning';
      else timeAdj = 'Add 10-20 min, reduce temp 25\u00B0F';
      document.getElementById('cpc-time')!.textContent = timeAdj;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.cpc-in').forEach(el => { el.addEventListener('input', calcCPC); el.addEventListener('change', calcCPC); });
      calcCPC();
    }, 50);
  </script>
</CalculatorLayout>
