---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Picture Frame Calculator - Dimensions & Cost";
const description = "Calculate frame dimensions from image size and mat width, glass area, and material cost for custom picture framing.";
const relatedCalcs = [
  { name: "Area Calculator", url: "/area-calculator", description: "Area calculations." },
  { name: "Aspect Ratio", url: "/aspect-ratio-calculator", description: "Aspect ratios." },
  { name: "Square Footage", url: "/square-footage-calculator", description: "Square footage." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Budget planning." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
  { name: "Length Converter", url: "/length-converter", description: "Length conversion." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Picture Frame Calculator" keywords="picture frame calculator, frame dimensions, mat width, glass area, framing cost" breadcrumbs={[{ name: "Picture Frame", url: "/picture-frame-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Picture Frame Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate frame dimensions, glass area, and material costs from your image size and matting preferences.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Image Width (inches)</label><input type="number" id="pf-iw" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="1" step="0.25"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Image Height (inches)</label><input type="number" id="pf-ih" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="1" step="0.25"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Mat Width (inches)</label><input type="number" id="pf-mw" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0" max="6" step="0.25"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Frame Molding Width (inches)</label><input type="number" id="pf-fw" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1.5" min="0.5" max="6" step="0.25"></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Molding ($/ft)</label><input type="number" id="pf-mc" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Glass ($/sq ft)</label><input type="number" id="pf-gc" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="5" min="0" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Mat Board ($)</label><input type="number" id="pf-matc" class="pf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="0" step="0.5"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Overall Frame Size</div>
          <div class="text-4xl font-extrabold font-mono" id="pf-result">0 x 0 in</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Glass Size</div><div class="text-xl font-bold font-mono" id="pf-glass">0 x 0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Glass Area</div><div class="text-xl font-bold font-mono" id="pf-garea">0 sq ft</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Molding Length</div><div class="text-xl font-bold font-mono" id="pf-mold">0 ft</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Molding Cost</div><div class="text-xl font-bold font-mono" id="pf-cmold">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Glass Cost</div><div class="text-xl font-bold font-mono" id="pf-cglass">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Cost</div><div class="text-xl font-bold font-mono" id="pf-total">$0</div></div>
        </div>
      </div>
      <ShareButton calculatorId="picture-frame" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPF() {
      const iw = parseFloat((document.getElementById('pf-iw') as HTMLInputElement).value) || 8;
      const ih = parseFloat((document.getElementById('pf-ih') as HTMLInputElement).value) || 10;
      const mw = parseFloat((document.getElementById('pf-mw') as HTMLInputElement).value) || 0;
      const fw = parseFloat((document.getElementById('pf-fw') as HTMLInputElement).value) || 1.5;
      const mc = parseFloat((document.getElementById('pf-mc') as HTMLInputElement).value) || 0;
      const gc = parseFloat((document.getElementById('pf-gc') as HTMLInputElement).value) || 0;
      const matc = parseFloat((document.getElementById('pf-matc') as HTMLInputElement).value) || 0;

      // Glass/mat opening = image size (usually overlaps 0.25" on each side)
      const glassW = iw + 2 * mw;
      const glassH = ih + 2 * mw;
      const glassAreaSqFt = (glassW * glassH) / 144;

      // Overall frame outer dimensions
      const frameW = glassW + 2 * fw;
      const frameH = glassH + 2 * fw;

      // Molding: perimeter of the frame (with extra for mitered corners)
      const perimeterIn = 2 * (frameW + frameH);
      const moldingFt = (perimeterIn + 8) / 12; // 8 inches extra for waste/miters

      const moldCost = moldingFt * mc;
      const glassCost = glassAreaSqFt * gc;
      const matCost = mw > 0 ? matc : 0;
      const totalCost = moldCost + glassCost + matCost;

      document.getElementById('pf-result')!.textContent = frameW.toFixed(1) + ' x ' + frameH.toFixed(1) + ' in';
      document.getElementById('pf-glass')!.textContent = glassW.toFixed(1) + ' x ' + glassH.toFixed(1);
      document.getElementById('pf-garea')!.textContent = glassAreaSqFt.toFixed(2) + ' sq ft';
      document.getElementById('pf-mold')!.textContent = moldingFt.toFixed(1) + ' ft';
      document.getElementById('pf-cmold')!.textContent = '$' + moldCost.toFixed(2);
      document.getElementById('pf-cglass')!.textContent = '$' + glassCost.toFixed(2);
      document.getElementById('pf-total')!.textContent = '$' + totalCost.toFixed(2);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.pf-in').forEach(el => { el.addEventListener('input', calcPF); el.addEventListener('change', calcPF); });
      calcPF();
    }, 50);
  </script>
</CalculatorLayout>
