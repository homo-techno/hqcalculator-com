---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Clay Weight Calculator - How Much Clay for Pottery Forms";
const description = "Calculate the amount of clay needed for common pottery forms like bowls, mugs, plates, vases, and more based on dimensions and wall thickness.";
const relatedCalcs = [
  { name: "Clay Shrinkage Calculator", url: "/clay-shrinkage-calculator", description: "Predict clay shrinkage." },
  { name: "Pottery Wheel Speed Calculator", url: "/pottery-wheel-speed-calculator", description: "Optimal wheel RPM." },
  { name: "Pottery Pricing Calculator", url: "/pottery-pricing-calculator", description: "Price your pottery." },
  { name: "Kiln Temperature Calculator", url: "/kiln-temperature-calculator", description: "Firing schedules." },
  { name: "Slip Casting Calculator", url: "/slip-casting-calculator", description: "Slip casting volumes." },
  { name: "Kiln Shelf Calculator", url: "/kiln-shelf-calculator", description: "Kiln shelf arrangement." },
];
---
<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Clay Weight Calculator"
  keywords="clay weight, pottery clay amount, clay for mug, clay for bowl, clay for plate, clay for vase, wheel throwing clay, pottery clay calculator"
  breadcrumbs={[{ name: "Clay Weight Calculator", url: "/clay-weight-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Clay Weight Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Determine how much clay you need for common pottery forms based on finished dimensions and wall thickness.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Pottery Form</label>
        <select id="cw2-form" class="cw2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
          <option value="mug" selected>Mug / Cup</option>
          <option value="bowl">Bowl</option>
          <option value="plate">Plate / Platter</option>
          <option value="vase">Vase / Cylinder</option>
          <option value="teapot">Teapot (body only)</option>
          <option value="custom">Custom Dimensions</option>
        </select>
      </div>

      <div id="cw2-preset-dims" class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Size</label>
        <select id="cw2-size" class="cw2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
        </select>
      </div>

      <div id="cw2-custom-dims" class="hidden mb-5">
        <div class="grid grid-cols-3 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Diameter (in)</label>
            <input type="number" id="cw2-diam" class="cw2-in w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="1" max="24" step="0.25">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Height (in)</label>
            <input type="number" id="cw2-height" class="cw2-in w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="5" min="0.5" max="24" step="0.25">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Wall Thickness (in)</label>
            <input type="number" id="cw2-wall" class="cw2-in w-full px-3 py-3 border border-border rounded-xl text-lg font-bold" value="0.25" min="0.125" max="1" step="0.0625">
          </div>
        </div>
      </div>

      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Quantity</label>
        <input type="number" id="cw2-qty" class="cw2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="1" max="100" step="1">
      </div>

      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Extra for Trimming Waste (%)</label>
        <input type="number" id="cw2-waste" class="cw2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="15" min="0" max="50" step="5">
      </div>

      <!-- Primary Result -->
      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Clay Needed per Piece</div>
        <div class="text-4xl font-extrabold" id="cw2-weight">--</div>
        <div class="text-sm text-blue-200 mt-1">(including waste)</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Total for All Pieces</div>
          <div class="text-xl font-bold" id="cw2-total">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Clay (no waste)</div>
          <div class="text-xl font-bold" id="cw2-net">--</div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Dimensions</div>
          <div class="text-lg font-bold" id="cw2-dims">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">25lb Bags Needed</div>
          <div class="text-xl font-bold" id="cw2-bags">--</div>
        </div>
      </div>

      <ShareButton calculatorId="clay-weight" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How Much Clay Do You Need?</h2>
      <p>The amount of clay needed depends on the form type, dimensions, wall thickness, and how much you trim. Beginners should add 15-25% extra for trimming waste, while experienced potters may only need 10-15%.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Common Clay Weights</h3>
      <ul>
        <li><strong>Mug:</strong> 1.0-1.5 lbs of clay</li>
        <li><strong>Bowl:</strong> 1.5-3.0 lbs depending on size</li>
        <li><strong>Dinner plate:</strong> 2.0-3.0 lbs</li>
        <li><strong>Vase (medium):</strong> 3.0-5.0 lbs</li>
        <li><strong>Teapot body:</strong> 2.5-4.0 lbs (plus lid and spout)</li>
      </ul>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcCW2() {
      const form = (document.getElementById('cw2-form') as HTMLSelectElement).value;
      const size = (document.getElementById('cw2-size') as HTMLSelectElement).value;
      const qty = parseInt((document.getElementById('cw2-qty') as HTMLInputElement).value) || 1;
      const wastePct = (parseFloat((document.getElementById('cw2-waste') as HTMLInputElement).value) || 0) / 100;

      document.getElementById('cw2-custom-dims')!.classList.toggle('hidden', form !== 'custom');
      document.getElementById('cw2-preset-dims')!.classList.toggle('hidden', form === 'custom');

      // Preset dimensions: {diameter, height, wall} in inches
      const presets: Record<string, Record<string, {d: number, h: number, w: number}>> = {
        mug: {
          small: { d: 3, h: 3.5, w: 0.25 },
          medium: { d: 3.5, h: 4.5, w: 0.25 },
          large: { d: 4, h: 5, w: 0.3125 }
        },
        bowl: {
          small: { d: 5, h: 2.5, w: 0.25 },
          medium: { d: 7, h: 3.5, w: 0.3125 },
          large: { d: 10, h: 4.5, w: 0.375 }
        },
        plate: {
          small: { d: 7, h: 1, w: 0.3125 },
          medium: { d: 10, h: 1.25, w: 0.375 },
          large: { d: 12, h: 1.5, w: 0.375 }
        },
        vase: {
          small: { d: 4, h: 6, w: 0.25 },
          medium: { d: 5, h: 9, w: 0.3125 },
          large: { d: 7, h: 12, w: 0.375 }
        },
        teapot: {
          small: { d: 4, h: 4, w: 0.25 },
          medium: { d: 5, h: 5, w: 0.3125 },
          large: { d: 6, h: 6, w: 0.375 }
        }
      };

      let d, h, w;
      if (form === 'custom') {
        d = parseFloat((document.getElementById('cw2-diam') as HTMLInputElement).value) || 4;
        h = parseFloat((document.getElementById('cw2-height') as HTMLInputElement).value) || 5;
        w = parseFloat((document.getElementById('cw2-wall') as HTMLInputElement).value) || 0.25;
      } else {
        const dims = (presets[form] || presets['mug'])[size] || presets['mug']['medium'];
        d = dims.d; h = dims.h; w = dims.w;
      }

      // Calculate volume of clay in the form (hollow cylinder + bottom disc)
      const outerR = d / 2;
      const innerR = outerR - w;
      const wallVolume = Math.PI * (outerR * outerR - innerR * innerR) * h; // cylinder walls
      const bottomVolume = Math.PI * outerR * outerR * w; // bottom
      const totalVolCuIn = wallVolume + bottomVolume;

      // Wet clay density: approximately 0.065 lbs per cubic inch (1.8 g/cm3)
      const clayDensity = 0.065;
      const netWeight = totalVolCuIn * clayDensity;
      const withWaste = netWeight * (1 + wastePct);

      // Convert to useful units
      const weightOz = withWaste * 16;
      const weightLbs = withWaste;

      let displayWeight = '';
      if (weightLbs >= 1) {
        displayWeight = weightLbs.toFixed(2) + ' lbs';
      } else {
        displayWeight = weightOz.toFixed(1) + ' oz';
      }

      document.getElementById('cw2-weight')!.textContent = displayWeight;

      const totalAll = withWaste * qty;
      document.getElementById('cw2-total')!.textContent = totalAll.toFixed(2) + ' lbs';
      document.getElementById('cw2-net')!.textContent = netWeight.toFixed(2) + ' lbs';
      document.getElementById('cw2-dims')!.textContent = d + '" x ' + h + '"h';
      document.getElementById('cw2-bags')!.textContent = Math.ceil(totalAll / 25) + ' bag' + (Math.ceil(totalAll / 25) > 1 ? 's' : '');

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.cw2-in').forEach(el => {
        el.addEventListener('input', calcCW2);
        el.addEventListener('change', calcCW2);
      });
      calcCW2();
    }, 50);
  </script>
</CalculatorLayout>
