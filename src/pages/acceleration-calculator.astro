---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Acceleration Calculator - Find Acceleration, Velocity & Distance";
const description = "Calculate acceleration, velocity, distance, or time using kinematic equations. Supports all SUVAT formulas.";
const relatedCalcs = [
  { name: "Wavelength Calculator", url: "/wavelength-calculator", description: "Waves." },
  { name: "Ohm's Law", url: "/ohms-law-calculator", description: "Electrical." },
  { name: "Scientific Calculator", url: "/scientific-calculator", description: "Scientific math." },
  { name: "Pythagorean Theorem", url: "/pythagorean-theorem-calculator", description: "Right triangles." },
  { name: "Slope Calculator", url: "/slope-calculator", description: "Slope." },
  { name: "Half-Life Calculator", url: "/half-life-calculator", description: "Decay." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Acceleration Calculator" keywords="acceleration calculator, velocity calculator, kinematics, SUVAT equations, physics calculator" breadcrumbs={[{ name: "Acceleration Calculator", url: "/acceleration-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Acceleration Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Enter known values to solve for acceleration, velocity, distance, or time.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Solve For</label>
          <select id="ac-solve" class="w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="acceleration" selected>Acceleration (a)</option>
            <option value="final-velocity">Final Velocity (v)</option>
            <option value="initial-velocity">Initial Velocity (u)</option>
            <option value="distance">Distance (s)</option>
            <option value="time">Time (t)</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3" id="ac-fields">
          <div id="ac-u-wrap"><label class="block text-xs font-medium text-text mb-1">Initial Velocity (u) m/s</label><input type="number" id="ac-u" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" step="0.1"></div>
          <div id="ac-v-wrap"><label class="block text-xs font-medium text-text mb-1">Final Velocity (v) m/s</label><input type="number" id="ac-v" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" step="0.1"></div>
          <div id="ac-t-wrap"><label class="block text-xs font-medium text-text mb-1">Time (t) seconds</label><input type="number" id="ac-t" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0" step="0.1"></div>
          <div id="ac-s-wrap"><label class="block text-xs font-medium text-text mb-1">Distance (s) meters</label><input type="number" id="ac-s" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" placeholder="Optional" min="0" step="0.1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1" id="ac-label">Acceleration</div>
          <div class="text-5xl font-extrabold font-mono" id="ac-result">0</div>
          <div class="text-sm text-blue-200 mt-1" id="ac-unit">m/s²</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Acceleration</div><div class="text-xl font-bold" id="ac-ra">0 m/s²</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Distance</div><div class="text-xl font-bold" id="ac-rs">0 m</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Avg. Speed</div><div class="text-xl font-bold" id="ac-avg">0 m/s</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">In g-force</div><div class="text-xl font-bold" id="ac-g">0 g</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Step-by-Step</h3>
          <div class="font-mono text-sm space-y-1" id="ac-steps"></div>
        </div>
      </div>
      <ShareButton calculatorId="acceleration" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Kinematic Equations (SUVAT)</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p>v = u + at</p>
        <p>s = ut + ½at²</p>
        <p>v² = u² + 2as</p>
        <p>s = ½(u + v)t</p>
      </div>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcAcc() {
      const solve = (document.getElementById('ac-solve') as HTMLSelectElement).value;
      const u = parseFloat((document.getElementById('ac-u') as HTMLInputElement).value) || 0;
      const v = parseFloat((document.getElementById('ac-v') as HTMLInputElement).value) || 0;
      const t = parseFloat((document.getElementById('ac-t') as HTMLInputElement).value) || 0;
      const sIn = (document.getElementById('ac-s') as HTMLInputElement).value;
      const s = sIn ? parseFloat(sIn) || 0 : NaN;
      let a: number, dist: number, resultVal: number;
      const steps: string[] = [];
      if (solve === 'acceleration') {
        if (t > 0) {
          a = (v - u) / t;
          steps.push(`a = (v − u) / t`, `a = (${v} − ${u}) / ${t}`, `a = ${a.toFixed(6)} m/s²`);
        } else if (!isNaN(s) && s > 0) {
          a = (v*v - u*u) / (2 * s);
          steps.push(`v² = u² + 2as → a = (v²−u²)/(2s)`, `a = (${v}²−${u}²)/(2×${s})`, `a = ${a.toFixed(6)} m/s²`);
        } else { a = 0; }
        dist = !isNaN(s) ? s : u * t + 0.5 * a * t * t;
        resultVal = a;
        document.getElementById('ac-label')!.textContent = 'Acceleration';
        document.getElementById('ac-unit')!.textContent = 'm/s²';
      } else if (solve === 'final-velocity') {
        a = t > 0 ? (v - u) / t : 0; // fallback
        const finalV = u + (parseFloat((document.getElementById('ac-s') as HTMLInputElement).value || '0') > 0 && t === 0
          ? Math.sqrt(u*u + 2 * a * parseFloat(sIn || '0'))
          : u + a * t);
        // Simpler: just use v = u + at
        a = parseFloat((document.getElementById('ac-s') as HTMLInputElement).value || '0') || 0; // use s field as 'a' for this mode
        const fv = u + a * t;
        steps.push(`v = u + at`, `v = ${u} + ${a} × ${t}`, `v = ${fv.toFixed(6)} m/s`);
        dist = u * t + 0.5 * a * t * t;
        resultVal = fv;
        document.getElementById('ac-label')!.textContent = 'Final Velocity';
        document.getElementById('ac-unit')!.textContent = 'm/s';
      } else if (solve === 'time') {
        a = !isNaN(s) ? s : 0; // reuse field
        const time = a !== 0 ? (v - u) / a : 0;
        steps.push(`t = (v − u) / a`, `t = (${v} − ${u}) / ${a}`, `t = ${time.toFixed(6)} s`);
        dist = u * time + 0.5 * a * time * time;
        resultVal = time;
        document.getElementById('ac-label')!.textContent = 'Time';
        document.getElementById('ac-unit')!.textContent = 'seconds';
      } else {
        a = t > 0 ? (v - u) / t : 0;
        dist = u * t + 0.5 * a * t * t;
        steps.push(`s = ut + ½at²`, `s = ${u}×${t} + ½×${a.toFixed(4)}×${t}²`, `s = ${dist.toFixed(6)} m`);
        resultVal = dist;
        document.getElementById('ac-label')!.textContent = 'Distance';
        document.getElementById('ac-unit')!.textContent = 'meters';
      }
      if (solve === 'acceleration' || solve === 'distance') {
        a = solve === 'acceleration' ? resultVal : (t > 0 ? (v-u)/t : 0);
      }
      document.getElementById('ac-result')!.textContent = resultVal.toFixed(4);
      document.getElementById('ac-ra')!.textContent = (solve === 'acceleration' ? resultVal : (t > 0 ? ((v-u)/t) : 0)).toFixed(4) + ' m/s²';
      document.getElementById('ac-rs')!.textContent = (solve === 'distance' ? resultVal : (u*t + 0.5*((v-u)/t)*t*t)).toFixed(4) + ' m';
      const avgSpd = t > 0 ? (u + v) / 2 : 0;
      document.getElementById('ac-avg')!.textContent = avgSpd.toFixed(4) + ' m/s';
      const gForce = (solve === 'acceleration' ? resultVal : (t > 0 ? (v-u)/t : 0)) / 9.80665;
      document.getElementById('ac-g')!.textContent = gForce.toFixed(4) + ' g';
      document.getElementById('ac-steps')!.innerHTML = steps.map(s => `<div>${s}</div>`).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ac-in').forEach(el => el.addEventListener('input', calcAcc));
      document.getElementById('ac-solve')!.addEventListener('change', calcAcc);
      calcAcc();
    }, 50);
  </script>
</CalculatorLayout>
