---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Pet Cost Calculator - Annual & Lifetime Ownership Cost by Species";
const description = "Calculate the total annual cost of pet ownership including food, vet care, grooming, insurance, and supplies. Get lifetime cost estimates by species.";
const relatedCalcs = [
  { name: "Dog Food Calculator", url: "/dog-food-calculator", description: "Daily food portions for dogs." },
  { name: "Cat Food Calculator", url: "/cat-food-calculator", description: "Daily calories for cats." },
  { name: "Pet Insurance Calculator", url: "/pet-insurance-calculator", description: "Estimate insurance premiums." },
  { name: "Pet Medication Calculator", url: "/pet-medication-calculator", description: "Medication dosage calculator." },
  { name: "Flea Treatment Calculator", url: "/flea-treatment-calculator", description: "Flea treatment costs." },
  { name: "Dog BMI Calculator", url: "/dog-bmi-calculator", description: "Body condition score for dogs." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Pet Cost Calculator" keywords="pet cost calculator, annual pet cost, lifetime pet cost, dog ownership cost, cat cost, pet budget" breadcrumbs={[{ name: "Pet Cost", url: "/pet-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Pet Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate annual and lifetime pet ownership costs including food, veterinary care, grooming, insurance, and supplies.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Pet Species</label>
            <select id="pc-species" class="pc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="dog_small">Dog (small)</option>
              <option value="dog_medium" selected>Dog (medium)</option>
              <option value="dog_large">Dog (large)</option>
              <option value="cat">Cat</option>
              <option value="rabbit">Rabbit</option>
              <option value="bird_small">Bird (small)</option>
              <option value="bird_large">Bird (large parrot)</option>
              <option value="fish">Fish (aquarium)</option>
              <option value="reptile">Reptile</option>
              <option value="hamster">Hamster / Guinea Pig</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Pet Age (years)</label>
            <input type="number" id="pc-age" class="pc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0" max="30" step="1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Food Quality</label>
            <select id="pc-food" class="pc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="budget">Budget</option>
              <option value="standard" selected>Standard</option>
              <option value="premium">Premium</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Include Insurance?</label>
            <select id="pc-insurance" class="pc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="no" selected>No</option>
              <option value="basic">Basic Coverage</option>
              <option value="comprehensive">Comprehensive</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Grooming Needs</label>
            <select id="pc-groom" class="pc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="none">None / DIY</option>
              <option value="basic" selected>Basic</option>
              <option value="professional">Professional</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Location Cost Factor</label>
            <select id="pc-location" class="pc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="low">Low Cost Area</option>
              <option value="average" selected>Average</option>
              <option value="high">High Cost (urban)</option>
            </select>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Annual Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="pc-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Food / Year</div><div class="text-xl font-bold font-mono" id="pc-foodcost">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Vet / Year</div><div class="text-xl font-bold font-mono" id="pc-vet">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Grooming / Year</div><div class="text-xl font-bold font-mono" id="pc-groomcost">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Insurance / Year</div><div class="text-xl font-bold font-mono" id="pc-ins">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Supplies / Year</div><div class="text-xl font-bold font-mono" id="pc-supplies">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Cost</div><div class="text-xl font-bold font-mono" id="pc-monthly">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Lifetime Cost</div><div class="text-xl font-bold font-mono" id="pc-lifetime">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">First-Year Cost</div><div class="text-xl font-bold font-mono" id="pc-firstyr">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="pet-cost" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPC() {
      const species = (document.getElementById('pc-species') as HTMLSelectElement).value;
      const age = parseInt((document.getElementById('pc-age') as HTMLInputElement).value) || 0;
      const foodQuality = (document.getElementById('pc-food') as HTMLSelectElement).value;
      const insurance = (document.getElementById('pc-insurance') as HTMLSelectElement).value;
      const groom = (document.getElementById('pc-groom') as HTMLSelectElement).value;
      const location = (document.getElementById('pc-location') as HTMLSelectElement).value;

      // Base annual costs by species
      const baseCosts: Record<string, { food: number; vet: number; supplies: number; lifespan: number; firstYrExtra: number }> = {
        dog_small:  { food: 400, vet: 500, supplies: 200, lifespan: 14, firstYrExtra: 800 },
        dog_medium: { food: 600, vet: 600, supplies: 250, lifespan: 12, firstYrExtra: 900 },
        dog_large:  { food: 900, vet: 700, supplies: 300, lifespan: 10, firstYrExtra: 1000 },
        cat:        { food: 350, vet: 400, supplies: 200, lifespan: 15, firstYrExtra: 700 },
        rabbit:     { food: 250, vet: 300, supplies: 150, lifespan: 10, firstYrExtra: 400 },
        bird_small: { food: 150, vet: 200, supplies: 100, lifespan: 10, firstYrExtra: 350 },
        bird_large: { food: 400, vet: 400, supplies: 300, lifespan: 40, firstYrExtra: 2000 },
        fish:       { food: 60, vet: 0, supplies: 200, lifespan: 5, firstYrExtra: 500 },
        reptile:    { food: 200, vet: 200, supplies: 150, lifespan: 15, firstYrExtra: 600 },
        hamster:    { food: 120, vet: 150, supplies: 100, lifespan: 3, firstYrExtra: 300 },
      };

      const base = baseCosts[species] || baseCosts['dog_medium'];

      // Food quality multiplier
      const foodMult: Record<string, number> = { budget: 0.7, standard: 1.0, premium: 1.6 };
      const foodCost = base.food * (foodMult[foodQuality] || 1.0);

      // Vet costs increase with age
      const ageMult = age > (base.lifespan * 0.7) ? 1.5 : 1.0;
      const vetCost = base.vet * ageMult;

      // Grooming
      const groomCosts: Record<string, number> = { none: 0, basic: 200, professional: 600 };
      let groomCost = groomCosts[groom] || 0;
      // No grooming for fish, reptiles, etc.
      if (['fish', 'reptile', 'hamster', 'bird_small', 'bird_large'].includes(species)) groomCost = 0;

      // Insurance
      let insCost = 0;
      if (insurance === 'basic') {
        const insBase: Record<string, number> = {
          dog_small: 360, dog_medium: 480, dog_large: 600, cat: 300, rabbit: 180, bird_small: 0, bird_large: 0, fish: 0, reptile: 0, hamster: 0
        };
        insCost = insBase[species] || 0;
      } else if (insurance === 'comprehensive') {
        const insBase: Record<string, number> = {
          dog_small: 600, dog_medium: 780, dog_large: 960, cat: 500, rabbit: 300, bird_small: 0, bird_large: 0, fish: 0, reptile: 0, hamster: 0
        };
        insCost = insBase[species] || 0;
      }

      // Location multiplier
      const locMult: Record<string, number> = { low: 0.8, average: 1.0, high: 1.35 };
      const locFactor = locMult[location] || 1.0;

      const suppliesCost = base.supplies;
      const annualTotal = (foodCost + vetCost + groomCost + insCost + suppliesCost) * locFactor;
      const monthlyCost = annualTotal / 12;

      // Lifetime cost
      const remaining = Math.max(1, base.lifespan - age);
      const lifetimeCost = annualTotal * remaining;

      // First year adds adoption/purchase, spay/neuter, initial supplies
      const firstYearCost = annualTotal + base.firstYrExtra * locFactor;

      document.getElementById('pc-result')!.textContent = '$' + Math.round(annualTotal).toLocaleString();
      document.getElementById('pc-foodcost')!.textContent = '$' + Math.round(foodCost * locFactor);
      document.getElementById('pc-vet')!.textContent = '$' + Math.round(vetCost * locFactor);
      document.getElementById('pc-groomcost')!.textContent = '$' + Math.round(groomCost * locFactor);
      document.getElementById('pc-ins')!.textContent = '$' + Math.round(insCost * locFactor);
      document.getElementById('pc-supplies')!.textContent = '$' + Math.round(suppliesCost * locFactor);
      document.getElementById('pc-monthly')!.textContent = '$' + Math.round(monthlyCost);
      document.getElementById('pc-lifetime')!.textContent = '$' + Math.round(lifetimeCost).toLocaleString();
      document.getElementById('pc-firstyr')!.textContent = '$' + Math.round(firstYearCost).toLocaleString();
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.pc-in').forEach(el => { el.addEventListener('input', calcPC); el.addEventListener('change', calcPC); });
      calcPC();
    }, 50);
  </script>
</CalculatorLayout>
