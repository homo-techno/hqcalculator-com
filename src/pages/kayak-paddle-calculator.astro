---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Kayak Paddle Calculator";
const description = "Calculate ideal paddle length from your height and kayak width, with blade size and feather angle recommendations.";
const relatedCalcs = [
  { name: "Calories Burned", url: "/calories-burned-calculator", description: "Activity calories." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Speed Calculator", url: "/speed-calculator", description: "Speed conversions." },
  { name: "Heart Rate", url: "/heart-rate-calculator", description: "Heart rate zones." },
  { name: "Body Fat", url: "/body-fat-calculator", description: "Body fat %." },
  { name: "Water Intake", url: "/water-intake-calculator", description: "Hydration needs." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Kayak Paddle Calculator" keywords="kayak paddle calculator, paddle length, blade size, feather angle, kayak sizing, paddle recommendation" breadcrumbs={[{ name: "Kayak Paddle", url: "/kayak-paddle-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Kayak Paddle Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the right paddle length based on your height, kayak width, and paddling style.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Your Height</label><input type="number" id="kp-height" class="kp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="48" max="84" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Height Unit</label>
            <select id="kp-hunit" class="kp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="in" selected>Inches</option>
              <option value="cm">Centimeters</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Kayak Width (inches)</label><input type="number" id="kp-width" class="kp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="18" max="40" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Torso Length (inches)</label><input type="number" id="kp-torso" class="kp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="20" max="40" step="0.5"></div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Kayak Type</label>
          <select id="kp-type" class="kp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="touring" selected>Touring / Sea Kayak</option>
            <option value="rec">Recreational</option>
            <option value="whitewater">Whitewater</option>
            <option value="fishing">Fishing Kayak</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Paddling Style</label>
          <select id="kp-style" class="kp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="low">Low Angle (relaxed, touring)</option>
            <option value="high">High Angle (aggressive, performance)</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recommended Paddle Length</div>
          <div class="text-5xl font-extrabold font-mono" id="kp-length">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Blade Size</div><div class="text-xl font-bold" id="kp-blade">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Feather Angle</div><div class="text-xl font-bold font-mono" id="kp-feather">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Shaft Type</div><div class="text-xl font-bold" id="kp-shaft">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Paddle Size Chart</h3>
          <div class="text-xs space-y-1" id="kp-chart"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Tips</h3>
          <ul class="text-xs space-y-1 text-text-secondary list-disc list-inside" id="kp-tips"></ul>
        </div>
      </div>
      <ShareButton calculatorId="kayak-paddle" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcKP() {
      let height = parseFloat((document.getElementById('kp-height') as HTMLInputElement).value) || 0;
      const hUnit = (document.getElementById('kp-hunit') as HTMLSelectElement).value;
      const kayakWidth = parseFloat((document.getElementById('kp-width') as HTMLInputElement).value) || 0;
      const torso = parseFloat((document.getElementById('kp-torso') as HTMLInputElement).value) || 0;
      const kayakType = (document.getElementById('kp-type') as HTMLSelectElement).value;
      const style = (document.getElementById('kp-style') as HTMLSelectElement).value;
      if (height <= 0) return;
      let heightIn = hUnit === 'cm' ? height / 2.54 : height;
      let baseLengthCm = 220;
      if (heightIn < 60) baseLengthCm = 210;
      else if (heightIn < 64) baseLengthCm = 215;
      else if (heightIn < 68) baseLengthCm = 220;
      else if (heightIn < 72) baseLengthCm = 225;
      else if (heightIn < 76) baseLengthCm = 230;
      else baseLengthCm = 240;
      if (kayakWidth > 0) {
        if (kayakWidth > 32) baseLengthCm += 10;
        else if (kayakWidth > 28) baseLengthCm += 5;
        else if (kayakWidth < 23) baseLengthCm -= 5;
      }
      if (torso > 0) {
        if (torso > 30) baseLengthCm += 5;
        else if (torso < 24) baseLengthCm -= 5;
      }
      if (style === 'high') baseLengthCm -= 10;
      if (kayakType === 'whitewater') baseLengthCm -= 15;
      else if (kayakType === 'rec') baseLengthCm += 5;
      else if (kayakType === 'fishing') baseLengthCm += 10;
      const roundedCm = Math.round(baseLengthCm / 5) * 5;
      let bladeSize = 'Medium';
      let shaftType = 'Straight';
      let featherAngle = '0-15\u00B0';
      if (style === 'high') {
        bladeSize = 'Wide (short, wide blade)';
        featherAngle = '30-45\u00B0';
        shaftType = 'Bent shaft recommended';
      } else {
        bladeSize = 'Narrow (long, narrow blade)';
        featherAngle = '0-15\u00B0';
        shaftType = 'Straight or bent';
      }
      if (kayakType === 'whitewater') {
        bladeSize = 'Wide (short, aggressive)';
        featherAngle = '30-45\u00B0';
      }
      document.getElementById('kp-length')!.textContent = roundedCm + ' cm';
      document.getElementById('kp-blade')!.textContent = bladeSize;
      document.getElementById('kp-feather')!.textContent = featherAngle;
      document.getElementById('kp-shaft')!.textContent = shaftType;
      const sizeChart = [
        { height: 'Under 5\'0"', low: '210 cm', high: '200 cm' },
        { height: '5\'0" - 5\'4"', low: '215 cm', high: '205 cm' },
        { height: '5\'4" - 5\'8"', low: '220 cm', high: '210 cm' },
        { height: '5\'8" - 6\'0"', low: '225 cm', high: '215 cm' },
        { height: '6\'0" - 6\'4"', low: '230 cm', high: '220 cm' },
        { height: 'Over 6\'4"', low: '240 cm', high: '230 cm' },
      ];
      document.getElementById('kp-chart')!.innerHTML =
        '<div class="flex justify-between font-semibold text-text-muted mb-1"><span>Height</span><span>Low Angle</span><span>High Angle</span></div>' +
        sizeChart.map(r => `<div class="flex justify-between"><span>${r.height}</span><span class="font-mono">${r.low}</span><span class="font-mono">${r.high}</span></div>`).join('');
      const tips: string[] = [];
      tips.push('Sit upright and measure your torso from seat to nose for accurate torso length.');
      if (style === 'low') tips.push('Low angle paddling is less fatiguing for long distances. Keep paddle shaft nearly horizontal.');
      else tips.push('High angle paddling provides more power. Blade enters water closer to the kayak.');
      if (kayakType === 'whitewater') tips.push('Whitewater paddles are shorter for quick, powerful strokes in rapids.');
      tips.push('If between sizes, shorter is better for narrow kayaks and high-angle, longer for wide kayaks.');
      tips.push('Bent shaft paddles reduce wrist strain on long trips.');
      document.getElementById('kp-tips')!.innerHTML = tips.map(t => `<li>${t}</li>`).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('kp-height') as HTMLInputElement).value = '70';
      (document.getElementById('kp-width') as HTMLInputElement).value = '24';
      (document.getElementById('kp-torso') as HTMLInputElement).value = '27';
      document.querySelectorAll('.kp-in').forEach(el => { el.addEventListener('input', calcKP); el.addEventListener('change', calcKP); });
      calcKP();
    }, 50);
  </script>
</CalculatorLayout>
