---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Bartender Calculator - Drinks, Ice & Supplies for Bar Service";
const description = "Calculate drink quantities, ice, cups, mixers, and garnishes needed for bar service based on guest count and event duration.";
const relatedCalcs = [
  { name: "Catering Quantity Calculator", url: "/catering-quantity-calculator", description: "Food portions per guest." },
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Event Staffing Calculator", url: "/event-staffing-calculator", description: "Staff needed for events." },
  { name: "Party Supplies Calculator", url: "/party-supplies-calculator", description: "Plates, cups, napkins." },
  { name: "Cake Serving Calculator", url: "/cake-serving-calculator", description: "Cake size by guests." },
  { name: "Event Parking Calculator", url: "/event-parking-calculator", description: "Parking space planning." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Bartender Calculator"
  keywords="bartender calculator, drink calculator, bar service, event drinks, party bar planning, ice calculator"
  breadcrumbs={[{ name: "Bartender", url: "/bartender-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Bartender Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Plan your bar service with exact quantities of drinks, ice, cups, and mixers.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Guests</label>
          <input type="number" id="bar-guests" class="bar-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="100" min="1" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Bar Service Duration (hours)</label>
          <input type="number" id="bar-hours" class="bar-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="1" max="10" step="0.5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Bar Type</label>
          <select id="bar-type" class="bar-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="full">Full Open Bar (beer, wine, liquor)</option>
            <option value="beerWine">Beer & Wine Only</option>
            <option value="limited">Limited Bar (signature cocktails + beer/wine)</option>
            <option value="nonalc">Non-Alcoholic Only</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Drinking Level</label>
          <select id="bar-level" class="bar-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="light">Light (1 drink/hr)</option>
            <option value="moderate" selected>Moderate (1.5 drinks/hr)</option>
            <option value="heavy">Heavy (2 drinks/hr)</option>
          </select>
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Drinks Needed</div>
        <div class="text-5xl font-extrabold" id="bar-total">--</div>
        <div class="text-sm mt-1" id="bar-perguest">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Lbs of Ice</div>
          <div class="text-xl font-bold" id="bar-ice">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Cups / Glasses</div>
          <div class="text-xl font-bold" id="bar-cups">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Bartenders Needed</div>
          <div class="text-xl font-bold" id="bar-bartenders">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Napkins</div>
          <div class="text-xl font-bold" id="bar-napkins">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="bar-details"></div>

      <ShareButton calculatorId="bartender" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Bar Service Planning Guide</h2>
      <p>The standard rule is 2 drinks per person for the first hour and 1 drink per hour after that. Plan 1 lb of ice per guest for drinks plus 0.5 lbs per guest for chilling bottles. One bartender can handle 50-75 guests.</p>
      <h3 class="text-xl font-semibold text-text mt-6">Bottle Estimates</h3>
      <ul>
        <li><strong>Wine:</strong> 5 glasses per 750ml bottle</li>
        <li><strong>Beer:</strong> 1 per serving (12oz can/bottle)</li>
        <li><strong>Liquor:</strong> 16-20 cocktails per 750ml bottle</li>
        <li><strong>Mixers:</strong> 1 liter per 4-5 cocktails</li>
      </ul>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcBAR() {
      const guests = parseInt((document.getElementById('bar-guests') as HTMLInputElement).value) || 1;
      const hours = parseFloat((document.getElementById('bar-hours') as HTMLInputElement).value) || 4;
      const barType = (document.getElementById('bar-type') as HTMLSelectElement).value;
      const level = (document.getElementById('bar-level') as HTMLSelectElement).value;

      let drinksPerHr = 1.5;
      if (level === 'light') drinksPerHr = 1;
      else if (level === 'heavy') drinksPerHr = 2;

      const totalDrinksPerGuest = 2 + Math.max(0, hours - 1) * drinksPerHr;
      const totalDrinks = Math.ceil(totalDrinksPerGuest * guests);

      const iceLbs = Math.ceil(guests * 1.5);
      const cups = Math.ceil(totalDrinks * 1.2);
      const bartenders = Math.max(1, Math.ceil(guests / 60));
      const napkins = Math.ceil(totalDrinks * 1.5);

      document.getElementById('bar-total')!.textContent = totalDrinks.toLocaleString();
      document.getElementById('bar-perguest')!.textContent = totalDrinksPerGuest.toFixed(1) + ' drinks per guest';
      document.getElementById('bar-ice')!.textContent = iceLbs.toLocaleString();
      document.getElementById('bar-cups')!.textContent = cups.toLocaleString();
      document.getElementById('bar-bartenders')!.textContent = bartenders.toString();
      document.getElementById('bar-napkins')!.textContent = napkins.toLocaleString();

      let details = '<h3 class="font-semibold text-sm text-text mb-2">Supply Breakdown</h3><ul class="text-sm text-text-secondary space-y-1">';

      if (barType === 'full' || barType === 'limited') {
        const liquorDrinks = Math.ceil(totalDrinks * 0.35);
        const wineDrinks = Math.ceil(totalDrinks * 0.30);
        const beerDrinks = Math.ceil(totalDrinks * 0.25);
        const nonAlcDrinks = totalDrinks - liquorDrinks - wineDrinks - beerDrinks;

        const liquorBottles = Math.ceil(liquorDrinks / 17);
        const wineBottles = Math.ceil(wineDrinks / 5);
        const beerUnits = beerDrinks;
        const mixerLiters = Math.ceil(liquorDrinks / 4);

        details += '<li>Liquor: ' + liquorBottles + ' bottles (750ml) - ' + liquorDrinks + ' cocktails</li>';
        details += '<li>Wine: ' + wineBottles + ' bottles - ' + wineDrinks + ' glasses</li>';
        details += '<li>Beer: ' + beerUnits + ' cans/bottles</li>';
        details += '<li>Mixers: ' + mixerLiters + ' liters (soda, tonic, juice)</li>';
        details += '<li>Non-alcoholic: ' + nonAlcDrinks + ' drinks (water, soda, mocktails)</li>';
      } else if (barType === 'beerWine') {
        const wineDrinks = Math.ceil(totalDrinks * 0.50);
        const beerDrinks = Math.ceil(totalDrinks * 0.35);
        const nonAlcDrinks = totalDrinks - wineDrinks - beerDrinks;
        details += '<li>Wine: ' + Math.ceil(wineDrinks / 5) + ' bottles - ' + wineDrinks + ' glasses</li>';
        details += '<li>Beer: ' + beerDrinks + ' cans/bottles</li>';
        details += '<li>Non-alcoholic: ' + nonAlcDrinks + ' drinks</li>';
      } else {
        details += '<li>Non-alcoholic beverages: ' + totalDrinks + ' servings</li>';
        details += '<li>Suggest: sparkling water, juices, mocktails, soda, iced tea</li>';
      }

      details += '<li>Garnishes: ' + Math.ceil(totalDrinks * 0.3) + ' (lemons, limes, olives)</li>';
      details += '<li>Stirrers/straws: ' + totalDrinks + '</li>';
      details += '</ul>';
      document.getElementById('bar-details')!.innerHTML = details;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.bar-in').forEach(el => { el.addEventListener('input', calcBAR); el.addEventListener('change', calcBAR); });
      calcBAR();
    }, 50);
  </script>
</CalculatorLayout>
