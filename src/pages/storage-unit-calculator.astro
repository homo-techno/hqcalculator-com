---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Storage Unit Size Calculator";
const description = "Calculate the right storage unit size based on your items. Estimate cubic footage needed.";
const relatedCalcs = [
  { name: "Moving Cost", url: "/moving-cost-calculator", description: "Moving." },
  { name: "Square Footage", url: "/square-footage-calculator", description: "Sq ft." },
  { name: "Volume Calculator", url: "/volume-calculator", description: "Volume." },
  { name: "Area Calculator", url: "/area-calculator", description: "Area." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Budget." },
  { name: "Rent vs Buy", url: "/rent-vs-buy-calculator", description: "Rent vs buy." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Storage Unit Size Calculator" keywords="storage unit calculator, storage size, self storage, cubic feet, storage unit cost" breadcrumbs={[{ name: "Storage Unit", url: "/storage-unit-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Storage Unit Size Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the right storage unit size for your needs.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Select Items</h3>
          <div class="grid grid-cols-2 gap-2">
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="40" value="0" min="0"> Sofa / Couch (40 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="60" value="0" min="0"> Bed (Queen, 60 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="30" value="0" min="0"> Dresser (30 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="25" value="0" min="0"> Dining Table (25 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="10" value="0" min="0"> Chair (10 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="20" value="0" min="0"> Bookshelf (20 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="15" value="0" min="0"> Desk (15 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="10" value="0" min="0"> TV / Appliance (10 ft³)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="3" value="0" min="0"> Boxes (3 ft³ each)</label>
            <label class="flex items-center gap-2 text-sm"><input type="number" class="su-item w-12 px-2 py-1 border border-border rounded text-center" data-cf="50" value="0" min="0"> Washer/Dryer (50 ft³)</label>
          </div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Monthly Budget ($)</label><input type="number" id="su-budget" class="su-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="150" min="0" step="10"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recommended Size</div>
          <div class="text-5xl font-extrabold font-mono" id="su-result">-</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Volume</div><div class="text-xl font-bold font-mono" id="su-vol">0 ft³</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Est. Monthly Cost</div><div class="text-xl font-bold font-mono" id="su-cost">$0</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Unit Sizes</h3>
          <div class="text-xs space-y-1" id="su-sizes"></div>
        </div>
      </div>
      <ShareButton calculatorId="storage-unit" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    const UNITS = [
      { name: '5×5', sqft: 25, cf: 200, price: 50 },
      { name: '5×10', sqft: 50, cf: 400, price: 80 },
      { name: '10×10', sqft: 100, cf: 800, price: 120 },
      { name: '10×15', sqft: 150, cf: 1200, price: 160 },
      { name: '10×20', sqft: 200, cf: 1600, price: 200 },
      { name: '10×30', sqft: 300, cf: 2400, price: 280 },
    ];
    function calcSU() {
      let totalCF = 0;
      document.querySelectorAll('.su-item').forEach(el => {
        const inp = el as HTMLInputElement;
        const qty = parseInt(inp.value) || 0;
        const cf = parseFloat(inp.dataset.cf!) || 0;
        totalCF += qty * cf;
      });
      const needed = totalCF * 1.2;
      let best = UNITS[UNITS.length - 1];
      for (const u of UNITS) { if (u.cf >= needed) { best = u; break; } }
      document.getElementById('su-result')!.textContent = best.name + ` (${best.sqft} sq ft)`;
      document.getElementById('su-vol')!.textContent = Math.round(totalCF) + ' ft³';
      document.getElementById('su-cost')!.textContent = '$' + best.price + '/mo';
      const sizes = document.getElementById('su-sizes')!;
      sizes.innerHTML = UNITS.map(u =>
        `<div class="flex justify-between ${u.name === best.name ? 'font-bold text-primary' : ''}"><span>${u.name} (${u.sqft} sq ft, ${u.cf} ft³)</span><span>~$${u.price}/mo${u.name === best.name ? ' ← Recommended' : ''}</span></div>`
      ).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.su-item').forEach(el => el.addEventListener('input', calcSU));
      document.querySelectorAll('.su-in').forEach(el => el.addEventListener('input', calcSU));
      calcSU();
    }, 50);
  </script>
</CalculatorLayout>
