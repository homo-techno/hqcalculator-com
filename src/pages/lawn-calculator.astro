---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Lawn Calculator - Seed, Fertilizer & Sod Estimator";
const description = "Calculate grass seed, fertilizer, sod, and topsoil needed for your lawn based on area and grass type.";
const relatedCalcs = [
  { name: "Mulch Calculator", url: "/mulch-calculator", description: "Mulch." },
  { name: "Gravel Calculator", url: "/gravel-calculator", description: "Gravel." },
  { name: "Square Footage", url: "/square-footage-calculator", description: "Sq footage." },
  { name: "Fencing Calculator", url: "/fencing-calculator", description: "Fencing." },
  { name: "Pool Volume", url: "/pool-volume-calculator", description: "Pool volume." },
  { name: "Water Intake", url: "/water-intake-calculator", description: "Water." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Lawn Calculator" keywords="lawn calculator, grass seed calculator, sod calculator, fertilizer calculator, lawn care, overseeding" breadcrumbs={[{ name: "Lawn", url: "/lawn-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Lawn Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate seed, fertilizer, and sod for your lawn project.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Lawn Length (ft)</label><input type="number" id="lw-l" class="lw-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50" min="0" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Lawn Width (ft)</label><input type="number" id="lw-w" class="lw-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" min="0" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Grass Type</label><select id="lw-type" class="lw-in w-full px-4 py-3 border border-border rounded-xl text-lg"><option value="kentucky">Kentucky Bluegrass</option><option value="fescue">Tall Fescue</option><option value="bermuda">Bermuda</option><option value="ryegrass">Perennial Ryegrass</option><option value="zoysia">Zoysia</option></select></div>
          <div><label class="block text-xs font-medium text-text mb-1">Project</label><select id="lw-proj" class="lw-in w-full px-4 py-3 border border-border rounded-xl text-lg"><option value="new">New Lawn</option><option value="over">Overseeding</option><option value="sod">Sod</option></select></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Lawn Area</div>
          <div class="text-4xl font-extrabold font-mono" id="lw-area">0</div>
          <div class="text-sm text-blue-200 mt-1">sq ft</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase" id="lw-seedLabel">Seed Needed</div><div class="text-xl font-bold" id="lw-seed">0 lbs</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Fertilizer</div><div class="text-xl font-bold" id="lw-fert">0 lbs</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Topsoil</div><div class="text-xl font-bold" id="lw-soil">0 cu yd</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Water/Week</div><div class="text-xl font-bold" id="lw-water">0 gal</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Estimated Cost</div><div class="text-xl font-bold" id="lw-cost">$0</div></div>
        </div>
      </div>
      <ShareButton calculatorId="lawn" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    const seedRates: Record<string, [number, number]> = {
      kentucky: [2, 3], fescue: [6, 8], bermuda: [1, 2], ryegrass: [8, 10], zoysia: [1, 2],
    };
    function calcLawn() {
      const l = parseFloat((document.getElementById('lw-l') as HTMLInputElement).value) || 0;
      const w = parseFloat((document.getElementById('lw-w') as HTMLInputElement).value) || 0;
      const type = (document.getElementById('lw-type') as HTMLSelectElement).value;
      const proj = (document.getElementById('lw-proj') as HTMLSelectElement).value;
      const area = l * w;
      const [lo, hi] = seedRates[type] || [3, 5];
      let seedRate = (lo + hi) / 2;
      if (proj === 'over') seedRate *= 0.5;
      const seedLbs = (area / 1000) * seedRate;
      const fertLbs = (area / 1000) * 4;
      const topsoilCuYd = proj === 'new' ? (area * 2 / 12) / 27 : 0;
      const waterGal = area * 0.623;
      let cost: number;
      if (proj === 'sod') {
        cost = area * 0.75;
        document.getElementById('lw-seedLabel')!.textContent = 'Sod Pallets';
        document.getElementById('lw-seed')!.textContent = Math.ceil(area / 450) + ' pallets';
      } else {
        cost = seedLbs * 6 + fertLbs * 1.5 + topsoilCuYd * 35;
        document.getElementById('lw-seedLabel')!.textContent = 'Seed Needed';
        document.getElementById('lw-seed')!.textContent = seedLbs.toFixed(1) + ' lbs';
      }
      document.getElementById('lw-area')!.textContent = area.toLocaleString();
      document.getElementById('lw-fert')!.textContent = fertLbs.toFixed(1) + ' lbs';
      document.getElementById('lw-soil')!.textContent = topsoilCuYd.toFixed(1) + ' cu yd';
      document.getElementById('lw-water')!.textContent = Math.round(waterGal).toLocaleString() + ' gal';
      document.getElementById('lw-cost')!.textContent = '$' + Math.round(cost).toLocaleString();
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { document.querySelectorAll('.lw-in').forEach(el => { el.addEventListener('input', calcLawn); el.addEventListener('change', calcLawn); }); calcLawn(); }, 50);
  </script>
</CalculatorLayout>
