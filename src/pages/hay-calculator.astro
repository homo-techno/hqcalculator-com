---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Hay Calculator - Daily, Monthly & Annual Hay Needs";
const description = "Calculate hay requirements for horses and cattle based on number of animals, weight, and hay percentage of body weight per day.";
const relatedCalcs = [
  { name: "Chicken Feed Calculator", url: "/chicken-feed-calculator", description: "Chicken feed and egg costs." },
  { name: "Egg Production Calculator", url: "/egg-production-calculator", description: "Egg production estimates." },
  { name: "Garden Spacing", url: "/garden-spacing-calculator", description: "Plan garden bed layouts." },
  { name: "Fertilizer Calculator", url: "/fertilizer-calculator", description: "Calculate fertilizer needs." },
  { name: "Compost Calculator", url: "/compost-calculator", description: "Get compost ratio right." },
  { name: "Irrigation Calculator", url: "/irrigation-calculator", description: "Plan irrigation schedules." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Hay Calculator" keywords="hay calculator, horse hay needs, cattle hay, bales per month, hay cost, livestock feed" breadcrumbs={[{ name: "Hay", url: "/hay-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Hay Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate daily, monthly, and annual hay requirements and costs for your livestock.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Animal Type</label>
            <select id="hy-animal" class="hy-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="horse" selected>Horse</option>
              <option value="cattle">Cattle</option>
              <option value="goat">Goat</option>
              <option value="sheep">Sheep</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Number of Animals</label>
            <input type="number" id="hy-count" class="hy-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="1" step="1">
          </div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Avg Weight (lbs)</label>
            <input type="number" id="hy-weight" class="hy-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1000" min="50" step="50">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Hay % Body Weight/Day</label>
            <input type="number" id="hy-pct" class="hy-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0.5" max="4" step="0.1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Bale Weight (lbs)</label>
            <input type="number" id="hy-bale" class="hy-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50" min="10" step="5">
          </div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Cost Per Bale ($)</label>
          <input type="number" id="hy-cost" class="hy-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="0" step="0.5">
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Hay Per Day (All Animals)</div>
          <div class="text-5xl font-extrabold font-mono" id="hy-result">0 lbs</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Bales / Month</div><div class="text-xl font-bold font-mono" id="hy-monthly">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Bales / Year</div><div class="text-xl font-bold font-mono" id="hy-annual">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Lbs / Month</div><div class="text-xl font-bold font-mono" id="hy-lbsmonth">0</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Cost</div><div class="text-xl font-bold font-mono" id="hy-mcost">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Annual Cost</div><div class="text-xl font-bold font-mono" id="hy-acost">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Per Animal / Day</div><div class="text-xl font-bold font-mono" id="hy-peranimal">0 lbs</div></div>
        </div>
      </div>
      <ShareButton calculatorId="hay" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcHY() {
      const animal = (document.getElementById('hy-animal') as HTMLSelectElement).value;
      const count = parseFloat((document.getElementById('hy-count') as HTMLInputElement).value) || 0;
      const weight = parseFloat((document.getElementById('hy-weight') as HTMLInputElement).value) || 0;
      const pct = parseFloat((document.getElementById('hy-pct') as HTMLInputElement).value) || 0;
      const baleWeight = parseFloat((document.getElementById('hy-bale') as HTMLInputElement).value) || 50;
      const costPerBale = parseFloat((document.getElementById('hy-cost') as HTMLInputElement).value) || 0;
      const perAnimalDay = weight * (pct / 100);
      const totalDayLbs = perAnimalDay * count;
      const monthLbs = totalDayLbs * 30;
      const yearLbs = totalDayLbs * 365;
      const balesMonth = Math.ceil(monthLbs / baleWeight);
      const balesYear = Math.ceil(yearLbs / baleWeight);
      const monthlyCost = balesMonth * costPerBale;
      const annualCost = balesYear * costPerBale;
      document.getElementById('hy-result')!.textContent = totalDayLbs.toFixed(0) + ' lbs';
      document.getElementById('hy-monthly')!.textContent = balesMonth.toString();
      document.getElementById('hy-annual')!.textContent = balesYear.toString();
      document.getElementById('hy-lbsmonth')!.textContent = monthLbs.toFixed(0);
      document.getElementById('hy-mcost')!.textContent = '$' + monthlyCost.toFixed(0);
      document.getElementById('hy-acost')!.textContent = '$' + annualCost.toLocaleString();
      document.getElementById('hy-peranimal')!.textContent = perAnimalDay.toFixed(1) + ' lbs';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.hy-in').forEach(el => { el.addEventListener('input', calcHY); el.addEventListener('change', calcHY); });
      calcHY();
    }, 50);
  </script>
</CalculatorLayout>
