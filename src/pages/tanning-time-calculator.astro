---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Tanning Time Calculator - Safe Tanning by Skin Type & UV Index";
const description = "Calculate safe tanning time based on your skin type, UV index, altitude, and whether you use sunscreen. Avoid sunburn while building a tan.";
const relatedCalcs = [
  { name: "SPF Calculator", url: "/spf-calculator", description: "SPF protection time calculation." },
  { name: "Sunscreen Calculator", url: "/sunscreen-calculator", description: "Sun exposure time." },
  { name: "Skin Type Calculator", url: "/skin-type-calculator", description: "Determine your skin type." },
  { name: "Skincare Routine Calculator", url: "/skincare-routine-calculator", description: "Product layering order." },
  { name: "Beauty Budget Calculator", url: "/beauty-budget-calculator", description: "Beauty spending breakdown." },
  { name: "Chemical Peel Calculator", url: "/chemical-peel-calculator", description: "Peel depth and recovery." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Tanning Time Calculator" keywords="tanning time, safe tanning, UV index tanning, skin type tanning, sunburn prevention, tanning calculator" breadcrumbs={[{ name: "Tanning Time", url: "/tanning-time-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Tanning Time Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate safe sun exposure for tanning based on your skin and conditions.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Skin Type (Fitzpatrick Scale)</label>
          <select id="tnt-skin" class="tnt-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="5">Type I - Very fair, always burns, never tans</option>
            <option value="8">Type II - Fair, usually burns, tans minimally</option>
            <option value="13" selected>Type III - Medium, sometimes burns, tans gradually</option>
            <option value="20">Type IV - Olive, rarely burns, tans easily</option>
            <option value="30">Type V - Brown, very rarely burns</option>
            <option value="45">Type VI - Dark brown/black, never burns</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">UV Index</label><input type="number" id="tnt-uv" class="tnt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="7" min="1" max="15" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">SPF Applied</label><input type="number" id="tnt-spf" class="tnt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" min="0" max="100" step="1"></div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Altitude</label>
          <select id="tnt-alt" class="tnt-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="1.0" selected>Sea level</option>
            <option value="1.1">Moderate (3,000-6,000 ft)</option>
            <option value="1.2">High (6,000-10,000 ft)</option>
            <option value="1.3">Very high (10,000+ ft)</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Reflective Surface</label>
          <select id="tnt-surface" class="tnt-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="1.0" selected>Grass / Normal ground</option>
            <option value="1.1">Sand / Beach</option>
            <option value="1.15">Water / Poolside</option>
            <option value="1.3">Snow / Ice</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Current Tan Level</label>
          <select id="tnt-tan" class="tnt-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="1.0" selected>No base tan</option>
            <option value="1.3">Light base tan</option>
            <option value="1.5">Moderate base tan</option>
            <option value="1.8">Deep base tan</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Safe Tanning Window</div>
          <div class="text-5xl font-extrabold font-mono" id="tnt-safe">0</div>
          <div class="text-sm text-blue-200 mt-1">minutes (before burn risk)</div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Burn Time (Unprotected)</div><div class="text-xl font-bold" id="tnt-burn">0 min</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Optimal Tan Time</div><div class="text-xl font-bold" id="tnt-optimal">0 min</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">UV Risk Level</div><div class="text-xl font-bold" id="tnt-risk">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Vitamin D Time</div><div class="text-xl font-bold" id="tnt-vitd">0 min</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Tanning Safety Tips</h3>
          <div class="text-sm space-y-1" id="tnt-tips"></div>
        </div>
      </div>
      <ShareButton calculatorId="tanning-time" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Safe Tanning Guide</h2>
      <p>Safe tanning means limiting UV exposure to below your burn threshold. Your burn time depends on skin type (MED), UV index, altitude, and reflective surfaces. Snow reflects up to 80% of UV, sand reflects 15-25%. For optimal tanning without burning, stay in the sun for about 50-75% of your burn time. Build exposure gradually - start with shorter sessions and increase over days. Dermatologists note there is no truly "safe" UV tan; consider sunless tanning products as an alternative.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcTNT() {
      const skinMED = parseFloat((document.getElementById('tnt-skin') as HTMLSelectElement).value);
      const uv = parseFloat((document.getElementById('tnt-uv') as HTMLInputElement).value) || 1;
      const spf = parseFloat((document.getElementById('tnt-spf') as HTMLInputElement).value) || 0;
      const altFactor = parseFloat((document.getElementById('tnt-alt') as HTMLSelectElement).value);
      const surfaceFactor = parseFloat((document.getElementById('tnt-surface') as HTMLSelectElement).value);
      const tanFactor = parseFloat((document.getElementById('tnt-tan') as HTMLSelectElement).value);

      const effectiveUV = uv * altFactor * surfaceFactor;
      const baseBurnTime = (skinMED * tanFactor) / effectiveUV;
      const burnTime = spf > 0 ? baseBurnTime * spf : baseBurnTime;
      const safeTanTime = burnTime * 0.65;
      const optimalTanTime = burnTime * 0.5;
      const vitDTime = Math.min(baseBurnTime * 0.25, 20);

      let risk = 'Low';
      if (effectiveUV >= 3 && effectiveUV < 6) risk = 'Moderate';
      else if (effectiveUV >= 6 && effectiveUV < 8) risk = 'High';
      else if (effectiveUV >= 8 && effectiveUV < 11) risk = 'Very High';
      else if (effectiveUV >= 11) risk = 'Extreme';

      const tips: string[] = [];
      tips.push('Start with short sessions and gradually increase exposure.');
      tips.push('Avoid peak UV hours (10 AM - 4 PM) when possible.');
      if (skinMED <= 8) tips.push('Your skin type burns easily - use SPF 30+ and limit exposure.');
      if (effectiveUV >= 8) tips.push('Very high UV - seek shade frequently and wear protective clothing.');
      tips.push('Stay hydrated - drink water before, during, and after sun exposure.');
      tips.push('Apply aloe vera or moisturizer after tanning to soothe skin.');
      if (spf === 0) tips.push('Consider using at least SPF 15 to reduce burn risk while still allowing some tan.');

      document.getElementById('tnt-safe')!.textContent = Math.round(safeTanTime).toString();
      document.getElementById('tnt-burn')!.textContent = Math.round(baseBurnTime) + ' min';
      document.getElementById('tnt-optimal')!.textContent = Math.round(optimalTanTime) + ' min';
      document.getElementById('tnt-risk')!.textContent = risk;
      document.getElementById('tnt-vitd')!.textContent = Math.round(vitDTime) + ' min';
      document.getElementById('tnt-tips')!.innerHTML = tips.map(t => '<p>- ' + t + '</p>').join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.tnt-in').forEach(el => { el.addEventListener('input', calcTNT); el.addEventListener('change', calcTNT); });
      calcTNT();
    }, 50);
  </script>
</CalculatorLayout>
