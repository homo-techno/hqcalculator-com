---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Employee Turnover Calculator - Cost & Rate Analysis";
const description = "Calculate employee turnover rate, cost per departure, and total annual turnover cost to understand workforce retention impact.";
const relatedCalcs = [
  { name: "Meeting Cost", url: "/meeting-cost-calculator", description: "Meeting costs." },
  { name: "Salary Calculator", url: "/salary-calculator", description: "Salary." },
  { name: "Productivity", url: "/productivity-calculator", description: "Productivity." },
  { name: "ROI Calculator", url: "/roi-calculator", description: "ROI." },
  { name: "Project Timeline", url: "/project-timeline-calculator", description: "Timelines." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Employee Turnover Calculator" keywords="employee turnover, turnover rate, turnover cost, hiring cost, retention, attrition" breadcrumbs={[{ name: "Employee Turnover", url: "/employee-turnover-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Employee Turnover Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Quantify the financial impact of employee turnover on your organization.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Total Employees</label><input type="number" id="et2-total" class="et2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="100" min="1" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Annual Departures</label><input type="number" id="et2-dep" class="et2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="15" min="0" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Avg Annual Salary ($)</label><input type="number" id="et2-salary" class="et2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="65000" min="0" step="5000"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Hiring Cost Multiplier (x salary)</label><input type="number" id="et2-mult" class="et2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1.5" min="0.5" max="3" step="0.1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Turnover Rate</div>
          <div class="text-5xl font-extrabold font-mono" id="et2-rate">0%</div>
          <div class="text-sm text-blue-200 mt-1">annual attrition</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cost per Departure</div><div class="text-xl font-bold" id="et2-costper">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Annual Turnover Cost</div><div class="text-xl font-bold" id="et2-annual">$0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Avg Time to Fill (est.)</div><div class="text-xl font-bold" id="et2-fill">42 days</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Productivity Loss</div><div class="text-xl font-bold" id="et2-prod">$0</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Cost Breakdown</h3>
          <div class="space-y-2" id="et2-breakdown"></div>
        </div>
      </div>
      <ShareButton calculatorId="employee-turnover" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Understanding Turnover Costs</h2>
      <p>Replacing an employee costs 0.5-2x their annual salary when factoring in recruiting, onboarding, training, and lost productivity. The average US turnover rate is about 15-20% annually. Reducing turnover by even a few percentage points yields significant savings.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcTurnover() {
      const total = parseFloat((document.getElementById('et2-total') as HTMLInputElement).value) || 100;
      const dep = parseFloat((document.getElementById('et2-dep') as HTMLInputElement).value) || 0;
      const salary = parseFloat((document.getElementById('et2-salary') as HTMLInputElement).value) || 65000;
      const mult = parseFloat((document.getElementById('et2-mult') as HTMLInputElement).value) || 1.5;
      const rate = total > 0 ? (dep / total * 100) : 0;
      const costPer = Math.round(salary * mult);
      const annualCost = costPer * dep;
      // Productivity loss estimate: ~3 months of reduced output per departure
      const prodLoss = Math.round(dep * salary * 0.25);
      // Breakdown
      const recruiting = Math.round(salary * 0.20);
      const onboarding = Math.round(salary * 0.30);
      const training = Math.round(salary * 0.25);
      const lostProd = Math.round(salary * (mult - 0.75));
      document.getElementById('et2-rate')!.textContent = rate.toFixed(1) + '%';
      document.getElementById('et2-costper')!.textContent = '$' + costPer.toLocaleString();
      document.getElementById('et2-annual')!.textContent = '$' + annualCost.toLocaleString();
      document.getElementById('et2-prod')!.textContent = '$' + prodLoss.toLocaleString();
      const breakdownHTML = [
        { label: 'Recruiting & Hiring', val: recruiting },
        { label: 'Onboarding', val: onboarding },
        { label: 'Training', val: training },
        { label: 'Lost Productivity', val: lostProd },
      ].map(b => `<div class="flex justify-between items-center py-1 border-b border-border last:border-0"><span class="text-sm">${b.label}</span><span class="text-sm font-bold">$${b.val.toLocaleString()}/departure</span></div>`).join('');
      document.getElementById('et2-breakdown')!.innerHTML = breakdownHTML;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { document.querySelectorAll('.et2-in').forEach(el => { el.addEventListener('input', calcTurnover); el.addEventListener('change', calcTurnover); }); calcTurnover(); }, 50);
  </script>
</CalculatorLayout>
