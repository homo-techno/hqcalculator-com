---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Wind Chill Calculator - Feels Like Temperature";
const description = "Calculate wind chill factor and 'feels like' temperature based on air temperature and wind speed.";
const relatedCalcs = [
  { name: "Temperature Converter", url: "/temperature-converter", description: "Temperature." },
  { name: "Speed Calculator", url: "/speed-calculator", description: "Speed." },
  { name: "Heat Index", url: "/heat-index-calculator", description: "Heat index." },
  { name: "Pressure Converter", url: "/pressure-converter", description: "Pressure." },
  { name: "Carbon Footprint", url: "/carbon-footprint-calculator", description: "Carbon." },
  { name: "BTU Calculator", url: "/btu-calculator", description: "BTU." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Wind Chill Calculator" keywords="wind chill calculator, feels like temperature, wind chill factor, wind chill index, NWS wind chill" breadcrumbs={[{ name: "Wind Chill", url: "/wind-chill-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Wind Chill Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate the wind chill and "feels like" temperature.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Temperature (°F)</label><input type="number" id="wc-temp" class="wc-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="20" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Wind Speed (mph)</label><input type="number" id="wc-wind" class="wc-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="25" min="0" step="1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Wind Chill (Feels Like)</div>
          <div class="text-5xl font-extrabold font-mono" id="wc-result">0°F</div>
        </div>
        <div class="p-4 rounded-xl text-center" id="wc-danger-box">
          <div class="font-bold text-sm" id="wc-danger">-</div>
          <div class="text-xs mt-1" id="wc-frostbite">-</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wind Chill (°C)</div><div class="text-xl font-bold font-mono" id="wc-celsius">0°C</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Temp Drop</div><div class="text-xl font-bold font-mono" id="wc-drop">0°F</div></div>
        </div>
      </div>
      <ShareButton calculatorId="wind-chill" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcWC() {
      const t = parseFloat((document.getElementById('wc-temp') as HTMLInputElement).value) || 0;
      const w = parseFloat((document.getElementById('wc-wind') as HTMLInputElement).value) || 0;
      let wc: number;
      if (t > 50 || w < 3) { wc = t; }
      else { wc = 35.74 + 0.6215 * t - 35.75 * Math.pow(w, 0.16) + 0.4275 * t * Math.pow(w, 0.16); }
      const wcC = (wc - 32) * 5 / 9;
      document.getElementById('wc-result')!.textContent = wc.toFixed(1) + '°F';
      document.getElementById('wc-celsius')!.textContent = wcC.toFixed(1) + '°C';
      document.getElementById('wc-drop')!.textContent = (t - wc).toFixed(1) + '°F';
      let danger: string, frost: string, color: string;
      if (wc > 32) { danger = 'No Danger'; frost = 'Comfortable conditions'; color = 'bg-green-50 text-green-800'; }
      else if (wc > 0) { danger = 'Caution'; frost = 'Frostbite possible in 30+ minutes'; color = 'bg-yellow-50 text-yellow-800'; }
      else if (wc > -20) { danger = 'Warning'; frost = 'Frostbite possible in 10-30 minutes'; color = 'bg-orange-50 text-orange-800'; }
      else if (wc > -40) { danger = 'Danger'; frost = 'Frostbite possible in 5-10 minutes'; color = 'bg-red-50 text-red-800'; }
      else { danger = 'Extreme Danger'; frost = 'Frostbite in under 5 minutes'; color = 'bg-red-100 text-red-900'; }
      document.getElementById('wc-danger')!.textContent = danger;
      document.getElementById('wc-frostbite')!.textContent = frost;
      document.getElementById('wc-danger-box')!.className = `p-4 rounded-xl text-center ${color}`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { document.querySelectorAll('.wc-in').forEach(el => el.addEventListener('input', calcWC)); calcWC(); }, 50);
  </script>
</CalculatorLayout>
