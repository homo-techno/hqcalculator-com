---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Bird Cage Calculator - Minimum Dimensions, Bar Spacing & Perches";
const description = "Calculate minimum cage dimensions by bird species, recommended bar spacing, perch count, and toy recommendations for your birds.";
const relatedCalcs = [
  { name: "Rabbit Hutch Calculator", url: "/rabbit-hutch-calculator", description: "Minimum hutch size for rabbits." },
  { name: "Reptile Terrarium Calculator", url: "/reptile-terrarium-calculator", description: "Tank size for reptiles." },
  { name: "Aquarium Calculator", url: "/aquarium-calculator", description: "Aquarium sizing and stocking." },
  { name: "Pet Cost Calculator", url: "/pet-cost-calculator", description: "Annual pet ownership costs." },
  { name: "Pet Food Calculator", url: "/pet-food-calculator", description: "General pet food portions." },
  { name: "Pet Insurance Calculator", url: "/pet-insurance-calculator", description: "Estimate insurance premiums." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Bird Cage Calculator" keywords="bird cage size, minimum cage dimensions, bar spacing, parrot cage, budgie cage, perch count" breadcrumbs={[{ name: "Bird Cage", url: "/bird-cage-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Bird Cage Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the right cage dimensions, bar spacing, perch count, and toy recommendations for your bird species.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Bird Species</label>
            <select id="bc-species" class="bc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="finch">Finch / Canary</option>
              <option value="budgie" selected>Budgie / Parakeet</option>
              <option value="cockatiel">Cockatiel</option>
              <option value="conure">Conure</option>
              <option value="amazon">Amazon Parrot</option>
              <option value="african_grey">African Grey</option>
              <option value="cockatoo">Cockatoo</option>
              <option value="macaw">Macaw</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Number of Birds</label>
            <input type="number" id="bc-count" class="bc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="1" max="20" step="1">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Minimum Cage Size</div>
          <div class="text-5xl font-extrabold font-mono" id="bc-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Width (in)</div><div class="text-xl font-bold font-mono" id="bc-width">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Depth (in)</div><div class="text-xl font-bold font-mono" id="bc-depth">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Height (in)</div><div class="text-xl font-bold font-mono" id="bc-height">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Bar Spacing</div><div class="text-xl font-bold font-mono" id="bc-bars">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Perches</div><div class="text-xl font-bold font-mono" id="bc-perch">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Toys Rec.</div><div class="text-xl font-bold font-mono" id="bc-toys">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Food Dishes</div><div class="text-xl font-bold font-mono" id="bc-dishes">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Perch Diameter</div><div class="text-xl font-bold font-mono" id="bc-perchd">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="bird-cage" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcBC() {
      const species = (document.getElementById('bc-species') as HTMLSelectElement).value;
      const count = parseInt((document.getElementById('bc-count') as HTMLInputElement).value) || 1;

      // Minimum dimensions (W x D x H in inches) for 1 bird, bar spacing, perch diameter
      const specs: Record<string, { w: number; d: number; h: number; bar: string; perchD: string }> = {
        finch:        { w: 24, d: 14, h: 18, bar: '3/8"',  perchD: '3/8"' },
        budgie:       { w: 24, d: 16, h: 18, bar: '1/2"',  perchD: '1/2"' },
        cockatiel:    { w: 24, d: 18, h: 24, bar: '5/8"',  perchD: '5/8"' },
        conure:       { w: 30, d: 22, h: 30, bar: '3/4"',  perchD: '3/4"' },
        amazon:       { w: 36, d: 24, h: 36, bar: '3/4"-1"', perchD: '1"' },
        african_grey: { w: 36, d: 24, h: 40, bar: '3/4"-1"', perchD: '1"' },
        cockatoo:     { w: 40, d: 30, h: 48, bar: '1"-1.5"', perchD: '1.25"' },
        macaw:        { w: 48, d: 36, h: 60, bar: '1"-1.5"', perchD: '1.5"' },
      };

      const spec = specs[species] || specs['budgie'];
      // Scale for multiple birds: ~50% more per additional bird
      const scale = 1 + (count - 1) * 0.5;
      const width = Math.round(spec.w * scale);
      const depth = Math.round(spec.d * scale);
      const height = Math.round(spec.h * Math.max(1, 1 + (count - 1) * 0.2));

      const totalSize = width + '" x ' + depth + '" x ' + height + '"';
      const perches = Math.max(2, count + 1);
      const toys = Math.max(3, count * 2);
      const dishes = count + 1; // food + water minimum

      document.getElementById('bc-result')!.textContent = totalSize;
      document.getElementById('bc-width')!.textContent = width.toString();
      document.getElementById('bc-depth')!.textContent = depth.toString();
      document.getElementById('bc-height')!.textContent = height.toString();
      document.getElementById('bc-bars')!.textContent = spec.bar;
      document.getElementById('bc-perch')!.textContent = perches.toString();
      document.getElementById('bc-toys')!.textContent = toys.toString();
      document.getElementById('bc-dishes')!.textContent = dishes.toString();
      document.getElementById('bc-perchd')!.textContent = spec.perchD;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.bc-in').forEach(el => { el.addEventListener('input', calcBC); el.addEventListener('change', calcBC); });
      calcBC();
    }, 50);
  </script>
</CalculatorLayout>
