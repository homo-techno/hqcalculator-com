---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "ACT Score Calculator - Composite Score & Percentiles";
const description = "Convert ACT raw scores to scaled scores, calculate your composite, estimate percentile, and find SAT equivalent.";
const relatedCalcs = [
  { name: "SAT Score", url: "/sat-score-calculator", description: "SAT scoring." },
  { name: "IELTS Score", url: "/ielts-score-calculator", description: "IELTS bands." },
  { name: "GPA Calculator", url: "/gpa-calculator", description: "GPA." },
  { name: "Scholarship", url: "/scholarship-calculator", description: "Scholarships." },
  { name: "Spaced Repetition", url: "/spaced-repetition-calculator", description: "Study planning." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="ACT Score Calculator" keywords="ACT score calculator, ACT composite, ACT percentile, ACT to SAT, ACT conversion" breadcrumbs={[{ name: "ACT Score", url: "/act-score-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">ACT Score Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert raw scores to scaled ACT scores and view your composite.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">English Raw (0-75)</label><input type="number" id="ac-eng" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="55" min="0" max="75" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Math Raw (0-60)</label><input type="number" id="ac-math" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="42" min="0" max="60" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Reading Raw (0-40)</label><input type="number" id="ac-read" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" min="0" max="40" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Science Raw (0-40)</label><input type="number" id="ac-sci" class="ac-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="28" min="0" max="40" step="1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">ACT Composite Score</div>
          <div class="text-5xl font-extrabold font-mono" id="ac-composite">0</div>
          <div class="text-sm text-blue-200 mt-1">out of 36</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">English Scaled</div><div class="text-xl font-bold" id="ac-eng-sc">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Math Scaled</div><div class="text-xl font-bold" id="ac-math-sc">0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Reading Scaled</div><div class="text-xl font-bold" id="ac-read-sc">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Science Scaled</div><div class="text-xl font-bold" id="ac-sci-sc">0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Percentile</div><div class="text-xl font-bold" id="ac-pct">0th</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">SAT Equivalent</div><div class="text-xl font-bold" id="ac-sat">0</div></div>
        </div>
      </div>
      <ShareButton calculatorId="act-score" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Understanding ACT Scores</h2>
      <p>The ACT is scored 1-36. The composite is the average of four section scores (English, Math, Reading, Science), each also scored 1-36. The national average composite is about 20-21.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcACT() {
      const engRaw = Math.min(75, Math.max(0, parseFloat((document.getElementById('ac-eng') as HTMLInputElement).value) || 0));
      const mathRaw = Math.min(60, Math.max(0, parseFloat((document.getElementById('ac-math') as HTMLInputElement).value) || 0));
      const readRaw = Math.min(40, Math.max(0, parseFloat((document.getElementById('ac-read') as HTMLInputElement).value) || 0));
      const sciRaw = Math.min(40, Math.max(0, parseFloat((document.getElementById('ac-sci') as HTMLInputElement).value) || 0));
      // Approximate raw-to-scaled (1-36)
      const engScaled = Math.min(36, Math.max(1, Math.round((engRaw / 75) * 35 + 1)));
      const mathScaled = Math.min(36, Math.max(1, Math.round((mathRaw / 60) * 35 + 1)));
      const readScaled = Math.min(36, Math.max(1, Math.round((readRaw / 40) * 35 + 1)));
      const sciScaled = Math.min(36, Math.max(1, Math.round((sciRaw / 40) * 35 + 1)));
      const composite = Math.round((engScaled + mathScaled + readScaled + sciScaled) / 4);
      // Percentile approximation
      const pctMap: [number, number][] = [
        [36, 99], [35, 99], [34, 99], [33, 98], [32, 96],
        [31, 95], [30, 93], [29, 90], [28, 88], [27, 85],
        [26, 82], [25, 78], [24, 74], [23, 68], [22, 63],
        [21, 57], [20, 50], [19, 44], [18, 38], [17, 32],
        [16, 26], [15, 20], [14, 15], [13, 10], [12, 6],
      ];
      let pct = 1;
      for (const [score, p] of pctMap) {
        if (composite >= score) { pct = p; break; }
      }
      // ACT to SAT concordance (approximate)
      const satEquiv = Math.min(1600, Math.max(400, Math.round((composite / 36) * 1200 + 400)));
      document.getElementById('ac-composite')!.textContent = composite.toString();
      document.getElementById('ac-eng-sc')!.textContent = engScaled.toString();
      document.getElementById('ac-math-sc')!.textContent = mathScaled.toString();
      document.getElementById('ac-read-sc')!.textContent = readScaled.toString();
      document.getElementById('ac-sci-sc')!.textContent = sciScaled.toString();
      document.getElementById('ac-pct')!.textContent = pct + 'th';
      document.getElementById('ac-sat')!.textContent = satEquiv.toString();
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { document.querySelectorAll('.ac-in').forEach(el => { el.addEventListener('input', calcACT); el.addEventListener('change', calcACT); }); calcACT(); }, 50);
  </script>
</CalculatorLayout>
