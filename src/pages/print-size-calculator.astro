---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Print Size Calculator - Photo Print Dimensions from Megapixels & DPI";
const description = "Calculate maximum print size from megapixels at your target DPI. Find optimal print dimensions, file size estimates, and quality ratings.";
const relatedCalcs = [
  { name: "Photo Resolution", url: "/photo-resolution-calculator", description: "Megapixels and file size." },
  { name: "Aspect Ratio", url: "/aspect-ratio-calculator", description: "Image aspect ratios." },
  { name: "Pixel Calculator", url: "/pixel-calculator", description: "Pixel conversions." },
  { name: "Screen Size", url: "/screen-size-calculator", description: "Display size calculations." },
  { name: "Picture Frame", url: "/picture-frame-calculator", description: "Frame sizing." },
  { name: "Camera Sensor", url: "/camera-sensor-calculator", description: "Sensor sizes and crop factors." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Print Size Calculator" keywords="print size calculator, megapixels to print size, DPI calculator, photo print dimensions, maximum print size, photo quality" breadcrumbs={[{ name: "Print Size", url: "/print-size-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Print Size Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate print dimensions from your image resolution and target DPI.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-text mb-1">Image Width (px)</label>
            <input type="number" id="pz-width" class="pz-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="6000" min="1" step="1">
          </div>
          <div>
            <label class="block text-sm font-medium text-text mb-1">Image Height (px)</label>
            <input type="number" id="pz-height" class="pz-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="4000" min="1" step="1">
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Print DPI (dots per inch)</label>
          <select id="pz-dpi" class="pz-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="72">72 DPI (Screen)</option>
            <option value="150">150 DPI (Draft Print)</option>
            <option value="240">240 DPI (Good Quality)</option>
            <option value="300" selected>300 DPI (Photo Quality)</option>
            <option value="360">360 DPI (Fine Art / Inkjet)</option>
            <option value="600">600 DPI (Professional)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Print Units</label>
          <select id="pz-unit" class="pz-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="in" selected>Inches</option>
            <option value="cm">Centimeters</option>
          </select>
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Maximum Print Size</div>
          <div class="text-4xl font-extrabold" id="pz-maxprint"></div>
          <div class="text-sm text-blue-200 mt-1" id="pz-megapixels"></div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Aspect Ratio</div>
            <div class="text-xl font-bold text-text" id="pz-ratio"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">Print Quality</div>
            <div class="text-xl font-bold text-text" id="pz-quality"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">JPEG File Size (est.)</div>
            <div class="text-xl font-bold text-text" id="pz-jpeg"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary uppercase tracking-wide">TIFF File Size (est.)</div>
            <div class="text-xl font-bold text-text" id="pz-tiff"></div>
          </div>
        </div>

        <div class="p-4 bg-surface-alt rounded-xl">
          <h4 class="font-semibold text-sm text-text mb-2">Standard Print Sizes</h4>
          <div class="text-sm text-text-secondary space-y-1" id="pz-standards"></div>
        </div>
      </div>
      <ShareButton calculatorId="print-size" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Print Size and DPI Guide</h2>
      <p>DPI (dots per inch) determines print quality. 300 DPI is the standard for photo-quality prints. Lower DPI is acceptable for large prints viewed from a distance.</p>
      <p><strong>Rule of thumb:</strong> 150 DPI is acceptable for posters, 240+ DPI is good for photos, and 300+ DPI is ideal for close-viewing prints.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcPZ() {
      const w = parseInt((document.getElementById('pz-width') as HTMLInputElement).value) || 6000;
      const h = parseInt((document.getElementById('pz-height') as HTMLInputElement).value) || 4000;
      const dpi = parseInt((document.getElementById('pz-dpi') as HTMLSelectElement).value);
      const unit = (document.getElementById('pz-unit') as HTMLSelectElement).value;

      const mp = (w * h) / 1000000;
      let printW = w / dpi;
      let printH = h / dpi;
      let suffix = '"';
      if (unit === 'cm') {
        printW *= 2.54;
        printH *= 2.54;
        suffix = ' cm';
      }

      document.getElementById('pz-maxprint')!.textContent = printW.toFixed(1) + ' x ' + printH.toFixed(1) + suffix;
      document.getElementById('pz-megapixels')!.textContent = mp.toFixed(1) + ' Megapixels';

      function gcd(a: number, b: number): number {
        a = Math.abs(Math.round(a)); b = Math.abs(Math.round(b));
        while (b) { [a, b] = [b, a % b]; } return a;
      }
      const g = gcd(w, h);
      document.getElementById('pz-ratio')!.textContent = (w / g) + ':' + (h / g);

      let quality = '';
      if (dpi >= 300) quality = 'Excellent';
      else if (dpi >= 240) quality = 'Good';
      else if (dpi >= 150) quality = 'Acceptable';
      else quality = 'Screen Only';
      document.getElementById('pz-quality')!.textContent = quality;

      const totalPixels = w * h;
      const jpegMB = (totalPixels * 3 * 0.15) / (1024 * 1024);
      const tiffMB = (totalPixels * 3) / (1024 * 1024);
      document.getElementById('pz-jpeg')!.textContent = jpegMB.toFixed(1) + ' MB';
      document.getElementById('pz-tiff')!.textContent = tiffMB.toFixed(1) + ' MB';

      const standards = [
        { name: '4x6', w: 4, h: 6 },
        { name: '5x7', w: 5, h: 7 },
        { name: '8x10', w: 8, h: 10 },
        { name: '11x14', w: 11, h: 14 },
        { name: '16x20', w: 16, h: 20 },
        { name: '20x30', w: 20, h: 30 },
        { name: '24x36', w: 24, h: 36 },
      ];

      let html = '';
      standards.forEach(s => {
        const needW = s.w * dpi;
        const needH = s.h * dpi;
        const maxDim = Math.max(w, h);
        const minDim = Math.min(w, h);
        const canPrint = maxDim >= Math.max(needW, needH) && minDim >= Math.min(needW, needH);
        const effectiveDPI = Math.min(maxDim / Math.max(s.w, s.h), minDim / Math.min(s.w, s.h));
        const icon = canPrint ? '\u2705' : (effectiveDPI >= 150 ? '\u26A0\uFE0F' : '\u274C');
        const sizeLabel = unit === 'cm' ? (s.w * 2.54).toFixed(0) + 'x' + (s.h * 2.54).toFixed(0) + ' cm' : s.name + '"';
        html += '<div class="flex justify-between"><span>' + icon + ' ' + sizeLabel + '</span><span class="font-bold">' + Math.round(effectiveDPI) + ' DPI</span></div>';
      });
      document.getElementById('pz-standards')!.innerHTML = html;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.pz-in').forEach(el => {
        el.addEventListener('input', calcPZ);
        el.addEventListener('change', calcPZ);
      });
      calcPZ();
    }, 50);
  </script>
</CalculatorLayout>
