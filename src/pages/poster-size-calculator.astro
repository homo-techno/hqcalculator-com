---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Poster Size Calculator - Standard Sizes, DPI & Custom Dimensions";
const description = "Find standard poster sizes, calculate custom dimensions, and determine minimum DPI/resolution requirements for quality poster printing.";
const relatedCalcs = [
  { name: "Print Resolution Calculator", url: "/print-resolution-calculator", description: "DPI/PPI calculations." },
  { name: "Bleed Margin Calculator", url: "/bleed-margin-calculator", description: "Print bleed calculations." },
  { name: "Print Cost Calculator", url: "/print-cost-calculator", description: "Print job cost estimator." },
  { name: "Paper Weight Calculator", url: "/paper-weight-calculator", description: "Paper weight converter." },
  { name: "Color Separation Calculator", url: "/color-separation-calculator", description: "CMYK color separation." },
  { name: "Ink Coverage Calculator", url: "/ink-coverage-calculator", description: "Ink usage estimator." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Poster Size Calculator" keywords="poster size, poster dimensions, poster DPI, print resolution, poster printing, standard poster sizes, large format" breadcrumbs={[{ name: "Poster Size Calculator", url: "/poster-size-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Poster Size Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate poster dimensions, minimum image resolution, and file size requirements for quality poster printing at any size.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div><label class="block text-xs font-medium text-text mb-1">Standard Poster Size</label>
          <select id="ps2-preset" class="ps2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="custom">Custom Size</option>
            <option value="11x17">Tabloid (11 x 17 in)</option>
            <option value="18x24">Small Poster (18 x 24 in)</option>
            <option value="24x36">Standard Poster (24 x 36 in)</option>
            <option value="27x40">Movie Poster (27 x 40 in)</option>
            <option value="36x48">Large Poster (36 x 48 in)</option>
            <option value="a3">A3 (297 x 420 mm)</option>
            <option value="a2">A2 (420 x 594 mm)</option>
            <option value="a1">A1 (594 x 841 mm)</option>
            <option value="a0">A0 (841 x 1189 mm)</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Width (inches)</label><input type="number" id="ps2-width" class="ps2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Height (inches)</label><input type="number" id="ps2-height" class="ps2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="0.5"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Target DPI</label>
          <select id="ps2-dpi" class="ps2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="72">72 DPI (Screen only)</option>
            <option value="150">150 DPI (Acceptable print)</option>
            <option value="200">200 DPI (Good for large format)</option>
            <option value="300">300 DPI (High quality)</option>
            <option value="600">600 DPI (Professional)</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Required Image Resolution</div>
          <div class="text-3xl font-extrabold font-mono" id="ps2-result">0 x 0 px</div>
          <div class="text-sm text-blue-200 mt-1" id="ps2-megapixels"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Print Size (in)</div><div class="text-xl font-bold" id="ps2-sizein">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Print Size (cm)</div><div class="text-xl font-bold" id="ps2-sizecm">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Est. File Size (RGB)</div><div class="text-xl font-bold" id="ps2-filesize">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Aspect Ratio</div><div class="text-xl font-bold" id="ps2-ratio">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">DPI Comparison</h3>
          <div class="font-mono text-sm space-y-1" id="ps2-steps"></div>
        </div>
      </div>
      <ShareButton calculatorId="poster-size" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Poster Printing Resolution Guide</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p>Pixels = Print Size (inches) x DPI</p>
        <p>150 DPI: Minimum for posters viewed at 3+ feet</p>
        <p>200 DPI: Good quality for large format printing</p>
        <p>300 DPI: Professional quality for close viewing</p>
        <p>File Size (bytes) = Width(px) x Height(px) x Channels x BitDepth/8</p>
      </div>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPs2() {
      const preset = (document.getElementById('ps2-preset') as HTMLSelectElement).value;
      const presets: Record<string, [number, number]> = {
        '11x17': [11, 17], '18x24': [18, 24], '24x36': [24, 36],
        '27x40': [27, 40], '36x48': [36, 48],
        a3: [11.693, 16.535], a2: [16.535, 23.386], a1: [23.386, 33.11], a0: [33.11, 46.811]
      };
      if (preset !== 'custom' && presets[preset]) {
        (document.getElementById('ps2-width') as HTMLInputElement).value = presets[preset][0].toString();
        (document.getElementById('ps2-height') as HTMLInputElement).value = presets[preset][1].toString();
      }
      const width = parseFloat((document.getElementById('ps2-width') as HTMLInputElement).value) || 0;
      const height = parseFloat((document.getElementById('ps2-height') as HTMLInputElement).value) || 0;
      const dpi = parseFloat((document.getElementById('ps2-dpi') as HTMLSelectElement).value) || 300;
      const pixW = Math.ceil(width * dpi);
      const pixH = Math.ceil(height * dpi);
      const megapixels = (pixW * pixH) / 1000000;
      const fileSizeBytes = pixW * pixH * 3;
      const fileSizeMB = fileSizeBytes / (1024 * 1024);
      const cmW = width * 2.54;
      const cmH = height * 2.54;
      function gcd(a: number, b: number): number { return b === 0 ? a : gcd(b, a % b); }
      const g = gcd(Math.round(width * 10), Math.round(height * 10));
      const ratioW = Math.round(width * 10) / g;
      const ratioH = Math.round(height * 10) / g;
      const steps: string[] = [];
      const dpiOptions = [72, 150, 200, 300, 600];
      for (const d of dpiOptions) {
        const pw = Math.ceil(width * d);
        const ph = Math.ceil(height * d);
        const mp = (pw * ph) / 1000000;
        const fs = (pw * ph * 3) / (1024 * 1024);
        const mark = d === dpi ? ' <-- selected' : '';
        steps.push(d + ' DPI: ' + pw + ' x ' + ph + ' px (' + mp.toFixed(1) + ' MP, ~' + fs.toFixed(0) + ' MB)' + mark);
      }
      document.getElementById('ps2-result')!.textContent = pixW + ' x ' + pixH + ' px';
      document.getElementById('ps2-megapixels')!.textContent = megapixels.toFixed(1) + ' megapixels at ' + dpi + ' DPI';
      document.getElementById('ps2-sizein')!.textContent = width + ' x ' + height + ' in';
      document.getElementById('ps2-sizecm')!.textContent = cmW.toFixed(1) + ' x ' + cmH.toFixed(1) + ' cm';
      document.getElementById('ps2-filesize')!.textContent = fileSizeMB > 1024 ? (fileSizeMB / 1024).toFixed(1) + ' GB' : fileSizeMB.toFixed(0) + ' MB';
      document.getElementById('ps2-ratio')!.textContent = ratioW + ':' + ratioH;
      document.getElementById('ps2-steps')!.innerHTML = steps.map(s => '<div>' + s + '</div>').join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('ps2-width') as HTMLInputElement).value = '24';
      (document.getElementById('ps2-height') as HTMLInputElement).value = '36';
      document.querySelectorAll('.ps2-in').forEach(el => { el.addEventListener('input', calcPs2); el.addEventListener('change', calcPs2); });
      calcPs2();
    }, 50);
  </script>
</CalculatorLayout>
