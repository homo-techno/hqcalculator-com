---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Tennis String Tension Calculator";
const description = "Calculate recommended string tension based on string type, racket head size, and playing style for optimal performance.";
const relatedCalcs = [
  { name: "Speed Calculator", url: "/speed-calculator", description: "Speed conversions." },
  { name: "Calories Burned", url: "/calories-burned-calculator", description: "Activity calories." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Percentage", url: "/percentage-calculator", description: "Percentage math." },
  { name: "Average Calculator", url: "/average-calculator", description: "Compute averages." },
  { name: "Heart Rate", url: "/heart-rate-calculator", description: "Heart rate zones." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Tennis String Tension Calculator" keywords="tennis string tension, racket stringing, string type, head size, playing style, string tension guide" breadcrumbs={[{ name: "Tennis String Tension", url: "/tennis-string-tension-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Tennis String Tension Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Get personalized string tension recommendations based on your racket, string type, and playing style.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Racket Head Size</label>
          <select id="ts-head" class="ts-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="93">Midsize (85-93 sq in)</option>
            <option value="98">Mid-Plus (95-100 sq in)</option>
            <option value="102" selected>Oversize (100-104 sq in)</option>
            <option value="110">Super Oversize (107-115 sq in)</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">String Type</label>
          <select id="ts-string" class="ts-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="poly" selected>Polyester (co-poly)</option>
            <option value="nylon">Nylon (synthetic gut)</option>
            <option value="multi">Multifilament</option>
            <option value="natgut">Natural Gut</option>
            <option value="hybrid">Hybrid (poly main + gut/multi cross)</option>
            <option value="kevlar">Kevlar</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">String Gauge</label>
          <select id="ts-gauge" class="ts-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="15">15 (1.35mm) - Thick/Durable</option>
            <option value="16" selected>16 (1.30mm) - Standard</option>
            <option value="16.5">16L (1.25mm) - Thin</option>
            <option value="17">17 (1.20mm) - Very Thin</option>
            <option value="18">18 (1.15mm) - Ultra Thin</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Playing Style</label>
          <select id="ts-style" class="ts-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="power">Power / Big Swings</option>
            <option value="allcourt" selected>All-Court</option>
            <option value="control">Control / Precision</option>
            <option value="spin">Heavy Spin</option>
            <option value="serve">Serve & Volley</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Swing Speed</label>
          <select id="ts-swing" class="ts-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="slow">Slow / Compact</option>
            <option value="medium" selected>Medium</option>
            <option value="fast">Fast / Full</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Arm Comfort Priority</label>
          <select id="ts-comfort" class="ts-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="low">Low (no arm issues)</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High (tennis elbow concern)</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recommended Tension</div>
          <div class="text-5xl font-extrabold font-mono" id="ts-tension">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Low End</div><div class="text-xl font-bold font-mono" id="ts-low">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Mid Range</div><div class="text-xl font-bold font-mono" id="ts-mid">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">High End</div><div class="text-xl font-bold font-mono" id="ts-high">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Tension Effects</h3>
          <div class="text-sm space-y-1" id="ts-effects"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">String Type Notes</h3>
          <p class="text-sm text-text-secondary" id="ts-notes">--</p>
        </div>
      </div>
      <ShareButton calculatorId="tennis-string-tension" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcTS() {
      const headSize = parseFloat((document.getElementById('ts-head') as HTMLSelectElement).value) || 100;
      const stringType = (document.getElementById('ts-string') as HTMLSelectElement).value;
      const gauge = parseFloat((document.getElementById('ts-gauge') as HTMLSelectElement).value) || 16;
      const style = (document.getElementById('ts-style') as HTMLSelectElement).value;
      const swing = (document.getElementById('ts-swing') as HTMLSelectElement).value;
      const comfort = (document.getElementById('ts-comfort') as HTMLSelectElement).value;
      let baseTension = 55;
      if (stringType === 'poly') baseTension = 50;
      else if (stringType === 'nylon') baseTension = 55;
      else if (stringType === 'multi') baseTension = 55;
      else if (stringType === 'natgut') baseTension = 57;
      else if (stringType === 'hybrid') baseTension = 52;
      else if (stringType === 'kevlar') baseTension = 48;
      if (headSize <= 93) baseTension += 3;
      else if (headSize >= 110) baseTension -= 3;
      else if (headSize >= 102) baseTension -= 1;
      if (style === 'power') baseTension -= 3;
      else if (style === 'control') baseTension += 3;
      else if (style === 'spin') baseTension -= 2;
      else if (style === 'serve') baseTension += 1;
      if (swing === 'fast') baseTension += 2;
      else if (swing === 'slow') baseTension -= 2;
      if (gauge >= 17) baseTension += 1;
      else if (gauge <= 15) baseTension -= 1;
      if (comfort === 'high') baseTension -= 3;
      else if (comfort === 'low') baseTension += 1;
      const lowEnd = baseTension - 3;
      const highEnd = baseTension + 3;
      document.getElementById('ts-tension')!.textContent = baseTension + ' lbs';
      document.getElementById('ts-low')!.textContent = lowEnd + ' lbs';
      document.getElementById('ts-mid')!.textContent = baseTension + ' lbs';
      document.getElementById('ts-high')!.textContent = highEnd + ' lbs';
      document.getElementById('ts-effects')!.innerHTML = [
        `<div class="flex justify-between"><span class="text-text-muted">Lower tension effect</span><span class="font-bold">More power, less control, more comfort</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Higher tension effect</span><span class="font-bold">More control, less power, more precision</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">String bed stiffness</span><span class="font-bold">${baseTension > 55 ? 'Firm' : baseTension > 48 ? 'Medium' : 'Soft'}</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Tension loss estimate</span><span class="font-bold">${stringType === 'poly' ? '15-25% in 2-3 weeks' : stringType === 'natgut' ? '5-10% over 1 month' : '10-15% over 2-4 weeks'}</span></div>`,
      ].join('');
      const notes: Record<string, string> = {
        poly: 'Polyester is the most popular among advanced players. String lower than other types. Tension drops quickly. Replace every 2-4 weeks of regular play.',
        nylon: 'Synthetic gut offers good all-around performance and value. Comfortable and holds tension reasonably well. Great for beginners and intermediates.',
        multi: 'Multifilament mimics natural gut feel at a lower cost. Excellent comfort and arm-friendliness. Ideal for players with arm issues.',
        natgut: 'Natural gut is the premium choice. Best feel, power, and tension maintenance. Moisture-sensitive. String slightly higher than synthetic options.',
        hybrid: 'Combine poly mains for spin/durability with gut/multi crosses for comfort. String poly 2 lbs lower than crosses for balance.',
        kevlar: 'Extremely durable but very stiff. String at low tensions. Only recommended for heavy string breakers. Pair with soft cross string.',
      };
      document.getElementById('ts-notes')!.textContent = notes[stringType] || '';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ts-in').forEach(el => { el.addEventListener('input', calcTS); el.addEventListener('change', calcTS); });
      calcTS();
    }, 50);
  </script>
</CalculatorLayout>
