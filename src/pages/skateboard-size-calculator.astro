---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Skateboard Size Calculator";
const description = "Calculate ideal skateboard deck width and length from shoe size and height, with truck width and wheel size recommendations.";
const relatedCalcs = [
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Calories Burned", url: "/calories-burned-calculator", description: "Activity calories." },
  { name: "Body Fat", url: "/body-fat-calculator", description: "Body fat %." },
  { name: "Speed Calculator", url: "/speed-calculator", description: "Speed conversions." },
  { name: "Ideal Weight", url: "/ideal-weight-calculator", description: "Ideal weight." },
  { name: "Percentage", url: "/percentage-calculator", description: "Percentage math." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Skateboard Size Calculator" keywords="skateboard size calculator, deck width, truck width, wheel size, skateboard sizing, shoe size skateboard" breadcrumbs={[{ name: "Skateboard Size", url: "/skateboard-size-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Skateboard Size Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the right skateboard dimensions based on your shoe size, height, and riding style.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Shoe Size (US Men's)</label><input type="number" id="sb-shoe" class="sb-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="4" max="16" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Height (inches)</label><input type="number" id="sb-height" class="sb-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="36" max="84" step="1"></div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Riding Style</label>
          <select id="sb-style" class="sb-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="street">Street / Technical</option>
            <option value="park" selected>Park / Transition</option>
            <option value="vert">Vert / Bowl</option>
            <option value="cruise">Cruising / Transport</option>
            <option value="downhill">Downhill / Speed</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Experience Level</label>
          <select id="sb-exp" class="sb-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="beginner">Beginner</option>
            <option value="intermediate" selected>Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Recommended Deck Width</div>
          <div class="text-5xl font-extrabold font-mono" id="sb-width">--</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Deck Length</div><div class="text-xl font-bold font-mono" id="sb-length">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wheelbase</div><div class="text-xl font-bold font-mono" id="sb-wheelbase">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Truck Width</div><div class="text-xl font-bold font-mono" id="sb-truck">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wheel Size</div><div class="text-xl font-bold font-mono" id="sb-wheel">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wheel Hardness</div><div class="text-xl font-bold font-mono" id="sb-duro">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Complete Setup</h3>
          <div class="text-sm space-y-1" id="sb-setup"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Size Guide</h3>
          <div class="text-xs space-y-1" id="sb-guide"></div>
        </div>
      </div>
      <ShareButton calculatorId="skateboard-size" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcSB() {
      const shoe = parseFloat((document.getElementById('sb-shoe') as HTMLInputElement).value) || 0;
      const height = parseFloat((document.getElementById('sb-height') as HTMLInputElement).value) || 0;
      const style = (document.getElementById('sb-style') as HTMLSelectElement).value;
      const exp = (document.getElementById('sb-exp') as HTMLSelectElement).value;
      if (shoe <= 0) return;
      let deckWidth = 7.75;
      if (shoe <= 6) deckWidth = 7.25;
      else if (shoe <= 7) deckWidth = 7.5;
      else if (shoe <= 8) deckWidth = 7.75;
      else if (shoe <= 9) deckWidth = 8.0;
      else if (shoe <= 10) deckWidth = 8.125;
      else if (shoe <= 11) deckWidth = 8.25;
      else if (shoe <= 12) deckWidth = 8.375;
      else deckWidth = 8.5;
      if (style === 'street') deckWidth -= 0.125;
      else if (style === 'vert') deckWidth += 0.25;
      else if (style === 'cruise') deckWidth += 0.375;
      else if (style === 'downhill') deckWidth += 0.5;
      if (exp === 'beginner') deckWidth += 0.125;
      if (height < 54) deckWidth = Math.min(deckWidth, 7.5);
      else if (height > 74) deckWidth = Math.max(deckWidth, 8.25);
      deckWidth = Math.round(deckWidth * 8) / 8;
      deckWidth = Math.max(7.0, Math.min(9.0, deckWidth));
      let deckLength = 31.0;
      if (deckWidth <= 7.5) deckLength = 29.5;
      else if (deckWidth <= 8.0) deckLength = 31.0;
      else if (deckWidth <= 8.25) deckLength = 31.5;
      else if (deckWidth <= 8.5) deckLength = 32.0;
      else deckLength = 33.0;
      if (style === 'cruise' || style === 'downhill') deckLength += 2;
      const wheelbase = deckLength * 0.44;
      let truckWidth = '';
      if (deckWidth <= 7.75) truckWidth = '129mm (7.6")';
      else if (deckWidth <= 8.0) truckWidth = '139mm (8.0")';
      else if (deckWidth <= 8.25) truckWidth = '144mm (8.25")';
      else if (deckWidth <= 8.5) truckWidth = '149mm (8.5")';
      else truckWidth = '159mm (9.0")';
      let wheelSize = '52-54mm';
      let wheelDuro = '99A-101A';
      if (style === 'street') { wheelSize = '50-53mm'; wheelDuro = '99A-101A'; }
      else if (style === 'park') { wheelSize = '52-56mm'; wheelDuro = '97A-101A'; }
      else if (style === 'vert') { wheelSize = '54-58mm'; wheelDuro = '97A-99A'; }
      else if (style === 'cruise') { wheelSize = '56-65mm'; wheelDuro = '78A-87A'; }
      else if (style === 'downhill') { wheelSize = '65-75mm'; wheelDuro = '78A-82A'; }
      document.getElementById('sb-width')!.textContent = deckWidth.toFixed(3).replace(/0+$/, '').replace(/\.$/, '') + '"';
      document.getElementById('sb-length')!.textContent = deckLength.toFixed(1) + '"';
      document.getElementById('sb-wheelbase')!.textContent = wheelbase.toFixed(1) + '"';
      document.getElementById('sb-truck')!.textContent = truckWidth;
      document.getElementById('sb-wheel')!.textContent = wheelSize;
      document.getElementById('sb-duro')!.textContent = wheelDuro;
      const bearings = style === 'cruise' || style === 'downhill' ? 'ABEC 7 or higher' : 'ABEC 5 or higher';
      const riserPads = style === 'cruise' || style === 'downhill' ? '1/4" - 1/2" risers recommended' : 'Not needed (or 1/8" shock pads)';
      const griptape = 'Standard (Mob, Jessup, etc.)';
      document.getElementById('sb-setup')!.innerHTML = [
        `<div class="flex justify-between"><span class="text-text-muted">Deck</span><span class="font-bold">${deckWidth}" x ${deckLength}"</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Trucks</span><span class="font-bold">${truckWidth}</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Wheels</span><span class="font-bold">${wheelSize} / ${wheelDuro}</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Bearings</span><span class="font-bold">${bearings}</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Riser Pads</span><span class="font-bold">${riserPads}</span></div>`,
        `<div class="flex justify-between"><span class="text-text-muted">Grip Tape</span><span class="font-bold">${griptape}</span></div>`,
      ].join('');
      const guide = [
        { shoe: '4-6', width: '7.0" - 7.5"', age: 'Kids / Youth' },
        { shoe: '6-8', width: '7.5" - 7.875"', age: 'Small Adult' },
        { shoe: '8-10', width: '7.875" - 8.25"', age: 'Average Adult' },
        { shoe: '10-12', width: '8.0" - 8.5"', age: 'Large Adult' },
        { shoe: '12+', width: '8.25" - 9.0"', age: 'XL' },
      ];
      document.getElementById('sb-guide')!.innerHTML =
        '<div class="flex justify-between font-semibold text-text-muted mb-1"><span>Shoe (US)</span><span>Deck Width</span><span>Size</span></div>' +
        guide.map(g => `<div class="flex justify-between"><span>${g.shoe}</span><span class="font-mono">${g.width}</span><span>${g.age}</span></div>`).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('sb-shoe') as HTMLInputElement).value = '10';
      (document.getElementById('sb-height') as HTMLInputElement).value = '70';
      document.querySelectorAll('.sb-in').forEach(el => { el.addEventListener('input', calcSB); el.addEventListener('change', calcSB); });
      calcSB();
    }, 50);
  </script>
</CalculatorLayout>
