---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Resin Art Calculator - Volume, Pigment & Cure";
const description = "Calculate resin volume from mold dimensions, pigment ratio, and cure time by thickness for resin art projects.";
const relatedCalcs = [
  { name: "Volume Calculator", url: "/volume-calculator", description: "Volume calculations." },
  { name: "Area Calculator", url: "/area-calculator", description: "Area calculations." },
  { name: "Paint Calculator", url: "/paint-calculator", description: "Paint coverage." },
  { name: "Concrete Calculator", url: "/concrete-calculator", description: "Concrete volume." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Budget planning." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Resin Art Calculator" keywords="resin art calculator, resin volume, mold dimensions, pigment ratio, cure time, epoxy art" breadcrumbs={[{ name: "Resin Art", url: "/resin-art-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Resin Art Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate resin volume, pigment amounts, and cure time for your resin art molds and projects.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Mold Shape</label>
          <select id="ra-shape" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="rect" selected>Rectangle / Square</option>
            <option value="circle">Circle / Cylinder</option>
            <option value="sphere">Sphere / Half-Sphere</option>
            <option value="coaster">Coaster (Round)</option>
            <option value="tray">Tray (Rect with Rim)</option>
          </select>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Length/Dia (inches)</label><input type="number" id="ra-l" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0.5" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Width (inches)</label><input type="number" id="ra-w" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="0.5" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Depth (inches)</label><input type="number" id="ra-d" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.5" min="0.1" max="6" step="0.1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Resin Type</label>
            <select id="ra-type" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="art" selected>Art / Coating Resin</option>
              <option value="casting">Deep Pour / Casting</option>
              <option value="uv">UV Resin</option>
            </select>
          </div>
          <div><label class="block text-xs font-medium text-text mb-1">Pigment Ratio (%)</label><input type="number" id="ra-pig" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" max="10" step="0.5"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Resin Cost ($/oz)</label><input type="number" id="ra-cost" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1.5" min="0" step="0.25"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Waste Factor (%)</label><input type="number" id="ra-waste" class="ra-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0" max="30" step="5"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Resin Needed</div>
          <div class="text-4xl font-extrabold font-mono" id="ra-result">0 fl oz</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Part A (Resin)</div><div class="text-xl font-bold font-mono" id="ra-parta">0 fl oz</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Part B (Hardener)</div><div class="text-xl font-bold font-mono" id="ra-partb">0 fl oz</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Pigment</div><div class="text-xl font-bold font-mono" id="ra-pigamt">0 ml</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cure Time</div><div class="text-xl font-bold font-mono" id="ra-cure">0 hrs</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Material Cost</div><div class="text-xl font-bold font-mono" id="ra-mcost">$0</div></div>
        </div>
      </div>
      <ShareButton calculatorId="resin-art" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcRA() {
      const shape = (document.getElementById('ra-shape') as HTMLSelectElement).value;
      const l = parseFloat((document.getElementById('ra-l') as HTMLInputElement).value) || 10;
      const w = parseFloat((document.getElementById('ra-w') as HTMLInputElement).value) || 8;
      const d = parseFloat((document.getElementById('ra-d') as HTMLInputElement).value) || 0.5;
      const rtype = (document.getElementById('ra-type') as HTMLSelectElement).value;
      const pig = parseFloat((document.getElementById('ra-pig') as HTMLInputElement).value) || 0;
      const cost = parseFloat((document.getElementById('ra-cost') as HTMLInputElement).value) || 0;
      const waste = parseFloat((document.getElementById('ra-waste') as HTMLInputElement).value) || 10;

      // Volume calculation based on shape
      let volumeCuIn = 0;
      if (shape === 'rect' || shape === 'tray') {
        volumeCuIn = l * w * d;
      } else if (shape === 'circle' || shape === 'coaster') {
        const r = l / 2;
        volumeCuIn = Math.PI * r * r * d;
      } else if (shape === 'sphere') {
        const r = l / 2;
        volumeCuIn = (2 / 3) * Math.PI * r * r * r; // half sphere
      }

      // Convert to fl oz: 1 cu in = 0.554113 fl oz
      const volumeFlOz = volumeCuIn * 0.554113;
      const totalWithWaste = volumeFlOz * (1 + waste / 100);

      // 1:1 mix ratio for most art resins
      const ratio = rtype === 'casting' ? 2 : 1; // casting often 2:1
      const partA = totalWithWaste * ratio / (ratio + 1);
      const partB = totalWithWaste / (ratio + 1);

      // Pigment amount
      const pigmentMl = totalWithWaste * (pig / 100) * 29.5735; // convert oz portion to ml

      // Cure time depends on type and depth
      let cureHrs = 24;
      if (rtype === 'art') {
        cureHrs = d <= 0.25 ? 12 : d <= 0.5 ? 24 : 48;
      } else if (rtype === 'casting') {
        cureHrs = d <= 1 ? 24 : d <= 2 ? 48 : 72;
      } else if (rtype === 'uv') {
        cureHrs = d <= 0.25 ? 0.05 : 0.1; // minutes essentially, but show in hrs
      }

      const materialCost = totalWithWaste * cost;

      document.getElementById('ra-result')!.textContent = totalWithWaste.toFixed(1) + ' fl oz';
      document.getElementById('ra-parta')!.textContent = partA.toFixed(1) + ' fl oz';
      document.getElementById('ra-partb')!.textContent = partB.toFixed(1) + ' fl oz';
      document.getElementById('ra-pigamt')!.textContent = pigmentMl.toFixed(1) + ' ml';
      document.getElementById('ra-cure')!.textContent = cureHrs < 1 ? (cureHrs * 60).toFixed(0) + ' min' : cureHrs + ' hrs';
      document.getElementById('ra-mcost')!.textContent = '$' + materialCost.toFixed(2);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ra-in').forEach(el => { el.addEventListener('input', calcRA); el.addEventListener('change', calcRA); });
      calcRA();
    }, 50);
  </script>
</CalculatorLayout>
