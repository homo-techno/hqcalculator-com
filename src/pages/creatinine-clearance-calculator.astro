---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Creatinine Clearance Calculator - Cockcroft-Gault Equation";
const description = "Calculate creatinine clearance (CrCl) using the Cockcroft-Gault equation with age, weight, serum creatinine, and sex.";
const relatedCalcs = [
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Body Surface Area Calculator", url: "/body-surface-area-calculator", description: "BSA calculation." },
  { name: "Blood Volume Calculator", url: "/blood-volume-calculator", description: "Estimated blood volume." },
  { name: "IV Drip Rate Calculator", url: "/iv-drip-rate-calculator", description: "IV flow rates." },
  { name: "Body Water Calculator", url: "/body-water-calculator", description: "Total body water." },
  { name: "A1C Calculator", url: "/a1c-calculator", description: "HbA1c conversion." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Creatinine Clearance Calculator" keywords="creatinine clearance, cockcroft gault, CrCl, kidney function, GFR, renal" breadcrumbs={[{ name: "Creatinine Clearance", url: "/creatinine-clearance-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Creatinine Clearance Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate kidney function using the Cockcroft-Gault equation.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Sex</label>
          <select id="cc2-sex" class="cc2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="male" selected>Male</option>
            <option value="female">Female</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Age (years)</label><input type="number" id="cc2-age" class="cc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="45" min="18" max="120" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Weight (kg)</label><input type="number" id="cc2-wt" class="cc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="70" min="30" max="300" step="0.1"></div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Serum Creatinine (mg/dL)</label>
          <input type="number" id="cc2-scr" class="cc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1.0" min="0.1" max="20" step="0.1">
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Creatinine Clearance</div>
          <div class="text-5xl font-extrabold font-mono" id="cc2-crcl">0</div>
          <div class="text-sm text-blue-200 mt-1">mL/min</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Kidney Stage</div><div class="text-xl font-bold" id="cc2-stage">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Function</div><div class="text-xl font-bold" id="cc2-func">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Adjusted (BSA)</div><div class="text-xl font-bold" id="cc2-adj">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">CKD Stages</h3>
          <div class="grid grid-cols-2 gap-2 text-sm">
            <div class="flex justify-between"><span>Stage 1 (Normal)</span><span class="font-bold">90+ mL/min</span></div>
            <div class="flex justify-between"><span>Stage 2 (Mild)</span><span class="font-bold">60-89 mL/min</span></div>
            <div class="flex justify-between"><span>Stage 3 (Moderate)</span><span class="font-bold">30-59 mL/min</span></div>
            <div class="flex justify-between"><span>Stage 4 (Severe)</span><span class="font-bold">15-29 mL/min</span></div>
            <div class="flex justify-between"><span>Stage 5 (Failure)</span><span class="font-bold">&lt;15 mL/min</span></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="creatinine-clearance" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Cockcroft-Gault Equation</h2>
      <p>The Cockcroft-Gault equation estimates creatinine clearance: CrCl = [(140 - age) x weight] / (72 x SCr). For females, multiply by 0.85. This is widely used for drug dosing adjustments in renal impairment.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcCrCl() {
      const sex = (document.getElementById('cc2-sex') as HTMLSelectElement).value;
      const age = parseFloat((document.getElementById('cc2-age') as HTMLInputElement).value) || 0;
      const wt = parseFloat((document.getElementById('cc2-wt') as HTMLInputElement).value) || 0;
      const scr = parseFloat((document.getElementById('cc2-scr') as HTMLInputElement).value) || 0.1;
      let crcl = ((140 - age) * wt) / (72 * scr);
      if (sex === 'female') crcl *= 0.85;
      const bsa = Math.sqrt((170 * wt) / 3600);
      const adjusted = crcl * (1.73 / bsa);
      let stage = '';
      let func = '';
      if (crcl >= 90) { stage = 'Stage 1'; func = 'Normal'; }
      else if (crcl >= 60) { stage = 'Stage 2'; func = 'Mild'; }
      else if (crcl >= 30) { stage = 'Stage 3'; func = 'Moderate'; }
      else if (crcl >= 15) { stage = 'Stage 4'; func = 'Severe'; }
      else { stage = 'Stage 5'; func = 'Failure'; }
      document.getElementById('cc2-crcl')!.textContent = crcl.toFixed(1);
      document.getElementById('cc2-stage')!.textContent = stage;
      document.getElementById('cc2-func')!.textContent = func;
      document.getElementById('cc2-adj')!.textContent = adjusted.toFixed(1);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.cc2-in').forEach(el => { el.addEventListener('input', calcCrCl); el.addEventListener('change', calcCrCl); });
      calcCrCl();
    }, 50);
  </script>
</CalculatorLayout>
