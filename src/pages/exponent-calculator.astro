---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Exponent Calculator - Powers & Exponents Calculator";
const description = "Calculate powers and exponents instantly. Find x raised to the power of y, negative exponents, fractional exponents, and scientific notation.";

const relatedCalcs = [
  { name: "Square Root Calculator", url: "/square-root-calculator", description: "Square and cube roots." },
  { name: "Scientific Calculator", url: "/scientific-calculator", description: "Advanced math." },
  { name: "Logarithm Calculator", url: "/logarithm-calculator", description: "Log calculations." },
  { name: "Fraction Calculator", url: "/fraction-calculator", description: "Fraction operations." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
  { name: "GCF Calculator", url: "/gcf-calculator", description: "Greatest common factor." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Exponent Calculator" keywords="exponent calculator, power calculator, x to the y, exponents, powers, scientific notation" breadcrumbs={[{ name: "Exponent Calculator", url: "/exponent-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Exponent Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate any base raised to any power. Supports negative and fractional exponents.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="flex items-end gap-3 justify-center mb-6">
        <div><label class="block text-sm font-medium text-text mb-1">Base (x)</label><input type="number" id="exp-base" class="w-32 px-4 py-3 border border-border rounded-xl text-2xl font-bold text-center" value="2" step="any"></div>
        <div class="relative"><label class="block text-sm font-medium text-text mb-1">Exponent (y)</label><input type="number" id="exp-power" class="w-32 px-4 py-3 border border-border rounded-xl text-2xl font-bold text-center" value="10" step="any"></div>
        <div class="text-2xl font-bold text-text pb-3">=</div>
        <div class="pb-3"><div class="text-3xl font-extrabold text-primary" id="exp-result">1,024</div></div>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 mb-6">
        <div class="p-3 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Decimal</div><div class="text-lg font-bold" id="exp-decimal">1024</div></div>
        <div class="p-3 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Scientific</div><div class="text-lg font-bold" id="exp-scientific">1.024 × 10³</div></div>
        <div class="p-3 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Reciprocal</div><div class="text-lg font-bold" id="exp-reciprocal">0.000977</div></div>
      </div>
      <!-- Quick powers table -->
      <div class="bg-surface-alt rounded-xl p-4 mb-6">
        <h3 class="font-semibold text-text text-sm mb-3">Powers of <span id="exp-table-base">2</span></h3>
        <div class="grid grid-cols-4 gap-2 text-sm" id="exp-powers-table"></div>
      </div>
      <ShareButton calculatorId="exponent" /><FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Exponent Rules</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p>x<sup>a</sup> × x<sup>b</sup> = x<sup>a+b</sup></p>
        <p>x<sup>a</sup> / x<sup>b</sup> = x<sup>a-b</sup></p>
        <p>(x<sup>a</sup>)<sup>b</sup> = x<sup>a×b</sup></p>
        <p>x<sup>0</sup> = 1 (any non-zero number)</p>
        <p>x<sup>-a</sup> = 1 / x<sup>a</sup></p>
        <p>x<sup>1/n</sup> = ⁿ√x (nth root)</p>
      </div>
      <h3 class="text-xl font-semibold text-text mt-8">Frequently Asked Questions</h3>
      <p><strong>What is 0⁰?</strong> Mathematically, 0⁰ is often defined as 1 by convention, though it can be considered indeterminate in some contexts.</p>
      <p><strong>Can exponents be fractions?</strong> Yes! x^(1/2) = √x, x^(1/3) = ∛x, x^(3/2) = x√x.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcExp() {
      const base = parseFloat((document.getElementById('exp-base') as HTMLInputElement).value);
      const power = parseFloat((document.getElementById('exp-power') as HTMLInputElement).value);
      if (isNaN(base) || isNaN(power)) return;
      const result = Math.pow(base, power);
      const isWhole = Number.isFinite(result) && Math.abs(result) < 1e15 && result === Math.round(result);
      document.getElementById('exp-result')!.textContent = isWhole ? Math.round(result).toLocaleString() : (Number.isFinite(result) ? result.toPrecision(6) : 'Infinity');
      document.getElementById('exp-decimal')!.textContent = Number.isFinite(result) ? result.toLocaleString(undefined, { maximumFractionDigits: 8 }) : String(result);
      document.getElementById('exp-scientific')!.textContent = Number.isFinite(result) && result !== 0 ? result.toExponential(3) : String(result);
      const recip = result !== 0 ? 1 / result : Infinity;
      document.getElementById('exp-reciprocal')!.textContent = Number.isFinite(recip) ? recip.toPrecision(6) : String(recip);
      // Powers table
      document.getElementById('exp-table-base')!.textContent = String(base);
      const table = document.getElementById('exp-powers-table')!;
      table.innerHTML = Array.from({ length: 12 }, (_, i) => {
        const p = i + 1; const v = Math.pow(base, p);
        const display = Math.abs(v) < 1e12 && v === Math.round(v) ? Math.round(v).toLocaleString() : v.toExponential(2);
        return `<div class="p-1.5 ${p === power ? 'bg-primary/10 rounded font-bold text-primary' : ''}"><span class="text-text-muted">${base}<sup>${p}</sup> = </span>${display}</div>`;
      }).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.getElementById('exp-base')!.addEventListener('input', calcExp);
      document.getElementById('exp-power')!.addEventListener('input', calcExp);
      calcExp();
    }, 50);
  </script>
</CalculatorLayout>
