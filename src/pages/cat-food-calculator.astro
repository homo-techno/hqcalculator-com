---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Cat Food Calculator - Daily Calories, Wet & Dry Food Portions";
const description = "Calculate daily calorie needs for cats based on weight, age, activity level, and indoor/outdoor status. Get wet vs dry food portion recommendations.";
const relatedCalcs = [
  { name: "Dog Food Calculator", url: "/dog-food-calculator", description: "Daily food portions for dogs." },
  { name: "Cat Age Calculator", url: "/cat-age-calculator", description: "Convert cat years to human years." },
  { name: "Pet Food Calculator", url: "/pet-food-calculator", description: "General pet food portions." },
  { name: "Animal Calorie Calculator", url: "/animal-calorie-calculator", description: "RER and MER for animals." },
  { name: "Pet Cost Calculator", url: "/pet-cost-calculator", description: "Annual pet ownership costs." },
  { name: "Pet Insurance Calculator", url: "/pet-insurance-calculator", description: "Estimate pet insurance premiums." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Cat Food Calculator" keywords="cat food calculator, cat calories, cat portion size, wet food, dry food, indoor cat diet" breadcrumbs={[{ name: "Cat Food", url: "/cat-food-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Cat Food Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate daily calories, wet vs dry food portions, and feeding guidelines for your cat.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Cat Weight (lbs)</label>
            <input type="number" id="cf-weight" class="cf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="1" max="40" step="0.5">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Age Stage</label>
            <select id="cf-age" class="cf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="kitten">Kitten (0-12 months)</option>
              <option value="adult" selected>Adult (1-10 years)</option>
              <option value="senior">Senior (10+ years)</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Activity Level</label>
            <select id="cf-activity" class="cf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="low">Low (sedentary)</option>
              <option value="moderate" selected>Moderate</option>
              <option value="high">High (very active)</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Indoor/Outdoor</label>
            <select id="cf-indoor" class="cf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="indoor" selected>Indoor Only</option>
              <option value="outdoor">Outdoor Access</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Spayed/Neutered?</label>
            <select id="cf-fixed" class="cf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="yes" selected>Yes</option>
              <option value="no">No (intact)</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Food Type</label>
            <select id="cf-type" class="cf-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="dry" selected>Dry Food</option>
              <option value="wet">Wet Food</option>
              <option value="mixed">Mixed (50/50)</option>
            </select>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Daily Calories Needed</div>
          <div class="text-5xl font-extrabold font-mono" id="cf-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Dry Food / Day</div><div class="text-xl font-bold font-mono" id="cf-dry">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wet Food / Day</div><div class="text-xl font-bold font-mono" id="cf-wet">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">RER (kcal)</div><div class="text-xl font-bold font-mono" id="cf-rer">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cups Dry / Day</div><div class="text-xl font-bold font-mono" id="cf-cups">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cans Wet / Day</div><div class="text-xl font-bold font-mono" id="cf-cans">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Cost Est.</div><div class="text-xl font-bold font-mono" id="cf-cost">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="cat-food" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcCF() {
      const weight = parseFloat((document.getElementById('cf-weight') as HTMLInputElement).value) || 0;
      const age = (document.getElementById('cf-age') as HTMLSelectElement).value;
      const activity = (document.getElementById('cf-activity') as HTMLSelectElement).value;
      const indoor = (document.getElementById('cf-indoor') as HTMLSelectElement).value;
      const fixed = (document.getElementById('cf-fixed') as HTMLSelectElement).value;
      const foodType = (document.getElementById('cf-type') as HTMLSelectElement).value;

      const weightKg = weight * 0.4536;
      const rer = 70 * Math.pow(weightKg, 0.75);

      const ageFactors: Record<string, number> = { kitten: 2.5, adult: 1.2, senior: 1.0 };
      const actFactors: Record<string, number> = { low: 0.8, moderate: 1.0, high: 1.2 };
      const indoorFactor = indoor === 'indoor' ? 0.9 : 1.1;
      const fixedFactor = fixed === 'yes' ? 0.9 : 1.0;

      const dailyCal = rer * (ageFactors[age] || 1.2) * (actFactors[activity] || 1.0) * indoorFactor * fixedFactor;

      // Dry food ~350 kcal/cup (~100g), Wet food ~100 kcal per 5.5oz can
      const dryGrams = dailyCal / 3.5;
      const wetGrams = dailyCal / 0.9;
      const dryCups = dailyCal / 350;
      const wetCans = dailyCal / 100;

      let dryDisplay = '--';
      let wetDisplay = '--';
      let cupsDisplay = '--';
      let cansDisplay = '--';
      let monthlyCost = 0;

      if (foodType === 'dry') {
        dryDisplay = Math.round(dryGrams) + 'g';
        cupsDisplay = dryCups.toFixed(1);
        monthlyCost = dryCups * 30 * 0.35;
      } else if (foodType === 'wet') {
        wetDisplay = Math.round(wetGrams) + 'g';
        cansDisplay = wetCans.toFixed(1);
        monthlyCost = wetCans * 30 * 1.2;
      } else {
        const halfCal = dailyCal / 2;
        dryDisplay = Math.round(halfCal / 3.5) + 'g';
        wetDisplay = Math.round(halfCal / 0.9) + 'g';
        cupsDisplay = (halfCal / 350).toFixed(1);
        cansDisplay = (halfCal / 100).toFixed(1);
        monthlyCost = (halfCal / 350 * 30 * 0.35) + (halfCal / 100 * 30 * 1.2);
      }

      document.getElementById('cf-result')!.textContent = Math.round(dailyCal) + ' kcal';
      document.getElementById('cf-dry')!.textContent = dryDisplay;
      document.getElementById('cf-wet')!.textContent = wetDisplay;
      document.getElementById('cf-rer')!.textContent = Math.round(rer).toString();
      document.getElementById('cf-cups')!.textContent = cupsDisplay;
      document.getElementById('cf-cans')!.textContent = cansDisplay;
      document.getElementById('cf-cost')!.textContent = '$' + monthlyCost.toFixed(0);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.cf-in').forEach(el => { el.addEventListener('input', calcCF); el.addEventListener('change', calcCF); });
      calcCF();
    }, 50);
  </script>
</CalculatorLayout>
