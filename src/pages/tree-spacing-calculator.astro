---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Tree Spacing Calculator - Trees Per Acre & Planting Density";
const description = "Calculate trees per acre from row and column spacing. Get planting density, area coverage, and total seedling count for your plantation.";
const relatedCalcs = [
  { name: "Garden Spacing", url: "/garden-spacing-calculator", description: "Plant spacing for gardens." },
  { name: "Area Calculator", url: "/area-calculator", description: "Calculate area of shapes." },
  { name: "Fence Post Calculator", url: "/fence-post-calculator", description: "Post spacing and count." },
  { name: "Seed Calculator", url: "/seed-calculator", description: "Seed quantities for planting." },
  { name: "Irrigation Calculator", url: "/irrigation-calculator", description: "Irrigation water needs." },
  { name: "Fertilizer Calculator", url: "/fertilizer-calculator", description: "Fertilizer application rates." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Tree Spacing Calculator" keywords="tree spacing calculator, trees per acre, planting density, tree plantation, reforestation spacing" breadcrumbs={[{ name: "Tree Spacing", url: "/tree-spacing-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Tree Spacing Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate trees per acre from spacing dimensions, total seedlings needed, and area coverage.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Row Spacing (feet)</label>
            <input type="number" id="ts3-row" class="ts3-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="10" min="1" max="100" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Tree Spacing in Row (feet)</label>
            <input type="number" id="ts3-col" class="ts3-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="10" min="1" max="100" step="1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Total Area (acres)</label>
            <input type="number" id="ts3-area" class="ts3-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="5" min="0.1" max="10000" step="0.1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Mortality Buffer (%)</label>
            <input type="number" id="ts3-mort" class="ts3-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0" max="50" step="1">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Trees Per Acre</div>
          <div class="text-5xl font-extrabold font-mono" id="ts3-tpa">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Total Trees</div>
            <div class="text-xl font-bold font-mono" id="ts3-total">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">With Buffer</div>
            <div class="text-xl font-bold font-mono" id="ts3-buffer">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Sq Ft Per Tree</div>
            <div class="text-xl font-bold font-mono" id="ts3-sqft">--</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Area (hectares)</div>
            <div class="text-xl font-bold font-mono" id="ts3-ha">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Trees/Hectare</div>
            <div class="text-xl font-bold font-mono" id="ts3-tph">--</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="tree-spacing" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcTS3() {
      const rowSpacing = parseFloat((document.getElementById('ts3-row') as HTMLInputElement).value) || 10;
      const colSpacing = parseFloat((document.getElementById('ts3-col') as HTMLInputElement).value) || 10;
      const area = parseFloat((document.getElementById('ts3-area') as HTMLInputElement).value) || 5;
      const mort = parseFloat((document.getElementById('ts3-mort') as HTMLInputElement).value) || 0;
      const sqftPerTree = rowSpacing * colSpacing;
      const tpa = 43560 / sqftPerTree;
      const totalTrees = Math.round(tpa * area);
      const withBuffer = Math.round(totalTrees * (1 + mort / 100));
      const hectares = area * 0.404686;
      const tph = Math.round(tpa * 2.47105);
      document.getElementById('ts3-tpa')!.textContent = Math.round(tpa).toLocaleString();
      document.getElementById('ts3-total')!.textContent = totalTrees.toLocaleString();
      document.getElementById('ts3-buffer')!.textContent = withBuffer.toLocaleString();
      document.getElementById('ts3-sqft')!.textContent = sqftPerTree.toFixed(0);
      document.getElementById('ts3-ha')!.textContent = hectares.toFixed(2);
      document.getElementById('ts3-tph')!.textContent = tph.toLocaleString();
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ts3-in').forEach(el => { el.addEventListener('input', calcTS3); el.addEventListener('change', calcTS3); });
      calcTS3();
    }, 50);
  </script>
</CalculatorLayout>
