---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Litigation Cost Calculator - Total Legal Battle Expenses";
const description = "Estimate total litigation costs from discovery through trial and appeals, including attorney fees, depositions, expert witnesses, and court costs.";
const relatedCalcs = [
  { name: "Legal Fee Calculator", url: "/legal-fee-calculator", description: "Lawyer cost estimates." },
  { name: "Court Fee Calculator", url: "/court-fee-calculator", description: "Court filing fees." },
  { name: "Arbitration Cost Calculator", url: "/arbitration-cost-calculator", description: "ADR alternative." },
  { name: "Legal Billing Calculator", url: "/legal-billing-calculator", description: "Track legal hours." },
  { name: "Small Claims Calculator", url: "/small-claims-calculator", description: "Small claims option." },
  { name: "Contract Value Calculator", url: "/contract-value-calculator", description: "Contract disputes." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="Litigation Cost Calculator" keywords="litigation cost calculator, trial costs, discovery costs, deposition fees, expert witness, attorney fees, legal expenses, lawsuit cost" breadcrumbs={[{ name: "Litigation Cost", url: "/litigation-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Litigation Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate total litigation expenses from filing through trial and potential appeal.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Case Type</label>
          <select id="ltc-case" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="commercial" selected>Commercial / Business</option>
            <option value="personal-injury">Personal Injury</option>
            <option value="employment">Employment</option>
            <option value="ip">Intellectual Property</option>
            <option value="real-estate">Real Estate</option>
            <option value="medical-malpractice">Medical Malpractice</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Case Complexity</label>
          <select id="ltc-complexity" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="simple">Simple (few issues, limited discovery)</option>
            <option value="moderate" selected>Moderate (standard discovery)</option>
            <option value="complex">Complex (extensive discovery, experts)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Expected Phase</label>
          <select id="ltc-phase" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="settlement">Early settlement (pre-discovery)</option>
            <option value="discovery" selected>Through discovery</option>
            <option value="trial">Through trial</option>
            <option value="appeal">Through appeal</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Depositions</label>
          <input type="number" id="ltc-depos" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="5" min="0" max="50" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Expert Witnesses Needed</label>
          <input type="number" id="ltc-experts" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0" max="10" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Attorney Hourly Rate ($)</label>
          <input type="number" id="ltc-rate" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="350" min="100" max="1500" step="25">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">E-Discovery Required?</label>
          <select id="ltc-ediscovery" class="ltc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="none" selected>No e-discovery</option>
            <option value="basic">Basic e-discovery</option>
            <option value="extensive">Extensive e-discovery</option>
          </select>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Total Litigation Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="ltc-total"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Attorney Fees</div>
            <div class="text-xl font-bold text-secondary" id="ltc-atty"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Discovery Costs</div>
            <div class="text-xl font-bold" id="ltc-discovery"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Expert Witnesses</div>
            <div class="text-xl font-bold text-orange-600" id="ltc-expert-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Court & Filing Fees</div>
            <div class="text-xl font-bold" id="ltc-court"></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="litigation-cost" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Understanding Litigation Costs</h2>
      <p>Litigation is expensive. A moderately complex commercial case through trial typically costs $100,000-$500,000 per side. Attorney fees make up the largest portion (60-70%), followed by discovery costs, expert witnesses, and court fees. Most cases settle before trial, but preparation costs accrue regardless.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Cost-Saving Strategies</h3>
      <p>Consider mediation or arbitration as alternatives. Early case assessment helps predict costs and outcomes. Phased budgeting allows you to evaluate whether to continue at each stage. E-discovery costs can be managed with targeted search terms and cooperation agreements.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + Math.round(n).toLocaleString();

    function calcLTC() {
      const caseType = (document.getElementById('ltc-case') as HTMLSelectElement).value;
      const complexity = (document.getElementById('ltc-complexity') as HTMLSelectElement).value;
      const phase = (document.getElementById('ltc-phase') as HTMLSelectElement).value;
      const depos = parseInt((document.getElementById('ltc-depos') as HTMLInputElement).value) || 0;
      const experts = parseInt((document.getElementById('ltc-experts') as HTMLInputElement).value) || 0;
      const hourlyRate = parseFloat((document.getElementById('ltc-rate') as HTMLInputElement).value) || 350;
      const ediscovery = (document.getElementById('ltc-ediscovery') as HTMLSelectElement).value;

      // Estimated attorney hours by phase
      const phaseHours: Record<string, Record<string, number>> = {
        simple: { settlement: 30, discovery: 100, trial: 250, appeal: 350 },
        moderate: { settlement: 60, discovery: 250, trial: 600, appeal: 850 },
        complex: { settlement: 100, discovery: 500, trial: 1200, appeal: 1700 }
      };

      const hours = (phaseHours[complexity] && phaseHours[complexity][phase]) || 250;
      const attyFees = hours * hourlyRate;

      // Deposition costs ($2,000-$5,000 each including court reporter, transcript, video)
      const depoRate = complexity === 'complex' ? 4500 : complexity === 'simple' ? 2000 : 3000;
      const depoCost = depos * depoRate;

      // E-discovery costs
      const ediscoveryCosts: Record<string, number> = { none: 0, basic: 15000, extensive: 75000 };
      const ediscoveryCost = ediscoveryCosts[ediscovery] || 0;

      const discoveryCost = depoCost + ediscoveryCost;

      // Expert witness costs ($15,000-$50,000 each for report + testimony)
      const expertRate = caseType === 'medical-malpractice' ? 40000 : caseType === 'ip' ? 35000 : 25000;
      const expertCost = experts * expertRate;

      // Court and filing fees
      let courtFees = 500;
      if (phase === 'trial') courtFees = 2500;
      if (phase === 'appeal') courtFees = 4000;
      if (caseType === 'ip') courtFees *= 1.5;

      const total = attyFees + discoveryCost + expertCost + courtFees;

      document.getElementById('ltc-total')!.textContent = fmt(total);
      document.getElementById('ltc-atty')!.textContent = fmt(attyFees);
      document.getElementById('ltc-discovery')!.textContent = fmt(discoveryCost);
      document.getElementById('ltc-expert-cost')!.textContent = fmt(expertCost);
      document.getElementById('ltc-court')!.textContent = fmt(courtFees);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.ltc-in').forEach(el => {
        el.addEventListener('input', calcLTC);
        el.addEventListener('change', calcLTC);
      });
      calcLTC();
    }, 50);
  </script>
</CalculatorLayout>
