---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Court Fee Calculator - Estimate Filing Fees by Case Type";
const description = "Calculate court filing fees based on case type, jurisdiction level, and state. Estimate total costs for civil, criminal, family, and appellate court filings.";
const relatedCalcs = [
  { name: "Legal Fee Calculator", url: "/legal-fee-calculator", description: "Estimate lawyer fees." },
  { name: "Small Claims Calculator", url: "/small-claims-calculator", description: "Small claims costs." },
  { name: "Litigation Cost Calculator", url: "/litigation-cost-calculator", description: "Total litigation costs." },
  { name: "Divorce Cost Calculator", url: "/divorce-cost-calculator", description: "Divorce expenses." },
  { name: "Bail Bond Calculator", url: "/bail-bond-calculator", description: "Bail bond costs." },
  { name: "Probate Cost Calculator", url: "/probate-cost-calculator", description: "Probate fees." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="Court Fee Calculator" keywords="court fee calculator, filing fees, court costs, civil filing fee, family court fees, appellate court, jurisdiction fees" breadcrumbs={[{ name: "Court Fee", url: "/court-fee-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Court Fee Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate court filing fees by case type and jurisdiction level.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Case Type</label>
          <select id="cfe-case" class="cfe-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="civil-limited">Civil - Limited (under $25,000)</option>
            <option value="civil-unlimited" selected>Civil - Unlimited ($25,000+)</option>
            <option value="family">Family Law (divorce, custody)</option>
            <option value="small-claims">Small Claims</option>
            <option value="probate">Probate</option>
            <option value="criminal">Criminal Defense Motion</option>
            <option value="eviction">Eviction / Unlawful Detainer</option>
            <option value="name-change">Name Change</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Court Level</label>
          <select id="cfe-level" class="cfe-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="state-trial" selected>State Trial Court</option>
            <option value="state-appeal">State Appellate Court</option>
            <option value="federal-district">Federal District Court</option>
            <option value="federal-appeal">Federal Circuit Court of Appeals</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">State Fee Level</label>
          <select id="cfe-state" class="cfe-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="low">Low-fee state</option>
            <option value="medium" selected>Medium-fee state</option>
            <option value="high">High-fee state (CA, NY, etc.)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Additional Motions</label>
          <input type="number" id="cfe-motions" class="cfe-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" min="0" max="20" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Jury Trial Requested?</label>
          <select id="cfe-jury" class="cfe-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Fee Waiver Eligibility</label>
          <select id="cfe-waiver" class="cfe-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="none" selected>Not eligible</option>
            <option value="partial">Partial waiver (50%)</option>
            <option value="full">Full fee waiver</option>
          </select>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Total Court Fees</div>
          <div class="text-5xl font-extrabold font-mono" id="cfe-total"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Filing Fee</div>
            <div class="text-xl font-bold text-secondary" id="cfe-filing"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Motion Fees</div>
            <div class="text-xl font-bold" id="cfe-motion-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Jury Fee</div>
            <div class="text-xl font-bold text-orange-600" id="cfe-jury-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Waiver Discount</div>
            <div class="text-xl font-bold text-green-600" id="cfe-waiver-amt"></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="court-fee" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Understanding Court Filing Fees</h2>
      <p>Court filing fees vary significantly by case type, jurisdiction, and state. Civil unlimited cases typically cost $300-$500 to file in state court, while federal court filings run $350-$405. Family law filings generally cost $200-$450. Fee waivers are available for those who qualify based on income.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Additional Court Costs</h3>
      <p>Beyond the initial filing fee, you may face motion fees ($40-$80 each), jury fees ($150-$600), and service of process costs ($50-$100). Appellate filings carry separate and often higher fees.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + Math.round(n).toLocaleString();

    function calcCFE() {
      const caseType = (document.getElementById('cfe-case') as HTMLSelectElement).value;
      const courtLevel = (document.getElementById('cfe-level') as HTMLSelectElement).value;
      const stateLevel = (document.getElementById('cfe-state') as HTMLSelectElement).value;
      const motions = parseInt((document.getElementById('cfe-motions') as HTMLInputElement).value) || 0;
      const jury = (document.getElementById('cfe-jury') as HTMLSelectElement).value;
      const waiver = (document.getElementById('cfe-waiver') as HTMLSelectElement).value;

      const baseFees: Record<string, number> = {
        'civil-limited': 225, 'civil-unlimited': 435, 'family': 355,
        'small-claims': 75, 'probate': 465, 'criminal': 60,
        'eviction': 240, 'name-change': 435
      };

      const levelMultipliers: Record<string, number> = {
        'state-trial': 1.0, 'state-appeal': 1.4,
        'federal-district': 1.15, 'federal-appeal': 1.3
      };

      const stateMultipliers: Record<string, number> = { low: 0.7, medium: 1.0, high: 1.35 };

      let filingFee = (baseFees[caseType] || 350) * (levelMultipliers[courtLevel] || 1) * (stateMultipliers[stateLevel] || 1);

      if (courtLevel === 'federal-district') filingFee = Math.max(filingFee, 405);
      if (courtLevel === 'federal-appeal') filingFee = Math.max(filingFee, 505);

      const motionFee = motions * (courtLevel.includes('federal') ? 55 : 65);
      const juryFee = jury === 'yes' ? (courtLevel.includes('federal') ? 0 : 200) : 0;

      let subtotal = filingFee + motionFee + juryFee;
      let discount = 0;
      if (waiver === 'partial') discount = subtotal * 0.5;
      else if (waiver === 'full') discount = subtotal;

      const total = subtotal - discount;

      document.getElementById('cfe-total')!.textContent = fmt(total);
      document.getElementById('cfe-filing')!.textContent = fmt(filingFee);
      document.getElementById('cfe-motion-cost')!.textContent = fmt(motionFee);
      document.getElementById('cfe-jury-cost')!.textContent = fmt(juryFee);
      document.getElementById('cfe-waiver-amt')!.textContent = '-' + fmt(discount);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.cfe-in').forEach(el => {
        el.addEventListener('input', calcCFE);
        el.addEventListener('change', calcCFE);
      });
      calcCFE();
    }, 50);
  </script>
</CalculatorLayout>
