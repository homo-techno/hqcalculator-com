---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Conveyor Speed Calculator - Belt Speed, Throughput & Motor Power";
const description = "Calculate conveyor belt speed, throughput, and motor power requirements for material handling systems. Optimize conveyor design for your production line.";
const relatedCalcs = [
  { name: "Gearbox Ratio Calculator", url: "/gearbox-ratio-calculator", description: "Select gearbox ratio for conveyor motor matching." },
  { name: "Robot Speed Calculator", url: "/robot-speed-calculator", description: "Optimize robot cycle time and throughput." },
  { name: "Servo Motor Calculator", url: "/servo-motor-calculator", description: "Size servo motors for conveyor drive systems." },
  { name: "Linear Actuator Calculator", url: "/linear-actuator-calculator", description: "Calculate linear actuator force and speed." },
  { name: "Stepper Motor Calculator", url: "/stepper-motor-calculator", description: "Calculate stepper motor torque and speed." },
  { name: "Industrial Robot ROI Calculator", url: "/industrial-robot-roi-calculator", description: "Calculate automation investment ROI." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Conveyor Speed Calculator" keywords="conveyor speed calculator, belt speed, conveyor throughput, conveyor motor power, material handling, conveyor design, belt conveyor" breadcrumbs={[{ name: "Conveyor Speed Calculator", url: "/conveyor-speed-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Conveyor Speed Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate conveyor belt speed, throughput capacity, and required motor power for material handling applications.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-6">
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Drive Pulley Diameter (mm)</label>
          <input type="number" id="cvs-pulley-dia" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="200" min="50" step="10">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Motor Speed (RPM)</label>
          <input type="number" id="cvs-motor-rpm" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1750" min="1" step="10">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Gear Reduction Ratio</label>
          <input type="number" id="cvs-gear-ratio" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="20" min="1" step="1">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Belt Length (m)</label>
          <input type="number" id="cvs-belt-length" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="1" step="0.5">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Total Load on Belt (kg)</label>
          <input type="number" id="cvs-load" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="200" min="0" step="10">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Belt + Roller Mass (kg)</label>
          <input type="number" id="cvs-belt-mass" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50" min="1" step="5">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Friction Coefficient</label>
          <input type="number" id="cvs-friction" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.035" min="0.01" step="0.005">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Incline Angle (degrees)</label>
          <input type="number" id="cvs-incline" class="cvs-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0" min="0" max="45" step="1">
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm font-medium opacity-80 mb-1">Belt Speed</div>
          <div id="cvs-result-speed" class="text-3xl sm:text-4xl font-extrabold">--</div>
          <div class="text-sm opacity-80 mt-1">m/min</div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Belt Speed</div>
            <div id="cvs-speed-ms" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">m/s</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Pulley RPM</div>
            <div id="cvs-pulley-rpm" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">RPM</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Required Motor Power</div>
            <div id="cvs-power" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">kW</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Belt Tension</div>
            <div id="cvs-tension" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">N</div>
          </div>
        </div>

        <ShareButton />
        <FeedbackWidget />
      </div>
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcCVS() {
      const pulleyDia = parseFloat((document.getElementById('cvs-pulley-dia') as HTMLInputElement).value) || 200;
      const motorRPM = parseFloat((document.getElementById('cvs-motor-rpm') as HTMLInputElement).value) || 1750;
      const gearRatio = parseFloat((document.getElementById('cvs-gear-ratio') as HTMLInputElement).value) || 20;
      const beltLength = parseFloat((document.getElementById('cvs-belt-length') as HTMLInputElement).value) || 10;
      const load = parseFloat((document.getElementById('cvs-load') as HTMLInputElement).value) || 200;
      const beltMass = parseFloat((document.getElementById('cvs-belt-mass') as HTMLInputElement).value) || 50;
      const friction = parseFloat((document.getElementById('cvs-friction') as HTMLInputElement).value) || 0.035;
      const incline = parseFloat((document.getElementById('cvs-incline') as HTMLInputElement).value) || 0;

      const pulleyRPM = motorRPM / gearRatio;
      const pulleyCircum = Math.PI * pulleyDia / 1000;
      const beltSpeedMMin = pulleyRPM * pulleyCircum;
      const beltSpeedMS = beltSpeedMMin / 60;

      const g = 9.81;
      const inclineRad = incline * Math.PI / 180;
      const totalMass = load + beltMass;
      const frictionForce = friction * totalMass * g * Math.cos(inclineRad) * beltLength;
      const gravityForce = load * g * Math.sin(inclineRad) * beltLength;
      const totalForce = frictionForce + gravityForce;
      const power = totalForce * beltSpeedMS / 1000;

      document.getElementById('cvs-result-speed')!.textContent = beltSpeedMMin.toFixed(1);
      document.getElementById('cvs-speed-ms')!.textContent = beltSpeedMS.toFixed(2);
      document.getElementById('cvs-pulley-rpm')!.textContent = pulleyRPM.toFixed(1);
      document.getElementById('cvs-power')!.textContent = (power > 0 ? power : 0).toFixed(3);
      document.getElementById('cvs-tension')!.textContent = totalForce.toFixed(1);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.cvs-in').forEach(el => { el.addEventListener('input', calcCVS); el.addEventListener('change', calcCVS); });
      calcCVS();
    }, 50);
  </script>
</CalculatorLayout>
