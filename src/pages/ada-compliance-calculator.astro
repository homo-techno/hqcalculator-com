---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "ADA Compliance Calculator - Commercial Building Renovation Costs";
const description = "Estimate ADA compliance renovation costs for commercial buildings including ramps, restrooms, doorways, signage, and parking accessibility modifications.";
const relatedCalcs = [
  { name: "OSHA Penalty Calculator", url: "/osha-penalty-calculator", description: "OSHA violation costs." },
  { name: "Compliance Cost Calculator", url: "/compliance-cost-calculator", description: "Compliance budgeting." },
  { name: "Workers Comp Calculator", url: "/workers-comp-calculator", description: "Workers comp premiums." },
  { name: "Incorporation Calculator", url: "/incorporation-calculator", description: "Business formation." },
  { name: "Regulatory Compliance", url: "/regulatory-compliance-calculator", description: "Regulatory budget." },
  { name: "Litigation Cost Calculator", url: "/litigation-cost-calculator", description: "ADA lawsuit costs." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="ADA Compliance Calculator" keywords="ADA compliance calculator, ADA renovation, accessibility, commercial building, wheelchair ramp, accessible restroom, ADA requirements" breadcrumbs={[{ name: "ADA Compliance", url: "/ada-compliance-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">ADA Compliance Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate costs to bring your commercial building into ADA compliance.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Building Type</label>
          <select id="ada-building" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="office" selected>Office Building</option>
            <option value="retail">Retail Store</option>
            <option value="restaurant">Restaurant</option>
            <option value="medical">Medical / Dental Office</option>
            <option value="hotel">Hotel / Lodging</option>
            <option value="education">School / Education</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Building Square Footage</label>
          <input type="number" id="ada-sqft" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="5000" min="500" max="500000" step="500">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Entrance Accessibility</label>
          <select id="ada-entrance" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="compliant">Already compliant</option>
            <option value="ramp" selected>Needs ramp / grade-level entrance</option>
            <option value="automatic-doors">Needs automatic doors</option>
            <option value="both">Needs ramp + automatic doors</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Restroom Renovation</label>
          <select id="ada-restroom" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="none">Already compliant</option>
            <option value="minor" selected>Minor modifications (grab bars, etc.)</option>
            <option value="major">Major renovation (enlarge stall, fixtures)</option>
            <option value="full">Full ADA restroom build-out</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Parking Modifications</label>
          <select id="ada-parking" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="none">Already compliant</option>
            <option value="signage" selected>Signage + striping only</option>
            <option value="spaces">Add accessible spaces + signage</option>
            <option value="full">Full lot reconfiguration</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Interior Modifications</label>
          <select id="ada-interior" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="none">Already compliant</option>
            <option value="minor" selected>Minor (doorway widening, thresholds)</option>
            <option value="moderate">Moderate (counters, aisles, signage)</option>
            <option value="major">Major (elevator, hallways, floor plan)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Region Cost Factor</label>
          <select id="ada-region" class="ada-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="0.8">Low-cost region</option>
            <option value="1.0" selected>Average</option>
            <option value="1.3">High-cost metro (NYC, SF, etc.)</option>
          </select>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Renovation Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="ada-total"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Entrance Work</div>
            <div class="text-xl font-bold text-secondary" id="ada-entrance-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Restroom Work</div>
            <div class="text-xl font-bold" id="ada-restroom-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Interior / Parking</div>
            <div class="text-xl font-bold text-orange-600" id="ada-other-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Tax Credit (50%)</div>
            <div class="text-xl font-bold text-green-600" id="ada-credit"></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="ada-compliance" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Understanding ADA Compliance Costs</h2>
      <p>The Americans with Disabilities Act requires commercial buildings to be accessible to people with disabilities. Common modifications include wheelchair ramps ($1,500-$8,000), accessible restrooms ($3,000-$15,000), doorway widening ($500-$2,500 per door), and parking lot modifications ($500-$5,000). Costs vary significantly by building age, type, and region.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Tax Credits and Deductions</h3>
      <p>Small businesses (under $1M revenue or fewer than 30 employees) can claim a tax credit of 50% of ADA expenditures between $250-$10,250 (max credit $5,000). All businesses can deduct up to $15,000 annually for barrier removal. These incentives can offset a significant portion of compliance costs.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + Math.round(n).toLocaleString();

    function calcADA() {
      const entrance = (document.getElementById('ada-entrance') as HTMLSelectElement).value;
      const restroom = (document.getElementById('ada-restroom') as HTMLSelectElement).value;
      const parking = (document.getElementById('ada-parking') as HTMLSelectElement).value;
      const interior = (document.getElementById('ada-interior') as HTMLSelectElement).value;
      const regionFactor = parseFloat((document.getElementById('ada-region') as HTMLSelectElement).value) || 1.0;
      const sqft = parseInt((document.getElementById('ada-sqft') as HTMLInputElement).value) || 5000;

      // Entrance costs
      const entranceCosts: Record<string, number> = {
        compliant: 0, ramp: 5000, 'automatic-doors': 4000, both: 8500
      };
      const entranceCost = (entranceCosts[entrance] || 0) * regionFactor;

      // Restroom costs
      const restroomCosts: Record<string, number> = {
        none: 0, minor: 2500, major: 8000, full: 15000
      };
      const restroomCost = (restroomCosts[restroom] || 0) * regionFactor;

      // Parking costs
      const parkingCosts: Record<string, number> = {
        none: 0, signage: 800, spaces: 3000, full: 8000
      };
      const parkingCost = (parkingCosts[parking] || 0) * regionFactor;

      // Interior costs (scale with building size)
      const interiorBase: Record<string, number> = {
        none: 0, minor: 3000, moderate: 10000, major: 50000
      };
      let interiorCost = (interiorBase[interior] || 0) * regionFactor;
      if (sqft > 5000) interiorCost *= (1 + (sqft - 5000) / 20000);

      const otherCost = parkingCost + interiorCost;
      const total = entranceCost + restroomCost + otherCost;

      // Tax credit (small business): 50% of costs between $250-$10,250
      const eligibleCost = Math.min(total, 10250) - 250;
      const taxCredit = eligibleCost > 0 ? Math.min(eligibleCost * 0.5, 5000) : 0;

      document.getElementById('ada-total')!.textContent = fmt(total);
      document.getElementById('ada-entrance-cost')!.textContent = fmt(entranceCost);
      document.getElementById('ada-restroom-cost')!.textContent = fmt(restroomCost);
      document.getElementById('ada-other-cost')!.textContent = fmt(otherCost);
      document.getElementById('ada-credit')!.textContent = '-' + fmt(taxCredit);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.ada-in').forEach(el => {
        el.addEventListener('input', calcADA);
        el.addEventListener('change', calcADA);
      });
      calcADA();
    }, 50);
  </script>
</CalculatorLayout>
