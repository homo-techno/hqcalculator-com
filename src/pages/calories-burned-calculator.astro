---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Calories Burned Calculator - Exercise Calorie Counter 2026";
const description = "Calculate calories burned by activity type and duration. Over 50 exercises including walking, running, cycling, swimming, and more.";

const relatedCalcs = [
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Daily calorie needs." },
  { name: "TDEE Calculator", url: "/tdee-calculator", description: "Total daily energy." },
  { name: "BMR Calculator", url: "/bmr-calculator", description: "Basal metabolic rate." },
  { name: "Weight Loss Calculator", url: "/weight-loss-calculator", description: "Weight loss plan." },
  { name: "Macro Calculator", url: "/macro-calculator", description: "Macronutrient split." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body Mass Index." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Calories Burned Calculator"
  keywords="calories burned calculator, exercise calorie calculator, MET calculator, activity calories, workout calories, walking calories"
  breadcrumbs={[{ name: "Calories Burned", url: "/calories-burned-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Calories Burned Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate calories burned during exercise based on activity, duration, and body weight.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div>
          <div class="mb-5">
            <label class="block text-sm font-medium text-text mb-1">Body Weight</label>
            <div class="flex gap-2">
              <input type="number" id="cb-weight" class="flex-1 px-4 py-3 border border-border rounded-xl text-lg" value="154" min="50" max="500">
              <select id="cb-unit" class="px-3 py-3 border border-border rounded-xl">
                <option value="lbs">lbs</option>
                <option value="kg">kg</option>
              </select>
            </div>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-text mb-1">Duration</label>
            <div class="flex gap-2 items-center">
              <input type="number" id="cb-duration" class="flex-1 px-4 py-3 border border-border rounded-xl text-lg" value="30" min="1" max="600">
              <span class="text-text-muted font-semibold">minutes</span>
            </div>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-text mb-2">Activity Category</label>
            <select id="cb-category" class="w-full px-4 py-3 border border-border rounded-xl text-lg mb-3">
              <option value="cardio">Cardio & Running</option>
              <option value="sports">Sports</option>
              <option value="gym">Gym & Weights</option>
              <option value="daily">Daily Activities</option>
              <option value="water">Water Sports</option>
            </select>
          </div>

          <div class="mb-5">
            <label class="block text-sm font-medium text-text mb-2">Activity</label>
            <div class="grid grid-cols-1 gap-2 max-h-64 overflow-y-auto" id="cb-activities"></div>
          </div>
        </div>

        <div class="space-y-3">
          <div class="p-6 bg-primary rounded-2xl text-white text-center">
            <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Calories Burned</div>
            <div class="text-5xl font-extrabold" id="cb-calories">0</div>
            <div class="text-sm text-blue-200 mt-1" id="cb-activity-name">Select an activity</div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Per Minute</div>
              <div class="text-xl font-bold" id="cb-per-min">0</div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Per Hour</div>
              <div class="text-xl font-bold" id="cb-per-hour">0</div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">MET Value</div>
              <div class="text-xl font-bold" id="cb-met">0</div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Fat Equivalent</div>
              <div class="text-xl font-bold" id="cb-fat">0 g</div>
            </div>
          </div>

          <!-- Comparison -->
          <div class="p-4 bg-surface-alt rounded-xl">
            <h3 class="font-semibold text-sm text-text mb-2">That's Equivalent To</h3>
            <div class="space-y-1 text-sm text-text-secondary" id="cb-equiv"></div>
          </div>
        </div>
      </div>

      <ShareButton calculatorId="calories-burned" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How Calories Burned Are Calculated</h2>
      <p>Calories burned are estimated using MET (Metabolic Equivalent of Task) values, which represent the energy cost of physical activities as a multiple of resting metabolic rate.</p>

      <div class="bg-surface-alt rounded-xl p-4 my-4 text-center font-mono">Calories = MET × Weight (kg) × Duration (hours)</div>

      <h3 class="text-xl font-semibold text-text mt-8">What Are MET Values?</h3>
      <ul>
        <li><strong>1 MET:</strong> Energy used at rest (sitting quietly)</li>
        <li><strong>3-6 METs:</strong> Moderate activity (walking, light cycling)</li>
        <li><strong>6+ METs:</strong> Vigorous activity (running, competitive sports)</li>
        <li>MET values are standardized by the Compendium of Physical Activities</li>
      </ul>

      <h3 class="text-xl font-semibold text-text mt-8">Frequently Asked Questions</h3>
      <p><strong>How accurate is this?</strong> MET-based estimates are within 15-20% for most people. Actual calories depend on fitness level, age, genetics, and exercise intensity.</p>
      <p><strong>Do heavier people burn more calories?</strong> Yes. Moving more mass requires more energy. A 200 lb person burns significantly more calories than a 130 lb person doing the same activity.</p>
      <p><strong>How many calories to lose 1 pound?</strong> You need a deficit of approximately 3,500 calories to lose 1 pound of fat.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    type Activity = { name: string; met: number };

    const activities: Record<string, Activity[]> = {
      cardio: [
        { name: 'Walking (2 mph, slow)', met: 2.5 },
        { name: 'Walking (3 mph, moderate)', met: 3.5 },
        { name: 'Walking (4 mph, brisk)', met: 5.0 },
        { name: 'Hiking', met: 6.0 },
        { name: 'Jogging (5 mph)', met: 8.0 },
        { name: 'Running (6 mph)', met: 9.8 },
        { name: 'Running (7 mph)', met: 11.0 },
        { name: 'Running (8 mph)', met: 11.8 },
        { name: 'Running (10 mph)', met: 14.5 },
        { name: 'Cycling (10-12 mph)', met: 6.0 },
        { name: 'Cycling (14-16 mph)', met: 10.0 },
        { name: 'Cycling (> 20 mph)', met: 16.0 },
        { name: 'Stationary Bike (moderate)', met: 7.0 },
        { name: 'Stationary Bike (vigorous)', met: 10.5 },
        { name: 'Elliptical Trainer', met: 5.0 },
        { name: 'Rowing Machine (moderate)', met: 7.0 },
        { name: 'Rowing Machine (vigorous)', met: 12.0 },
        { name: 'Jump Rope (moderate)', met: 11.8 },
        { name: 'Stair Climbing', met: 9.0 },
      ],
      sports: [
        { name: 'Basketball (game)', met: 8.0 },
        { name: 'Soccer (casual)', met: 7.0 },
        { name: 'Soccer (competitive)', met: 10.0 },
        { name: 'Tennis (singles)', met: 8.0 },
        { name: 'Tennis (doubles)', met: 5.0 },
        { name: 'Volleyball', met: 4.0 },
        { name: 'Golf (walking, carrying clubs)', met: 4.5 },
        { name: 'Badminton', met: 5.5 },
        { name: 'Table Tennis', met: 4.0 },
        { name: 'Boxing (sparring)', met: 9.0 },
        { name: 'Martial Arts', met: 10.3 },
        { name: 'Wrestling', met: 6.0 },
        { name: 'Ice Skating', met: 7.0 },
        { name: 'Skiing (downhill)', met: 6.0 },
        { name: 'Skiing (cross-country)', met: 9.0 },
      ],
      gym: [
        { name: 'Weight Training (light)', met: 3.5 },
        { name: 'Weight Training (vigorous)', met: 6.0 },
        { name: 'Circuit Training', met: 8.0 },
        { name: 'CrossFit', met: 8.0 },
        { name: 'Pilates', met: 3.0 },
        { name: 'Yoga (Hatha)', met: 2.5 },
        { name: 'Yoga (Power/Vinyasa)', met: 4.0 },
        { name: 'Stretching', met: 2.3 },
        { name: 'Calisthenics (push-ups, etc.)', met: 8.0 },
        { name: 'HIIT Training', met: 8.0 },
      ],
      daily: [
        { name: 'Cooking', met: 2.5 },
        { name: 'Cleaning House', met: 3.5 },
        { name: 'Gardening', met: 4.0 },
        { name: 'Mowing Lawn (push mower)', met: 5.5 },
        { name: 'Shoveling Snow', met: 6.0 },
        { name: 'Moving Furniture', met: 6.0 },
        { name: 'Playing with Children', met: 4.0 },
        { name: 'Walking Dog', met: 3.0 },
        { name: 'Shopping', met: 2.3 },
        { name: 'Dancing (social)', met: 4.5 },
      ],
      water: [
        { name: 'Swimming (leisure)', met: 6.0 },
        { name: 'Swimming Laps (moderate)', met: 7.0 },
        { name: 'Swimming Laps (vigorous)', met: 10.0 },
        { name: 'Water Aerobics', met: 5.5 },
        { name: 'Kayaking', met: 5.0 },
        { name: 'Surfing', met: 3.0 },
        { name: 'Water Polo', met: 10.0 },
        { name: 'Paddleboarding', met: 6.0 },
      ],
    };

    let selectedActivity: Activity | null = null;

    function renderActivities() {
      const cat = (document.getElementById('cb-category') as HTMLSelectElement).value;
      const list = activities[cat] || [];
      const container = document.getElementById('cb-activities')!;
      container.innerHTML = list.map((a, i) =>
        `<button class="cb-act-btn flex justify-between items-center px-4 py-2.5 border rounded-xl text-left text-sm hover:bg-surface-alt transition ${i === 0 ? 'border-primary bg-blue-50' : 'border-border'}" data-idx="${i}">
          <span class="font-medium">${a.name}</span>
          <span class="text-text-muted text-xs">${a.met} MET</span>
        </button>`
      ).join('');

      container.querySelectorAll('.cb-act-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          container.querySelectorAll('.cb-act-btn').forEach(b => { b.classList.remove('border-primary', 'bg-blue-50'); b.classList.add('border-border'); });
          btn.classList.remove('border-border'); btn.classList.add('border-primary', 'bg-blue-50');
          selectedActivity = list[parseInt((btn as HTMLElement).dataset.idx || '0')];
          calcBurned();
        });
      });

      selectedActivity = list[0] || null;
      calcBurned();
    }

    function calcBurned() {
      if (!selectedActivity) return;

      let weightKg = parseFloat((document.getElementById('cb-weight') as HTMLInputElement).value) || 70;
      const unit = (document.getElementById('cb-unit') as HTMLSelectElement).value;
      if (unit === 'lbs') weightKg = weightKg / 2.2046;

      const duration = parseFloat((document.getElementById('cb-duration') as HTMLInputElement).value) || 30;
      const met = selectedActivity.met;
      const hours = duration / 60;
      const calories = met * weightKg * hours;
      const perMin = calories / duration;
      const perHour = met * weightKg;
      const fatGrams = calories / 7700 * 1000; // 7700 cal per kg of fat

      document.getElementById('cb-calories')!.textContent = Math.round(calories).toLocaleString();
      document.getElementById('cb-activity-name')!.textContent = selectedActivity.name;
      document.getElementById('cb-per-min')!.textContent = perMin.toFixed(1);
      document.getElementById('cb-per-hour')!.textContent = Math.round(perHour).toLocaleString();
      document.getElementById('cb-met')!.textContent = String(met);
      document.getElementById('cb-fat')!.textContent = fatGrams.toFixed(0) + ' g';

      // Equivalents
      const equiv = [
        { item: 'Slices of pizza', cal: 285 },
        { item: 'Cans of soda', cal: 140 },
        { item: 'Chocolate bars', cal: 230 },
        { item: 'Apples', cal: 95 },
        { item: 'Beers', cal: 150 },
        { item: 'Donuts', cal: 300 },
      ];
      document.getElementById('cb-equiv')!.innerHTML = equiv.map(e =>
        `<div class="flex justify-between"><span>${e.item}</span><span class="font-semibold">${(calories / e.cal).toFixed(1)}</span></div>`
      ).join('');

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.getElementById('cb-category')!.addEventListener('change', renderActivities);
      ['cb-weight', 'cb-duration'].forEach(id => document.getElementById(id)!.addEventListener('input', calcBurned));
      document.getElementById('cb-unit')!.addEventListener('change', calcBurned);
      renderActivities();
    }, 50);
  </script>
</CalculatorLayout>
