---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Pythagorean Theorem Calculator - a² + b² = c²";
const description = "Solve for any side of a right triangle using the Pythagorean theorem. Enter two sides to find the third.";
const relatedCalcs = [
  { name: "Triangle Calculator", url: "/triangle-calculator", description: "Triangles." },
  { name: "Area Calculator", url: "/area-calculator", description: "2D areas." },
  { name: "Square Root", url: "/square-root-calculator", description: "Square roots." },
  { name: "Slope Calculator", url: "/slope-calculator", description: "Line slope." },
  { name: "Distance Calculator", url: "/midpoint-calculator", description: "Midpoint." },
  { name: "Length Converter", url: "/length-converter", description: "Length units." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Pythagorean Theorem Calculator" keywords="pythagorean theorem, a2 b2 c2, right triangle, hypotenuse, pythagorean calculator" breadcrumbs={[{ name: "Pythagorean Theorem", url: "/pythagorean-theorem-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Pythagorean Theorem Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">a² + b² = c² — enter any two sides to find the third.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Solve For</label>
          <select id="py-solve" class="w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="c" selected>c (hypotenuse)</option>
            <option value="a">a (leg)</option>
            <option value="b">b (leg)</option>
          </select>
        </div>
        <div class="grid grid-cols-2 gap-3" id="py-inputs">
          <div><label class="block text-xs font-medium text-text mb-1">Side a</label><input type="number" id="py-a" class="w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="3" min="0" step="0.1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Side b</label><input type="number" id="py-b" class="w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="4" min="0" step="0.1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1" id="py-label">c (hypotenuse) =</div>
          <div class="text-5xl font-extrabold font-mono" id="py-result">5</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Area</div><div class="text-xl font-bold" id="py-area">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Perimeter</div><div class="text-xl font-bold" id="py-perim">0</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Step-by-Step</h3>
          <div class="font-mono text-sm space-y-1" id="py-steps"></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Common Pythagorean Triples</h3>
          <div class="grid grid-cols-4 gap-2 text-sm text-center">
            <span class="font-mono font-bold">3, 4, 5</span>
            <span class="font-mono font-bold">5, 12, 13</span>
            <span class="font-mono font-bold">8, 15, 17</span>
            <span class="font-mono font-bold">7, 24, 25</span>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="pythagorean" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">The Pythagorean Theorem</h2>
      <p>For any right triangle: <strong>a² + b² = c²</strong>, where c is the hypotenuse (longest side, opposite the right angle).</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPyth() {
      const solve = (document.getElementById('py-solve') as HTMLSelectElement).value;
      const a = parseFloat((document.getElementById('py-a') as HTMLInputElement).value) || 0;
      const b = parseFloat((document.getElementById('py-b') as HTMLInputElement).value) || 0;
      let result: number, sA: number, sB: number, sC: number;
      const steps: string[] = [];
      if (solve === 'c') {
        result = Math.sqrt(a*a + b*b); sA=a; sB=b; sC=result;
        steps.push(`c² = a² + b²`, `c² = ${a}² + ${b}² = ${a*a} + ${b*b} = ${a*a+b*b}`, `c = √${a*a+b*b} = ${result.toFixed(6)}`);
        document.getElementById('py-label')!.textContent = 'c (hypotenuse) =';
      } else if (solve === 'a') {
        // a² = c² - b², treat py-a as c, py-b as b
        const c = a, bv = b;
        result = Math.sqrt(c*c - bv*bv); sA=result; sB=bv; sC=c;
        steps.push(`a² = c² − b²`, `a² = ${c}² − ${bv}² = ${c*c} − ${bv*bv} = ${c*c-bv*bv}`, `a = √${c*c-bv*bv} = ${result.toFixed(6)}`);
        document.getElementById('py-label')!.textContent = 'a (leg) =';
      } else {
        const aV = a, c = b;
        result = Math.sqrt(c*c - aV*aV); sA=aV; sB=result; sC=c;
        steps.push(`b² = c² − a²`, `b² = ${c}² − ${aV}² = ${c*c} − ${aV*aV} = ${c*c-aV*aV}`, `b = √${c*c-aV*aV} = ${result.toFixed(6)}`);
        document.getElementById('py-label')!.textContent = 'b (leg) =';
      }
      document.getElementById('py-result')!.textContent = isNaN(result) ? 'Invalid' : result.toFixed(4);
      document.getElementById('py-area')!.textContent = (0.5 * sA * sB).toFixed(4);
      document.getElementById('py-perim')!.textContent = (sA + sB + sC).toFixed(4);
      document.getElementById('py-steps')!.innerHTML = steps.map(s => `<div>${s}</div>`).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { ['py-a','py-b'].forEach(id => document.getElementById(id)!.addEventListener('input', calcPyth)); document.getElementById('py-solve')!.addEventListener('change', calcPyth); calcPyth(); }, 50);
  </script>
</CalculatorLayout>
