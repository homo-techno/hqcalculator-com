---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Triangle Calculator - Solve Any Triangle";
const description = "Calculate triangle sides, angles, area, and perimeter. Supports SSS, SAS, ASA, and AAS configurations.";
const relatedCalcs = [
  { name: "Pythagorean Theorem", url: "/pythagorean-theorem-calculator", description: "Pythagorean theorem." },
  { name: "Area Calculator", url: "/area-calculator", description: "2D areas." },
  { name: "Circle Calculator", url: "/circle-calculator", description: "Circles." },
  { name: "Slope Calculator", url: "/slope-calculator", description: "Line slope." },
  { name: "Volume Calculator", url: "/volume-calculator", description: "3D volumes." },
  { name: "Length Converter", url: "/length-converter", description: "Length units." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Triangle Calculator" keywords="triangle calculator, triangle solver, area of triangle, triangle angles, triangle sides" breadcrumbs={[{ name: "Triangle Calculator", url: "/triangle-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Triangle Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Enter 3 known values to solve the triangle.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="space-y-3">
          <h3 class="font-semibold text-text">Enter 3 sides (SSS)</h3>
          <div class="grid grid-cols-3 gap-3">
            <div><label class="block text-xs font-medium text-text mb-1">Side a</label><input type="number" id="tr-a" class="w-full px-3 py-3 border border-border rounded-xl text-lg" value="5" min="0" step="0.1"></div>
            <div><label class="block text-xs font-medium text-text mb-1">Side b</label><input type="number" id="tr-b" class="w-full px-3 py-3 border border-border rounded-xl text-lg" value="7" min="0" step="0.1"></div>
            <div><label class="block text-xs font-medium text-text mb-1">Side c</label><input type="number" id="tr-c" class="w-full px-3 py-3 border border-border rounded-xl text-lg" value="9" min="0" step="0.1"></div>
          </div>
        </div>
        <div class="space-y-3">
          <div class="p-6 bg-primary rounded-2xl text-white text-center">
            <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Area</div>
            <div class="text-4xl font-extrabold" id="tr-area">0</div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Perimeter</div><div class="text-xl font-bold" id="tr-perim">0</div></div>
            <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Type</div><div class="text-xl font-bold" id="tr-type">-</div></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl">
            <h3 class="font-semibold text-sm text-text mb-3">Angles</h3>
            <div class="grid grid-cols-3 gap-3 text-center">
              <div><div class="text-xs text-text-muted">Angle A</div><div class="text-lg font-bold" id="tr-A">0°</div></div>
              <div><div class="text-xs text-text-muted">Angle B</div><div class="text-lg font-bold" id="tr-B">0°</div></div>
              <div><div class="text-xs text-text-muted">Angle C</div><div class="text-lg font-bold" id="tr-C">0°</div></div>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Height (to side c)</div><div class="text-xl font-bold" id="tr-height">0</div></div>
            <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Inradius</div><div class="text-xl font-bold" id="tr-inradius">0</div></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="triangle" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Triangle Formulas</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p>Heron's formula: A = √(s(s−a)(s−b)(s−c)) where s = (a+b+c)/2</p>
        <p>Law of Cosines: c² = a² + b² − 2ab·cos(C)</p>
      </div>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    const toDeg = (r: number) => r * 180 / Math.PI;
    function calcTri() {
      const a = parseFloat((document.getElementById('tr-a') as HTMLInputElement).value) || 0;
      const b = parseFloat((document.getElementById('tr-b') as HTMLInputElement).value) || 0;
      const c = parseFloat((document.getElementById('tr-c') as HTMLInputElement).value) || 0;
      if (a <= 0 || b <= 0 || c <= 0 || a+b<=c || a+c<=b || b+c<=a) {
        document.getElementById('tr-area')!.textContent = 'Invalid'; return;
      }
      const s = (a+b+c)/2;
      const area = Math.sqrt(s*(s-a)*(s-b)*(s-c));
      const A = toDeg(Math.acos((b*b+c*c-a*a)/(2*b*c)));
      const B = toDeg(Math.acos((a*a+c*c-b*b)/(2*a*c)));
      const C = 180 - A - B;
      const height = c > 0 ? 2 * area / c : 0;
      const inradius = area / s;
      let type = 'Scalene';
      if (a===b && b===c) type = 'Equilateral';
      else if (a===b || b===c || a===c) type = 'Isosceles';
      if (Math.abs(A-90)<0.1 || Math.abs(B-90)<0.1 || Math.abs(C-90)<0.1) type += ' Right';
      document.getElementById('tr-area')!.textContent = area.toFixed(4);
      document.getElementById('tr-perim')!.textContent = (a+b+c).toFixed(2);
      document.getElementById('tr-type')!.textContent = type;
      document.getElementById('tr-A')!.textContent = A.toFixed(2) + '°';
      document.getElementById('tr-B')!.textContent = B.toFixed(2) + '°';
      document.getElementById('tr-C')!.textContent = C.toFixed(2) + '°';
      document.getElementById('tr-height')!.textContent = height.toFixed(4);
      document.getElementById('tr-inradius')!.textContent = inradius.toFixed(4);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { ['tr-a','tr-b','tr-c'].forEach(id => document.getElementById(id)!.addEventListener('input', calcTri)); calcTri(); }, 50);
  </script>
</CalculatorLayout>
