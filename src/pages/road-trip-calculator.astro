---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Road Trip Calculator - Fuel Cost & Trip Budget Planner 2026";
const description = "Calculate total fuel cost, cost per mile, and plan your road trip budget including gas, tolls, hotel nights, and food for your next drive.";

const relatedCalcs = [
  { name: "Flight Time Calculator", url: "/flight-time-calculator", description: "Estimate flight times." },
  { name: "Towing Capacity Calculator", url: "/towing-capacity-calculator", description: "Check tow capacity." },
  { name: "Tire Size Calculator", url: "/tire-size-calculator", description: "Compare tire sizes." },
  { name: "Car Payment Calculator", url: "/car-payment-calculator", description: "Monthly car payment." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Monthly budget planner." },
  { name: "Tip Calculator", url: "/tip-percentage-calculator", description: "Calculate tips." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Road Trip Calculator"
  keywords="road trip calculator, fuel cost calculator, trip budget, gas cost, driving cost, road trip planner"
  breadcrumbs={[{ name: "Road Trip Calculator", url: "/road-trip-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Road Trip Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Plan your road trip budget by estimating fuel costs, tolls, lodging, and food expenses.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label for="rt-distance" class="block text-sm font-medium text-text mb-1">Total Distance (miles)</label>
          <input type="number" id="rt-distance" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="500" min="0" step="10" />
        </div>
        <div>
          <label for="rt-mpg" class="block text-sm font-medium text-text mb-1">Vehicle MPG</label>
          <input type="number" id="rt-mpg" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="28" min="1" max="100" step="1" />
        </div>
        <div>
          <label for="rt-gas" class="block text-sm font-medium text-text mb-1">Gas Price ($/gallon)</label>
          <input type="number" id="rt-gas" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="3.50" min="0" step="0.10" />
        </div>
        <div>
          <label for="rt-tolls" class="block text-sm font-medium text-text mb-1">Estimated Tolls ($)</label>
          <input type="number" id="rt-tolls" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="20" min="0" step="5" />
        </div>
        <div>
          <label for="rt-hotels" class="block text-sm font-medium text-text mb-1">Hotel Nights</label>
          <input type="number" id="rt-hotels" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="1" min="0" step="1" />
        </div>
        <div>
          <label for="rt-hotelcost" class="block text-sm font-medium text-text mb-1">Average Hotel Cost ($/night)</label>
          <input type="number" id="rt-hotelcost" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="120" min="0" step="10" />
        </div>
        <div>
          <label for="rt-food" class="block text-sm font-medium text-text mb-1">Daily Food Budget ($/day)</label>
          <input type="number" id="rt-food" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="50" min="0" step="5" />
        </div>
        <div>
          <label for="rt-travelers" class="block text-sm font-medium text-text mb-1">Number of Travelers</label>
          <input type="number" id="rt-travelers" class="rt-in w-full border border-border rounded-lg px-3 py-2" value="2" min="1" max="10" step="1" />
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Trip Budget</div>
          <div class="text-5xl font-extrabold font-mono" id="rt-result">$0</div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Fuel Cost</div>
            <div class="text-xl font-bold" id="rt-fuel">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Cost Per Mile</div>
            <div class="text-xl font-bold" id="rt-permile">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Lodging Total</div>
            <div class="text-xl font-bold" id="rt-lodging">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Food Total</div>
            <div class="text-xl font-bold" id="rt-foodtotal">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Gallons Needed</div>
            <div class="text-xl font-bold" id="rt-gallons">0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Cost Per Person</div>
            <div class="text-xl font-bold" id="rt-perperson">$0</div>
          </div>
        </div>
      </div>

      <ShareButton calculatorId="road-trip" />
      <FeedbackWidget />
    </div>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcRT() {
      const distance = parseFloat((document.getElementById('rt-distance') as HTMLInputElement).value) || 0;
      const mpg = parseFloat((document.getElementById('rt-mpg') as HTMLInputElement).value) || 1;
      const gasPrice = parseFloat((document.getElementById('rt-gas') as HTMLInputElement).value) || 0;
      const tolls = parseFloat((document.getElementById('rt-tolls') as HTMLInputElement).value) || 0;
      const hotelNights = parseInt((document.getElementById('rt-hotels') as HTMLInputElement).value) || 0;
      const hotelCost = parseFloat((document.getElementById('rt-hotelcost') as HTMLInputElement).value) || 0;
      const foodDaily = parseFloat((document.getElementById('rt-food') as HTMLInputElement).value) || 0;
      const travelers = parseInt((document.getElementById('rt-travelers') as HTMLInputElement).value) || 1;

      const gallons = distance / mpg;
      const fuelCost = gallons * gasPrice;
      const lodging = hotelNights * hotelCost;
      const travelDays = Math.max(1, hotelNights + 1);
      const foodTotal = foodDaily * travelDays * travelers;
      const totalBudget = fuelCost + tolls + lodging + foodTotal;
      const costPerMile = distance > 0 ? totalBudget / distance : 0;
      const costPerPerson = travelers > 0 ? totalBudget / travelers : 0;

      const fmt = (n: number) => '$' + n.toFixed(2);

      (document.getElementById('rt-result') as HTMLElement).textContent = '$' + Math.round(totalBudget).toLocaleString('en-US');
      (document.getElementById('rt-fuel') as HTMLElement).textContent = fmt(fuelCost);
      (document.getElementById('rt-permile') as HTMLElement).textContent = fmt(costPerMile);
      (document.getElementById('rt-lodging') as HTMLElement).textContent = fmt(lodging);
      (document.getElementById('rt-foodtotal') as HTMLElement).textContent = fmt(foodTotal);
      (document.getElementById('rt-gallons') as HTMLElement).textContent = gallons.toFixed(1);
      (document.getElementById('rt-perperson') as HTMLElement).textContent = fmt(costPerPerson);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.rt-in').forEach(el => {
        el.addEventListener('input', calcRT);
        el.addEventListener('change', calcRT);
      });
      calcRT();
    }, 50);
  </script>
</CalculatorLayout>
