---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Mosaic Grout Calculator - Quantity for Tile Size & Spacing";
const description = "Calculate the amount of grout needed for mosaic projects based on tile size, spacing, depth, and project area.";
const relatedCalcs = [
  { name: "Stained Glass Calculator", url: "/stained-glass-calculator", description: "Stained glass materials." },
  { name: "Ceramic Tile Weight Calculator", url: "/ceramic-tile-weight-calculator", description: "Tile weight calculations." },
  { name: "Glass Cutting Calculator", url: "/glass-cutting-calculator", description: "Glass cutting layouts." },
  { name: "Clay Shrinkage Calculator", url: "/clay-shrinkage-calculator", description: "Clay shrinkage rates." },
  { name: "Square Footage Calculator", url: "/square-footage-calculator", description: "Area calculations." },
  { name: "Pottery Pricing Calculator", url: "/pottery-pricing-calculator", description: "Price craft projects." },
];
---
<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Mosaic Grout Calculator"
  keywords="mosaic grout, grout calculator, tile grout, mosaic tile, grout quantity, grout coverage, mosaic supplies"
  breadcrumbs={[{ name: "Mosaic Grout Calculator", url: "/mosaic-grout-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Mosaic Grout Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate how much grout you need for your mosaic project based on tile size, joint width, and project dimensions.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="grid grid-cols-2 gap-4 mb-5">
        <div>
          <label class="block text-sm font-medium text-text mb-2">Project Width (inches)</label>
          <input type="number" id="mg2-width" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="24" min="1" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Project Height (inches)</label>
          <input type="number" id="mg2-height" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="24" min="1" step="1">
        </div>
      </div>

      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Tile / Tessera Size</label>
        <select id="mg2-tile" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
          <option value="0.375">3/8" (micro mosaic)</option>
          <option value="0.5">1/2" (small mosaic)</option>
          <option value="0.75" selected>3/4" (standard mosaic)</option>
          <option value="1">1" (standard)</option>
          <option value="2">2" (large mosaic)</option>
          <option value="custom">Custom size</option>
        </select>
      </div>

      <div id="mg2-custom-tile" class="mb-5 hidden">
        <label class="block text-sm font-medium text-text mb-2">Custom Tile Size (inches)</label>
        <input type="number" id="mg2-custom-size" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0.25" max="6" step="0.25">
      </div>

      <div class="grid grid-cols-2 gap-4 mb-5">
        <div>
          <label class="block text-sm font-medium text-text mb-2">Grout Joint Width (inches)</label>
          <input type="number" id="mg2-joint" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.0625" min="0.03125" max="0.5" step="0.03125">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Tile Thickness (inches)</label>
          <input type="number" id="mg2-depth" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.25" min="0.125" max="0.75" step="0.0625">
        </div>
      </div>

      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Waste Factor (%)</label>
        <input type="number" id="mg2-waste" class="mg2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0" max="30" step="5">
      </div>

      <!-- Primary Result -->
      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Grout Needed</div>
        <div class="text-4xl font-extrabold" id="mg2-grout">--</div>
        <div class="text-sm text-blue-200 mt-1">(including waste)</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Project Area</div>
          <div class="text-xl font-bold" id="mg2-area">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Tiles Needed</div>
          <div class="text-xl font-bold" id="mg2-tiles">--</div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Grout Coverage</div>
          <div class="text-xl font-bold" id="mg2-coverage">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Adhesive Needed</div>
          <div class="text-xl font-bold" id="mg2-adhesive">--</div>
        </div>
      </div>

      <ShareButton calculatorId="mosaic-grout" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Mosaic Grout Calculation</h2>
      <p>The amount of grout needed depends on tile size, joint width, and tile thickness. Smaller tiles with wider joints need proportionally more grout since there is more joint area per square foot.</p>
      <h3 class="text-xl font-semibold text-text mt-8">Grout Tips for Mosaics</h3>
      <ul>
        <li>Use unsanded grout for joints under 1/8" wide</li>
        <li>Use sanded grout for joints 1/8" and wider</li>
        <li>Mix grout to peanut butter consistency</li>
        <li>Apply with a rubber grout float at 45-degree angle</li>
        <li>Clean excess grout with a damp sponge within 15-20 minutes</li>
      </ul>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcMG2() {
      const projW = parseFloat((document.getElementById('mg2-width') as HTMLInputElement).value) || 24;
      const projH = parseFloat((document.getElementById('mg2-height') as HTMLInputElement).value) || 24;
      const tileSelect = (document.getElementById('mg2-tile') as HTMLSelectElement).value;
      const joint = parseFloat((document.getElementById('mg2-joint') as HTMLInputElement).value) || 0.0625;
      const depth = parseFloat((document.getElementById('mg2-depth') as HTMLInputElement).value) || 0.25;
      const wastePct = (parseFloat((document.getElementById('mg2-waste') as HTMLInputElement).value) || 0) / 100;

      document.getElementById('mg2-custom-tile')!.classList.toggle('hidden', tileSelect !== 'custom');

      let tileSize: number;
      if (tileSelect === 'custom') {
        tileSize = parseFloat((document.getElementById('mg2-custom-size') as HTMLInputElement).value) || 1;
      } else {
        tileSize = parseFloat(tileSelect) || 0.75;
      }

      const projectArea = projW * projH; // sq inches
      const projectAreaSqFt = projectArea / 144;

      // Tiles per row/column
      const tilePlusJoint = tileSize + joint;
      const tilesAcross = Math.floor(projW / tilePlusJoint);
      const tilesDown = Math.floor(projH / tilePlusJoint);
      const totalTiles = tilesAcross * tilesDown;

      // Grout volume: total joint length * joint width * depth
      // Horizontal joints: (tilesDown + 1) rows * projW width
      // Vertical joints: (tilesAcross + 1) columns * projH height
      // Simplified: grout area = total area - tile area, then multiply by depth
      const tileArea = totalTiles * tileSize * tileSize;
      const groutArea = projectArea - tileArea;
      const groutVolCuIn = groutArea * depth;

      // Convert to lbs: grout is about 100 lbs per cu ft (0.058 lbs per cu in)
      const groutLbs = groutVolCuIn * 0.058;
      const groutWithWaste = groutLbs * (1 + wastePct);

      // Display
      let groutDisplay = '';
      if (groutWithWaste < 1) {
        groutDisplay = (groutWithWaste * 16).toFixed(1) + ' oz';
      } else {
        groutDisplay = groutWithWaste.toFixed(2) + ' lbs';
      }

      document.getElementById('mg2-grout')!.textContent = groutDisplay;
      document.getElementById('mg2-area')!.textContent = projectAreaSqFt.toFixed(2) + ' sq ft';
      document.getElementById('mg2-tiles')!.textContent = totalTiles.toLocaleString() + ' tiles';

      // Grout coverage: how much area per lb
      const coveragePerLb = groutLbs > 0 ? projectAreaSqFt / groutLbs : 0;
      document.getElementById('mg2-coverage')!.textContent = coveragePerLb.toFixed(1) + ' sqft/lb';

      // Adhesive estimate: about 0.5 lbs per sq ft for thin layer
      const adhesiveLbs = projectAreaSqFt * 0.5;
      document.getElementById('mg2-adhesive')!.textContent = adhesiveLbs.toFixed(1) + ' lbs';

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.mg2-in').forEach(el => {
        el.addEventListener('input', calcMG2);
        el.addEventListener('change', calcMG2);
      });
      calcMG2();
    }, 50);
  </script>
</CalculatorLayout>
