---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Mosaic Tile Calculator - Count, Grout & Waste";
const description = "Calculate mosaic tile count from area, grout needed, material waste factor, and pattern repeat for mosaic art projects.";
const relatedCalcs = [
  { name: "Tile Calculator", url: "/tile-calculator", description: "Tile coverage." },
  { name: "Backsplash Calculator", url: "/backsplash-calculator", description: "Backsplash tiles." },
  { name: "Flooring Calculator", url: "/flooring-calculator", description: "Flooring area." },
  { name: "Area Calculator", url: "/area-calculator", description: "Area calculations." },
  { name: "Square Footage", url: "/square-footage-calculator", description: "Square footage." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Budget planning." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Mosaic Tile Calculator" keywords="mosaic tile calculator, tile count, grout calculator, mosaic art, tile waste, pattern repeat" breadcrumbs={[{ name: "Mosaic Tile", url: "/mosaic-tile-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Mosaic Tile Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate tile count, grout, adhesive, and waste for mosaic art and tiling projects.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Project Width (inches)</label><input type="number" id="mt-w" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="24" min="1" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Project Height (inches)</label><input type="number" id="mt-h" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="18" min="1" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Tile Size</label>
            <select id="mt-ts" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="0.375">3/8 inch (10mm)</option>
              <option value="0.5">1/2 inch (13mm)</option>
              <option value="0.75" selected>3/4 inch (20mm)</option>
              <option value="1">1 inch (25mm)</option>
              <option value="1.5">1.5 inch (38mm)</option>
              <option value="2">2 inch (50mm)</option>
            </select>
          </div>
          <div><label class="block text-xs font-medium text-text mb-1">Grout Gap (inches)</label><input type="number" id="mt-gap" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.0625" min="0" max="0.25" step="0.0125"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Waste Factor (%)</label><input type="number" id="mt-waste" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0" max="30" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Tile Price ($/sheet of 100)</label><input type="number" id="mt-price" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="0" step="0.5"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Number of Colors</label><input type="number" id="mt-colors" class="mt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="1" max="20" step="1"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Tiles Needed</div>
          <div class="text-4xl font-extrabold font-mono" id="mt-result">0 tiles</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Tiles per Color</div><div class="text-xl font-bold font-mono" id="mt-percolor">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Sheets Needed</div><div class="text-xl font-bold font-mono" id="mt-sheets">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Tile Cost</div><div class="text-xl font-bold font-mono" id="mt-cost">$0</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Grout (lbs)</div><div class="text-xl font-bold font-mono" id="mt-grout">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Adhesive (oz)</div><div class="text-xl font-bold font-mono" id="mt-adhesive">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Project Area</div><div class="text-xl font-bold font-mono" id="mt-area">0 sq in</div></div>
        </div>
      </div>
      <ShareButton calculatorId="mosaic-tile" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcMT() {
      const pw = parseFloat((document.getElementById('mt-w') as HTMLInputElement).value) || 24;
      const ph = parseFloat((document.getElementById('mt-h') as HTMLInputElement).value) || 18;
      const ts = parseFloat((document.getElementById('mt-ts') as HTMLSelectElement).value) || 0.75;
      const gap = parseFloat((document.getElementById('mt-gap') as HTMLInputElement).value) || 0.0625;
      const waste = parseFloat((document.getElementById('mt-waste') as HTMLInputElement).value) || 10;
      const price = parseFloat((document.getElementById('mt-price') as HTMLInputElement).value) || 8;
      const colors = parseInt((document.getElementById('mt-colors') as HTMLInputElement).value) || 1;

      const areaSqIn = pw * ph;
      const tileWithGap = ts + gap;
      const tilesAcross = Math.ceil(pw / tileWithGap);
      const tilesDown = Math.ceil(ph / tileWithGap);
      const baseTiles = tilesAcross * tilesDown;
      const totalTiles = Math.ceil(baseTiles * (1 + waste / 100));

      const tilesPerColor = Math.ceil(totalTiles / colors);
      const sheets = Math.ceil(totalTiles / 100);
      const tileCost = sheets * price;

      // Grout calculation: volume of grout = total gap area * tile thickness (assume 3mm thick)
      const tileThkIn = 0.125; // ~3mm
      const groutVolCuIn = (areaSqIn - baseTiles * ts * ts) * tileThkIn;
      const groutLbs = groutVolCuIn * 0.06; // approx density

      // Adhesive: ~3 oz per sq ft for thin-set
      const areaSqFt = areaSqIn / 144;
      const adhesiveOz = areaSqFt * 3;

      document.getElementById('mt-result')!.textContent = totalTiles.toLocaleString() + ' tiles';
      document.getElementById('mt-percolor')!.textContent = tilesPerColor.toLocaleString();
      document.getElementById('mt-sheets')!.textContent = sheets.toString();
      document.getElementById('mt-cost')!.textContent = '$' + tileCost.toFixed(2);
      document.getElementById('mt-grout')!.textContent = groutLbs.toFixed(2);
      document.getElementById('mt-adhesive')!.textContent = adhesiveOz.toFixed(1);
      document.getElementById('mt-area')!.textContent = areaSqIn.toFixed(0) + ' sq in';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.mt-in').forEach(el => { el.addEventListener('input', calcMT); el.addEventListener('change', calcMT); });
      calcMT();
    }, 50);
  </script>
</CalculatorLayout>
