---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Net Worth Calculator - Track Your Financial Health";
const description = "Calculate your net worth by adding up assets and subtracting liabilities. Track your financial progress and see where you stand.";

const relatedCalcs = [
  { name: "ROI Calculator", url: "/roi-calculator", description: "Return on investment." },
  { name: "Savings Calculator", url: "/savings-calculator", description: "Savings growth." },
  { name: "Investment Calculator", url: "/investment-calculator", description: "Investment returns." },
  { name: "Mortgage Calculator", url: "/mortgage-calculator", description: "Home loans." },
  { name: "Loan Calculator", url: "/loan-calculator", description: "Loan payments." },
  { name: "Retirement Calculator", url: "/retirement-calculator", description: "Retirement planning." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Net Worth Calculator"
  keywords="net worth calculator, assets liabilities, financial health, wealth tracker, personal finance"
  breadcrumbs={[{ name: "Net Worth", url: "/net-worth-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Net Worth Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Add up what you own and subtract what you owe to find your net worth.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Assets -->
        <div>
          <h3 class="font-bold text-text text-lg mb-3 flex items-center gap-2">
            <span class="w-3 h-3 rounded-full bg-green-500 inline-block"></span> Assets (What You Own)
          </h3>
          <div class="space-y-3">
            <div class="bg-green-50 rounded-xl p-4 space-y-3">
              <h4 class="text-xs font-semibold text-green-700 uppercase">Cash & Investments</h4>
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label class="block text-xs text-text-muted mb-1">Checking Accounts</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="5000" min="0" step="100">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Savings Accounts</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="15000" min="0" step="100">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Investments / Stocks</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="50000" min="0" step="1000">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Retirement (401k, IRA)</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="80000" min="0" step="1000">
                  </div>
                </div>
              </div>
            </div>
            <div class="bg-green-50 rounded-xl p-4 space-y-3">
              <h4 class="text-xs font-semibold text-green-700 uppercase">Property</h4>
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label class="block text-xs text-text-muted mb-1">Primary Home</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="300000" min="0" step="5000">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Other Real Estate</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="0" min="0" step="5000">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Vehicles</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="25000" min="0" step="1000">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Other Assets</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-asset w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="5000" min="0" step="500">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Liabilities -->
        <div>
          <h3 class="font-bold text-text text-lg mb-3 flex items-center gap-2">
            <span class="w-3 h-3 rounded-full bg-red-500 inline-block"></span> Liabilities (What You Owe)
          </h3>
          <div class="space-y-3">
            <div class="bg-red-50 rounded-xl p-4 space-y-3">
              <h4 class="text-xs font-semibold text-red-700 uppercase">Loans</h4>
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label class="block text-xs text-text-muted mb-1">Mortgage Balance</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="220000" min="0" step="1000">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Auto Loans</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="15000" min="0" step="500">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Student Loans</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="25000" min="0" step="500">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Personal Loans</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="0" min="0" step="500">
                  </div>
                </div>
              </div>
            </div>
            <div class="bg-red-50 rounded-xl p-4 space-y-3">
              <h4 class="text-xs font-semibold text-red-700 uppercase">Other Debts</h4>
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label class="block text-xs text-text-muted mb-1">Credit Card Debt</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="3000" min="0" step="100">
                  </div>
                </div>
                <div>
                  <label class="block text-xs text-text-muted mb-1">Medical Debt</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="0" min="0" step="100">
                  </div>
                </div>
                <div class="col-span-2">
                  <label class="block text-xs text-text-muted mb-1">Other Liabilities</label>
                  <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-text-muted">$</span>
                    <input type="number" class="nw-liability w-full pl-7 pr-3 py-2 border border-border rounded-lg text-sm" value="0" min="0" step="500">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Results -->
          <div class="mt-4 space-y-3">
            <div class="p-6 rounded-2xl text-white text-center" id="nw-result-box" style="background: #3b82f6;">
              <div class="text-sm uppercase tracking-wide mb-1 opacity-80">Net Worth</div>
              <div class="text-4xl sm:text-5xl font-extrabold" id="nw-total">$0</div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div class="p-4 bg-green-50 rounded-xl text-center">
                <div class="text-xs text-text-muted uppercase">Total Assets</div>
                <div class="text-xl font-bold text-green-600" id="nw-assets">$0</div>
              </div>
              <div class="p-4 bg-red-50 rounded-xl text-center">
                <div class="text-xs text-text-muted uppercase">Total Liabilities</div>
                <div class="text-xl font-bold text-red-600" id="nw-liabilities">$0</div>
              </div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl">
              <h3 class="font-semibold text-sm text-text mb-3">Breakdown</h3>
              <div class="space-y-2" id="nw-breakdown"></div>
            </div>
          </div>
        </div>
      </div>

      <ShareButton calculatorId="net-worth" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How to Calculate Net Worth</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm">
        <p><strong>Net Worth</strong> = Total Assets − Total Liabilities</p>
      </div>

      <h3 class="text-xl font-semibold text-text mt-8">What Counts as an Asset?</h3>
      <ul>
        <li><strong>Liquid assets:</strong> Cash, checking, savings, money market accounts</li>
        <li><strong>Investments:</strong> Stocks, bonds, mutual funds, ETFs, cryptocurrency</li>
        <li><strong>Retirement:</strong> 401(k), IRA, pension, Roth IRA</li>
        <li><strong>Property:</strong> Home value, rental properties, land</li>
        <li><strong>Personal property:</strong> Vehicles, jewelry, collectibles</li>
      </ul>

      <h3 class="text-xl font-semibold text-text mt-8">Frequently Asked Questions</h3>
      <p><strong>What's a good net worth?</strong> It depends on age and income. A common benchmark is: your age × annual income ÷ 10. The median U.S. household net worth is about $192,900.</p>
      <p><strong>Can net worth be negative?</strong> Yes. If you owe more than you own, your net worth is negative. This is common early in life with student loans or mortgages.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => (n < 0 ? '-$' : '$') + Math.abs(Math.round(n)).toLocaleString();

    function calcNetWorth() {
      let totalAssets = 0;
      let totalLiabilities = 0;

      document.querySelectorAll('.nw-asset').forEach(el => {
        totalAssets += parseFloat((el as HTMLInputElement).value) || 0;
      });
      document.querySelectorAll('.nw-liability').forEach(el => {
        totalLiabilities += parseFloat((el as HTMLInputElement).value) || 0;
      });

      const netWorth = totalAssets - totalLiabilities;

      document.getElementById('nw-total')!.textContent = fmt(netWorth);
      document.getElementById('nw-assets')!.textContent = fmt(totalAssets);
      document.getElementById('nw-liabilities')!.textContent = fmt(totalLiabilities);

      const box = document.getElementById('nw-result-box')!;
      box.style.backgroundColor = netWorth >= 0 ? '#22c55e' : '#ef4444';

      // Asset ratio bar
      const assetPct = totalAssets > 0 ? Math.round((totalAssets / (totalAssets + totalLiabilities)) * 100) : 0;
      const debtToAsset = totalAssets > 0 ? ((totalLiabilities / totalAssets) * 100).toFixed(1) : '0.0';

      document.getElementById('nw-breakdown')!.innerHTML = `
        <div class="flex justify-between text-sm"><span class="text-text-secondary">Assets vs Liabilities</span><span class="font-semibold">${assetPct}% / ${100 - assetPct}%</span></div>
        <div class="w-full h-3 bg-red-200 rounded-full overflow-hidden">
          <div class="h-full bg-green-500 rounded-full" style="width: ${assetPct}%"></div>
        </div>
        <div class="flex justify-between text-sm mt-2"><span class="text-text-secondary">Debt-to-Asset Ratio</span><span class="font-semibold">${debtToAsset}%</span></div>
        <div class="flex justify-between text-sm"><span class="text-text-secondary">Net Worth</span><span class="font-bold ${netWorth >= 0 ? 'text-green-600' : 'text-red-600'}">${fmt(netWorth)}</span></div>
      `;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.nw-asset, .nw-liability').forEach(el => {
        el.addEventListener('input', calcNetWorth);
      });
      calcNetWorth();
    }, 50);
  </script>
</CalculatorLayout>
