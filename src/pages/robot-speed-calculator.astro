---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Robot Speed Calculator - Cycle Time, Pick Rate & Throughput";
const description = "Calculate robot cycle time, pick rate, and throughput for pick-and-place and material handling. Optimize robot speed for production line efficiency.";
const relatedCalcs = [
  { name: "Robot Arm Calculator", url: "/robot-arm-calculator", description: "Calculate robot arm reach and workspace volume." },
  { name: "Conveyor Speed Calculator", url: "/conveyor-speed-calculator", description: "Calculate conveyor belt speed and throughput." },
  { name: "Industrial Robot ROI Calculator", url: "/industrial-robot-roi-calculator", description: "Calculate robot investment ROI and payback." },
  { name: "Cobot Payload Calculator", url: "/cobot-payload-calculator", description: "Calculate collaborative robot payload capacity." },
  { name: "Motion Profile Calculator", url: "/motion-profile-calculator", description: "Design trapezoidal and S-curve motion profiles." },
  { name: "Servo Motor Calculator", url: "/servo-motor-calculator", description: "Size servo motors for robotic applications." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Robot Speed Calculator" keywords="robot speed calculator, cycle time, pick rate, robot throughput, pick and place, robot optimization, parts per minute" breadcrumbs={[{ name: "Robot Speed Calculator", url: "/robot-speed-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Robot Speed Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate robot cycle time, picks per minute, and production throughput. Optimize your pick-and-place operation for maximum efficiency.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-6">
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Move Distance (mm)</label>
          <input type="number" id="rsp-distance" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="500" min="10" step="10">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Max Robot Speed (mm/s)</label>
          <input type="number" id="rsp-max-speed" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2000" min="100" step="100">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Acceleration (mm/sÂ²)</label>
          <input type="number" id="rsp-accel" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="5000" min="100" step="100">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Pick Dwell Time (s)</label>
          <input type="number" id="rsp-pick-dwell" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.2" min="0" step="0.05">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Place Dwell Time (s)</label>
          <input type="number" id="rsp-place-dwell" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.15" min="0" step="0.05">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Vision/Process Time (s)</label>
          <input type="number" id="rsp-vision" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.05" min="0" step="0.01">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Shift Duration (hours)</label>
          <input type="number" id="rsp-shift" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="1" step="0.5">
        </div>
        <div>
          <label class="block text-sm font-semibold text-text mb-2">Utilization (%)</label>
          <input type="number" id="rsp-util" class="rsp-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="85" min="10" max="100" step="5">
        </div>

        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm font-medium opacity-80 mb-1">Cycle Time</div>
          <div id="rsp-result-cycle" class="text-3xl sm:text-4xl font-extrabold">--</div>
          <div class="text-sm opacity-80 mt-1">seconds per pick-place</div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Picks Per Minute</div>
            <div id="rsp-ppm" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">PPM</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Move Time (one-way)</div>
            <div id="rsp-move-time" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">seconds</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Parts Per Shift</div>
            <div id="rsp-shift-parts" class="text-lg font-bold text-text">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary mb-1">Effective Speed</div>
            <div id="rsp-eff-speed" class="text-lg font-bold text-text">--</div>
            <div class="text-xs text-text-secondary">mm/s avg</div>
          </div>
        </div>

        <ShareButton />
        <FeedbackWidget />
      </div>
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcRSP() {
      const distance = parseFloat((document.getElementById('rsp-distance') as HTMLInputElement).value) || 500;
      const maxSpeed = parseFloat((document.getElementById('rsp-max-speed') as HTMLInputElement).value) || 2000;
      const accel = parseFloat((document.getElementById('rsp-accel') as HTMLInputElement).value) || 5000;
      const pickDwell = parseFloat((document.getElementById('rsp-pick-dwell') as HTMLInputElement).value) || 0.2;
      const placeDwell = parseFloat((document.getElementById('rsp-place-dwell') as HTMLInputElement).value) || 0.15;
      const visionTime = parseFloat((document.getElementById('rsp-vision') as HTMLInputElement).value) || 0.05;
      const shiftHours = parseFloat((document.getElementById('rsp-shift') as HTMLInputElement).value) || 8;
      const util = parseFloat((document.getElementById('rsp-util') as HTMLInputElement).value) / 100 || 0.85;

      const tAccel = maxSpeed / accel;
      const dAccel = 0.5 * accel * tAccel * tAccel;
      let moveTime: number;
      if (2 * dAccel >= distance) {
        moveTime = 2 * Math.sqrt(distance / accel);
      } else {
        const dCruise = distance - 2 * dAccel;
        const tCruise = dCruise / maxSpeed;
        moveTime = 2 * tAccel + tCruise;
      }

      const cycleTime = 2 * moveTime + pickDwell + placeDwell + visionTime;
      const ppm = 60 / cycleTime;
      const shiftParts = Math.floor(ppm * shiftHours * 60 * util);
      const effSpeed = (2 * distance) / cycleTime;

      document.getElementById('rsp-result-cycle')!.textContent = cycleTime.toFixed(3);
      document.getElementById('rsp-ppm')!.textContent = ppm.toFixed(1);
      document.getElementById('rsp-move-time')!.textContent = moveTime.toFixed(3);
      document.getElementById('rsp-shift-parts')!.textContent = shiftParts.toLocaleString();
      document.getElementById('rsp-eff-speed')!.textContent = effSpeed.toFixed(0);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.rsp-in').forEach(el => { el.addEventListener('input', calcRSP); el.addEventListener('change', calcRSP); });
      calcRSP();
    }, 50);
  </script>
</CalculatorLayout>
