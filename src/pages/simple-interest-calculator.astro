---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Simple Interest Calculator - Quick Interest Calculation";
const description = "Calculate simple interest on savings or loans. See total interest earned and final amount with the simple interest formula.";

const relatedCalcs = [
  { name: "Compound Interest", url: "/compound-interest-calculator", description: "Compound interest." },
  { name: "Savings Calculator", url: "/savings-calculator", description: "Savings growth." },
  { name: "Loan Calculator", url: "/loan-calculator", description: "Loan payments." },
  { name: "Investment Calculator", url: "/investment-calculator", description: "Investments." },
  { name: "CD Calculator", url: "/cd-calculator", description: "CD earnings." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentages." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="Simple Interest Calculator" keywords="simple interest calculator, interest formula, simple interest formula, I=PRT, interest calculation" breadcrumbs={[{ name: "Simple Interest", url: "/simple-interest-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Simple Interest Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate simple interest using the formula I = P × R × T.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-text mb-1">Principal (P)</label>
            <div class="relative"><span class="absolute left-4 top-1/2 -translate-y-1/2 text-text-muted font-bold">$</span>
              <input type="number" id="si-principal" class="w-full pl-8 pr-4 py-3 border border-border rounded-xl text-2xl font-bold" value="10000" min="0" step="100">
            </div>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Annual Interest Rate (R)</label>
            <div class="relative">
              <input type="number" id="si-rate" class="w-full px-4 pr-8 py-3 border border-border rounded-xl text-lg" value="5" min="0" max="50" step="0.1">
              <span class="absolute right-4 top-1/2 -translate-y-1/2 text-text-muted">%</span>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-xs font-medium text-text mb-1">Time (T)</label>
              <input type="number" id="si-time" class="w-full px-4 py-3 border border-border rounded-xl text-lg" value="5" min="0" step="0.5">
            </div>
            <div>
              <label class="block text-xs font-medium text-text mb-1">Time Unit</label>
              <select id="si-unit" class="w-full px-4 py-3 border border-border rounded-xl text-lg">
                <option value="years" selected>Years</option>
                <option value="months">Months</option>
                <option value="days">Days</option>
              </select>
            </div>
          </div>
        </div>

        <div class="space-y-3">
          <div class="p-6 bg-primary rounded-2xl text-white text-center">
            <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Interest</div>
            <div class="text-5xl font-extrabold" id="si-interest">$0</div>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Total Amount</div>
              <div class="text-xl font-bold text-secondary" id="si-total">$0</div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Daily Interest</div>
              <div class="text-xl font-bold" id="si-daily">$0</div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Monthly Interest</div>
              <div class="text-xl font-bold" id="si-monthly">$0</div>
            </div>
            <div class="p-4 bg-surface-alt rounded-xl text-center">
              <div class="text-xs text-text-muted uppercase">Yearly Interest</div>
              <div class="text-xl font-bold" id="si-yearly">$0</div>
            </div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl">
            <h3 class="font-semibold text-sm text-text mb-2">Formula</h3>
            <div class="font-mono text-sm bg-white p-3 rounded-lg" id="si-formula">I = P × R × T</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="simple-interest" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Simple Interest Formula</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p><strong>I = P × R × T</strong></p>
        <p>I = Interest, P = Principal, R = Annual Rate, T = Time in Years</p>
        <p><strong>Total = P + I</strong></p>
      </div>
      <p>Simple interest is calculated only on the original principal, not on accumulated interest. It's commonly used for short-term loans, car loans, and some certificates of deposit.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');

    function calcSI() {
      const principal = parseFloat((document.getElementById('si-principal') as HTMLInputElement).value) || 0;
      const rate = (parseFloat((document.getElementById('si-rate') as HTMLInputElement).value) || 0) / 100;
      const time = parseFloat((document.getElementById('si-time') as HTMLInputElement).value) || 0;
      const unit = (document.getElementById('si-unit') as HTMLSelectElement).value;

      let timeInYears = time;
      if (unit === 'months') timeInYears = time / 12;
      else if (unit === 'days') timeInYears = time / 365;

      const interest = principal * rate * timeInYears;
      const total = principal + interest;
      const yearlyInterest = principal * rate;
      const monthlyInterest = yearlyInterest / 12;
      const dailyInterest = yearlyInterest / 365;

      document.getElementById('si-interest')!.textContent = fmt(interest);
      document.getElementById('si-total')!.textContent = fmt(total);
      document.getElementById('si-daily')!.textContent = fmt(dailyInterest);
      document.getElementById('si-monthly')!.textContent = fmt(monthlyInterest);
      document.getElementById('si-yearly')!.textContent = fmt(yearlyInterest);

      document.getElementById('si-formula')!.innerHTML = `I = ${fmt(principal)} × ${(rate * 100).toFixed(1)}% × ${timeInYears.toFixed(2)} yrs = <strong>${fmt(interest)}</strong>`;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      ['si-principal', 'si-rate', 'si-time'].forEach(id => document.getElementById(id)!.addEventListener('input', calcSI));
      document.getElementById('si-unit')!.addEventListener('change', calcSI);
      calcSI();
    }, 50);
  </script>
</CalculatorLayout>
