---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Banquet Room Calculator - Room Size for Events & Guests";
const description = "Calculate banquet room square footage for various seating styles and guest counts. Compare theater, classroom, banquet round, U-shape, and cocktail layouts.";
const relatedCalcs = [
  { name: "Seating Chart Calculator", url: "/seating-chart-calculator", description: "Table layout planner." },
  { name: "Tent Size Calculator", url: "/tent-size-calculator", description: "Tent dimensions needed." },
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Sound System Calculator", url: "/sound-system-calculator", description: "Speaker wattage needed." },
  { name: "Event Lighting Calculator", url: "/event-lighting-calculator", description: "Venue lighting plan." },
  { name: "Conference Calculator", url: "/conference-calculator", description: "Conference room planning." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Banquet Room Calculator"
  keywords="banquet room calculator, event room size, meeting room capacity, venue square footage, seating layout"
  breadcrumbs={[{ name: "Banquet Room", url: "/banquet-room-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Banquet Room Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the right room size for your event based on seating style and guest count.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Guests</label>
          <input type="number" id="br2-guests" class="br2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="200" min="10" step="10">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Primary Seating Style</label>
          <select id="br2-style" class="br2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="banquet">Banquet Rounds (seated dinner)</option>
            <option value="theater">Theater (rows of chairs)</option>
            <option value="classroom">Classroom (tables + chairs facing front)</option>
            <option value="ushape">U-Shape / Hollow Square</option>
            <option value="cocktail">Cocktail / Standing Reception</option>
            <option value="boardroom">Boardroom (single table)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Include Stage / Podium Area?</label>
          <select id="br2-stage" class="br2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="0">No</option>
            <option value="150">Small podium (150 sq ft)</option>
            <option value="300">Medium stage (300 sq ft)</option>
            <option value="500">Large stage (500 sq ft)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Include Dance Floor?</label>
          <select id="br2-dance" class="br2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="0">No</option>
            <option value="200">Small (200 sq ft)</option>
            <option value="350">Medium (350 sq ft)</option>
            <option value="500">Large (500 sq ft)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Buffer for Aisles & Service (%)</label>
          <input type="number" id="br2-buffer" class="br2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="20" min="5" max="40" step="5">
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Minimum Room Size</div>
        <div class="text-5xl font-extrabold" id="br2-sqft">--</div>
        <div class="text-sm mt-1" id="br2-dims">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Sq Ft Per Guest</div>
          <div class="text-xl font-bold" id="br2-ppguest">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Seating Area</div>
          <div class="text-xl font-bold" id="br2-seatarea">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Extra Areas</div>
          <div class="text-xl font-bold" id="br2-extra">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Min Ceiling Height</div>
          <div class="text-xl font-bold" id="br2-ceiling">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="br2-compare"></div>

      <ShareButton calculatorId="banquet-room" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Room Size Guidelines by Layout</h2>
      <p>Space per guest varies significantly by layout: Theater (6-8 sq ft), Classroom (15-18 sq ft), Banquet Rounds (12-14 sq ft), Cocktail (6-8 sq ft), U-Shape (25-30 sq ft).</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcBR2() {
      const guests = parseInt((document.getElementById('br2-guests') as HTMLInputElement).value) || 10;
      const style = (document.getElementById('br2-style') as HTMLSelectElement).value;
      const stageArea = parseInt((document.getElementById('br2-stage') as HTMLSelectElement).value) || 0;
      const danceArea = parseInt((document.getElementById('br2-dance') as HTMLSelectElement).value) || 0;
      const bufferPct = parseFloat((document.getElementById('br2-buffer') as HTMLInputElement).value) || 20;

      const sqftMap: Record<string, number> = {
        banquet: 13, theater: 7, classroom: 17, ushape: 28, cocktail: 7, boardroom: 25,
      };
      const sqftPerGuest = sqftMap[style] || 13;
      const seatingArea = guests * sqftPerGuest;
      const extraArea = stageArea + danceArea;
      const subtotal = seatingArea + extraArea;
      const totalSqft = Math.ceil(subtotal * (1 + bufferPct / 100));
      const side = Math.ceil(Math.sqrt(totalSqft));
      const recW = Math.ceil(side * 0.75);
      const recL = Math.ceil(side * 1.33);
      const ceiling = guests > 200 ? '14+ ft' : (guests > 100 ? '12+ ft' : '10+ ft');

      document.getElementById('br2-sqft')!.textContent = totalSqft.toLocaleString() + ' sq ft';
      document.getElementById('br2-dims')!.textContent = side + 'x' + side + ' ft (square) or ' + recW + 'x' + recL + ' ft (rectangular)';
      document.getElementById('br2-ppguest')!.textContent = sqftPerGuest + ' sq ft';
      document.getElementById('br2-seatarea')!.textContent = seatingArea.toLocaleString() + ' sq ft';
      document.getElementById('br2-extra')!.textContent = extraArea.toLocaleString() + ' sq ft';
      document.getElementById('br2-ceiling')!.textContent = ceiling;

      const layouts = [
        { name: 'Banquet Rounds', sqft: 13 },
        { name: 'Theater', sqft: 7 },
        { name: 'Classroom', sqft: 17 },
        { name: 'Cocktail', sqft: 7 },
        { name: 'U-Shape', sqft: 28 },
      ];
      let compare = '<h3 class="font-semibold text-sm text-text mb-2">Room Size by Layout Style</h3>';
      layouts.forEach(l => {
        const total = Math.ceil((guests * l.sqft + extraArea) * (1 + bufferPct / 100));
        const active = l.sqft === sqftPerGuest ? ' font-bold text-primary' : ' text-text-secondary';
        compare += '<div class="flex justify-between text-sm py-1 border-b border-border last:border-0' + active + '"><span>' + l.name + ' (' + l.sqft + ' sq ft/guest)</span><span>' + total.toLocaleString() + ' sq ft</span></div>';
      });
      document.getElementById('br2-compare')!.innerHTML = compare;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.br2-in').forEach(el => { el.addEventListener('input', calcBR2); el.addEventListener('change', calcBR2); });
      calcBR2();
    }, 50);
  </script>
</CalculatorLayout>
