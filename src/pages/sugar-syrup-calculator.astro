---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Sugar Syrup Calculator - Concentrations & Candy Stages";
const description = "Calculate sugar syrup ratios from simple syrup to hard crack. Get exact sugar and water amounts for any concentration or candy stage.";
const relatedCalcs = [
  { name: "Caramel Calculator", url: "/caramel-calculator", description: "Caramel temperature stages and scaling." },
  { name: "Chocolate Tempering Calculator", url: "/chocolate-tempering-calculator", description: "Chocolate tempering temperatures." },
  { name: "Pastry Cream Calculator", url: "/pastry-cream-calculator", description: "Scale pastry cream recipes." },
  { name: "Baking Conversion Calculator", url: "/baking-conversion-calculator", description: "Convert between baking units." },
  { name: "Frosting Calculator", url: "/frosting-calculator", description: "Calculate frosting quantities." },
  { name: "Macaron Calculator", url: "/macaron-calculator", description: "Macaron recipe ratios." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Sugar Syrup Calculator" keywords="sugar syrup, simple syrup, candy stages, soft ball, hard crack, sugar concentration, brix" breadcrumbs={[{ name: "Sugar Syrup", url: "/sugar-syrup-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Sugar Syrup Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate sugar and water amounts for any syrup concentration, from simple syrup to candy-making stages.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Desired Stage / Type</label>
          <select id="ssy2-stage" class="ssy2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="simple">Simple Syrup (1:1)</option>
            <option value="rich">Rich Simple Syrup (2:1)</option>
            <option value="thread">Thread Stage (230-235&deg;F)</option>
            <option value="softball">Soft Ball (235-240&deg;F)</option>
            <option value="firmball">Firm Ball (245-250&deg;F)</option>
            <option value="hardball">Hard Ball (250-265&deg;F)</option>
            <option value="softcrack">Soft Crack (270-290&deg;F)</option>
            <option value="hardcrack">Hard Crack (300-310&deg;F)</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Desired Final Volume (cups)</label>
          <input type="number" id="ssy2-volume" class="ssy2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0.25" step="0.25">
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Target Temperature</div>
          <div class="text-5xl font-extrabold font-mono" id="ssy2-result">--</div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Sugar</div>
            <div class="text-xl font-bold font-mono" id="ssy2-sugar">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Water</div>
            <div class="text-xl font-bold font-mono" id="ssy2-water">--</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Concentration</div>
            <div class="text-xl font-bold font-mono" id="ssy2-brix">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Common Uses</div>
            <div class="text-sm font-bold" id="ssy2-uses">--</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="sugar-syrup" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcSSY2() {
      const stage = (document.getElementById('ssy2-stage') as HTMLSelectElement).value;
      const volume = parseFloat((document.getElementById('ssy2-volume') as HTMLInputElement).value) || 1;

      // Stage data: tempF range, sugar:water ratio, brix, uses
      const stages: Record<string, {tempF: string, ratio: number, brix: number, uses: string}> = {
        simple:    { tempF: '212\u00B0F / 100\u00B0C',  ratio: 1,    brix: 50,  uses: 'Cocktails, soaking cakes, iced drinks' },
        rich:      { tempF: '212\u00B0F / 100\u00B0C',  ratio: 2,    brix: 67,  uses: 'Cocktails, preserving fruit, richer flavor' },
        thread:    { tempF: '230-235\u00B0F / 110-113\u00B0C', ratio: 2.5,  brix: 80,  uses: 'Candy glazes, spun sugar decoration' },
        softball:  { tempF: '235-240\u00B0F / 113-116\u00B0C', ratio: 3,    brix: 85,  uses: 'Fudge, fondant, pralines' },
        firmball:  { tempF: '245-250\u00B0F / 118-121\u00B0C', ratio: 3.5,  brix: 87,  uses: 'Caramels, soft nougat' },
        hardball:  { tempF: '250-265\u00B0F / 121-130\u00B0C', ratio: 4,    brix: 90,  uses: 'Marshmallows, gummies, rock candy' },
        softcrack: { tempF: '270-290\u00B0F / 132-143\u00B0C', ratio: 5,    brix: 95,  uses: 'Taffy, butterscotch, toffee' },
        hardcrack: { tempF: '300-310\u00B0F / 149-154\u00B0C', ratio: 7,    brix: 99,  uses: 'Lollipops, brittles, spun sugar' },
      };

      const s = stages[stage];
      // Calculate sugar and water for desired volume
      // Volume in mL (1 cup = 236.6 mL)
      const volMl = volume * 236.6;

      // For simple syrups: sugar + water combined. For candy: start with more water (it boils off)
      let sugarG = 0, waterMl = 0;

      if (stage === 'simple' || stage === 'rich') {
        // Direct ratio by weight: 1:1 means equal parts, 2:1 means 2 parts sugar
        sugarG = volMl * (s.ratio / (s.ratio + 1)) * 0.85; // sugar density ~0.85 g/mL packed
        // Actually: 1 cup sugar = 200g, 1 cup water = 236.6 mL
        const totalParts = s.ratio + 1;
        sugarG = volume * (s.ratio / totalParts) * 200;
        waterMl = volume * (1 / totalParts) * 236.6;
      } else {
        // For candy stages: start with sugar + enough water to dissolve, then boil
        // Final volume will be concentrated. Start with extra water.
        sugarG = volume * 200 * s.ratio / 3;
        waterMl = sugarG * 0.4; // ~40% water by sugar weight to start
      }

      document.getElementById('ssy2-result')!.textContent = s.tempF;
      document.getElementById('ssy2-sugar')!.textContent = sugarG.toFixed(0) + ' g (' + (sugarG / 200).toFixed(1) + ' cups)';
      document.getElementById('ssy2-water')!.textContent = waterMl.toFixed(0) + ' mL (' + (waterMl / 236.6).toFixed(1) + ' cups)';
      document.getElementById('ssy2-brix')!.textContent = s.brix + '\u00B0 Brix';
      document.getElementById('ssy2-uses')!.textContent = s.uses;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ssy2-in').forEach(el => { el.addEventListener('input', calcSSY2); el.addEventListener('change', calcSSY2); });
      calcSSY2();
    }, 50);
  </script>
</CalculatorLayout>
