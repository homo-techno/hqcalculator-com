---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Boat Trailer Calculator - Capacity, Tongue Weight & Tow Match";
const description = "Calculate trailer capacity from boat weight and length, tongue weight, tire rating, and tow vehicle matching for safe boat trailering.";
const relatedCalcs = [
  { name: "Boat Loan", url: "/boat-loan-calculator", description: "Marine financing costs." },
  { name: "Fuel Efficiency", url: "/fuel-efficiency-converter", description: "Fuel efficiency units." },
  { name: "Nautical Mile", url: "/nautical-mile-calculator", description: "Nautical distance conversion." },
  { name: "Buoyancy", url: "/buoyancy-calculator", description: "Buoyancy force calculations." },
  { name: "Speed Calculator", url: "/speed-calculator", description: "Speed and distance." },
  { name: "Kayak Paddle", url: "/kayak-paddle-calculator", description: "Paddle sizing guide." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Boat Trailer Calculator" keywords="boat trailer calculator, tongue weight, trailer capacity, tow vehicle match, boat trailering, GVWR, trailer tire rating" breadcrumbs={[{ name: "Boat Trailer", url: "/boat-trailer-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Boat Trailer Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Determine trailer requirements, tongue weight, and tow vehicle compatibility for safe boat trailering.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Boat Weight (lbs)</label><input type="number" id="bt-bwt" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="100"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Boat LOA (ft)</label><input type="number" id="bt-loa" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Trailer Weight (lbs)</label><input type="number" id="bt-twt" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="100"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Gear/Fuel Weight (lbs)</label><input type="number" id="bt-gear" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="50"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Tow Vehicle Rating (lbs)</label><input type="number" id="bt-tow" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="500"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Trailer GVWR (lbs)</label><input type="number" id="bt-gvwr" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="500"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Number of Axles</label>
          <select id="bt-axle" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
            <option value="1">Single Axle</option>
            <option value="2">Tandem Axle</option>
            <option value="3">Triple Axle</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Tow Weight</div>
          <div class="text-5xl font-extrabold font-mono" id="bt-total">--</div>
          <div class="text-sm text-blue-200 mt-1">pounds</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Tongue Weight</div><div class="text-xl font-bold" id="bt-tongue">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Tongue %</div><div class="text-xl font-bold" id="bt-tpct">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Per Axle Load</div><div class="text-xl font-bold" id="bt-axload">--</div></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Tow Vehicle</div><div class="text-xl font-bold" id="bt-towfit">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Trailer GVWR</div><div class="text-xl font-bold" id="bt-gvfit">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Tow Margin</div><div class="text-xl font-bold" id="bt-margin">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="boat-trailer" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcBT() {
      const boatWt = parseFloat((document.getElementById('bt-bwt') as HTMLInputElement).value) || 0;
      const boatLOA = parseFloat((document.getElementById('bt-loa') as HTMLInputElement).value) || 0;
      const trailerWt = parseFloat((document.getElementById('bt-twt') as HTMLInputElement).value) || 0;
      const gearWt = parseFloat((document.getElementById('bt-gear') as HTMLInputElement).value) || 0;
      const towRating = parseFloat((document.getElementById('bt-tow') as HTMLInputElement).value) || 0;
      const gvwr = parseFloat((document.getElementById('bt-gvwr') as HTMLInputElement).value) || 0;
      const axles = parseInt((document.getElementById('bt-axle') as HTMLSelectElement).value) || 1;

      const totalWeight = boatWt + trailerWt + gearWt;
      // Tongue weight is typically 10-15% of total trailer weight
      const tongueWeight = totalWeight * 0.12;
      const tonguePct = totalWeight > 0 ? (tongueWeight / totalWeight) * 100 : 0;
      // Axle load: (total - tongue weight) / number of axles
      const axleLoad = axles > 0 ? (totalWeight - tongueWeight) / axles : 0;

      const towFit = totalWeight <= towRating ? 'OK' : 'OVER';
      const gvFit = (boatWt + gearWt) <= gvwr ? 'OK' : 'OVER';
      const towMargin = towRating > 0 ? ((towRating - totalWeight) / towRating) * 100 : 0;

      document.getElementById('bt-total')!.textContent = totalWeight > 0 ? totalWeight.toLocaleString() : '--';
      document.getElementById('bt-tongue')!.textContent = tongueWeight > 0 ? Math.round(tongueWeight).toLocaleString() + ' lbs' : '--';
      document.getElementById('bt-tpct')!.textContent = tonguePct > 0 ? tonguePct.toFixed(1) + '%' : '--';
      document.getElementById('bt-axload')!.textContent = axleLoad > 0 ? Math.round(axleLoad).toLocaleString() + ' lbs' : '--';
      document.getElementById('bt-towfit')!.textContent = towFit;
      document.getElementById('bt-gvfit')!.textContent = gvFit;
      document.getElementById('bt-margin')!.textContent = towMargin !== 0 ? (towMargin > 0 ? '+' : '') + towMargin.toFixed(1) + '%' : '--';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('bt-bwt') as HTMLInputElement).value = '4500';
      (document.getElementById('bt-loa') as HTMLInputElement).value = '22';
      (document.getElementById('bt-twt') as HTMLInputElement).value = '1200';
      (document.getElementById('bt-gear') as HTMLInputElement).value = '300';
      (document.getElementById('bt-tow') as HTMLInputElement).value = '7500';
      (document.getElementById('bt-gvwr') as HTMLInputElement).value = '6000';
      document.querySelectorAll('.bt-in').forEach(el => { el.addEventListener('input', calcBT); el.addEventListener('change', calcBT); });
      calcBT();
    }, 50);
  </script>
</CalculatorLayout>
