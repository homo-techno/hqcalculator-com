---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Marina Slip Calculator - Slip Size, Cost & Utility Fees";
const description = "Calculate marina slip size from boat LOA and beam, annual cost estimate, per-foot rate, and utility fees for boat dockage.";
const relatedCalcs = [
  { name: "Boat Loan", url: "/boat-loan-calculator", description: "Marine financing costs." },
  { name: "Nautical Mile", url: "/nautical-mile-calculator", description: "Nautical distance conversion." },
  { name: "Kayak Paddle", url: "/kayak-paddle-calculator", description: "Paddle sizing guide." },
  { name: "Buoyancy", url: "/buoyancy-calculator", description: "Buoyancy force calculations." },
  { name: "Great Circle", url: "/great-circle-calculator", description: "Great circle navigation." },
  { name: "Pool Cost", url: "/pool-cost-calculator", description: "Pool construction costs." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Marina Slip Calculator" keywords="marina slip calculator, boat dockage, slip cost, marina fees, per foot rate, boat slip size, utility fees" breadcrumbs={[{ name: "Marina Slip", url: "/marina-slip-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Marina Slip Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate marina slip requirements and annual dockage costs based on your boat dimensions and marina rates.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Boat LOA (ft)</label><input type="number" id="ms2-loa" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Boat Beam (ft)</label><input type="number" id="ms2-beam" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="0.5"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Rate Per Foot/Month ($)</label><input type="number" id="ms2-rate" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0.01" step="1"></div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Region</label>
            <select id="ms2-region" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="1.0">Average US</option>
              <option value="1.5">Northeast / SoCal</option>
              <option value="0.8">Gulf Coast / Midwest</option>
              <option value="2.0">Florida Keys / NYC</option>
              <option value="1.2">Pacific NW</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Monthly Electricity ($)</label><input type="number" id="ms2-elec" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="10"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Monthly Water/Other ($)</label><input type="number" id="ms2-water" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="5"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Liveaboard Surcharge (%)</label><input type="number" id="ms2-live" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" max="100" step="5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Months Per Year</label><input type="number" id="ms2-months" class="ms2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" max="12" step="1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Annual Slip Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="ms2-annual">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Cost</div><div class="text-xl font-bold" id="ms2-monthly">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Slip Length</div><div class="text-xl font-bold" id="ms2-slen">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Slip Width</div><div class="text-xl font-bold" id="ms2-swid">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Daily Rate</div><div class="text-xl font-bold" id="ms2-daily">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cost Per Sq Ft/Yr</div><div class="text-xl font-bold" id="ms2-sqft">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="marina-slip" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcMS2() {
      const loa = parseFloat((document.getElementById('ms2-loa') as HTMLInputElement).value) || 0;
      const beam = parseFloat((document.getElementById('ms2-beam') as HTMLInputElement).value) || 0;
      const rate = parseFloat((document.getElementById('ms2-rate') as HTMLInputElement).value) || 0;
      const regionMult = parseFloat((document.getElementById('ms2-region') as HTMLSelectElement).value) || 1;
      const elec = parseFloat((document.getElementById('ms2-elec') as HTMLInputElement).value) || 0;
      const water = parseFloat((document.getElementById('ms2-water') as HTMLInputElement).value) || 0;
      const livePct = (parseFloat((document.getElementById('ms2-live') as HTMLInputElement).value) || 0) / 100;
      const months = parseInt((document.getElementById('ms2-months') as HTMLInputElement).value) || 12;

      // Slip size: standard slips are 5ft longer than LOA, width rounded up to next 2ft
      const slipLen = Math.ceil((loa + 5) / 5) * 5; // Round to nearest 5ft
      const slipWid = Math.ceil((beam + 3) / 2) * 2; // 3ft clearance, round to even

      // Billable footage is based on slip length (standard practice)
      const baseMonthly = slipLen * rate * regionMult;
      const liveaboardSurcharge = baseMonthly * livePct;
      const totalMonthly = baseMonthly + liveaboardSurcharge + elec + water;
      const annualCost = totalMonthly * months;
      const dailyRate = totalMonthly / 30;
      const slipArea = slipLen * slipWid;
      const costPerSqFt = slipArea > 0 ? annualCost / slipArea : 0;

      document.getElementById('ms2-annual')!.textContent = annualCost > 0 ? '$' + Math.round(annualCost).toLocaleString() : '--';
      document.getElementById('ms2-monthly')!.textContent = totalMonthly > 0 ? '$' + Math.round(totalMonthly).toLocaleString() : '--';
      document.getElementById('ms2-slen')!.textContent = slipLen > 0 ? slipLen + ' ft' : '--';
      document.getElementById('ms2-swid')!.textContent = slipWid > 0 ? slipWid + ' ft' : '--';
      document.getElementById('ms2-daily')!.textContent = dailyRate > 0 ? '$' + dailyRate.toFixed(2) : '--';
      document.getElementById('ms2-sqft')!.textContent = costPerSqFt > 0 ? '$' + costPerSqFt.toFixed(2) : '--';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('ms2-loa') as HTMLInputElement).value = '35';
      (document.getElementById('ms2-beam') as HTMLInputElement).value = '12';
      (document.getElementById('ms2-rate') as HTMLInputElement).value = '25';
      (document.getElementById('ms2-elec') as HTMLInputElement).value = '75';
      (document.getElementById('ms2-water') as HTMLInputElement).value = '25';
      (document.getElementById('ms2-live') as HTMLInputElement).value = '0';
      (document.getElementById('ms2-months') as HTMLInputElement).value = '12';
      document.querySelectorAll('.ms2-in').forEach(el => { el.addEventListener('input', calcMS2); el.addEventListener('change', calcMS2); });
      calcMS2();
    }, 50);
  </script>
</CalculatorLayout>
