---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Board Foot Calculator - Lumber Volume & Cost Estimator";
const description = "Calculate board feet from lumber dimensions and quantity. Estimate costs for hardwood and softwood lumber purchases with our free board foot calculator.";

const relatedCalcs = [
  { name: "Wood Weight Calculator", url: "/wood-weight-calculator", description: "Estimate wood weight by species." },
  { name: "Plywood Cut Calculator", url: "/plywood-cut-calculator", description: "Optimize plywood sheet cuts." },
  { name: "Wood Moisture Calculator", url: "/wood-moisture-calculator", description: "Wood moisture content." },
  { name: "Lumber Calculator", url: "/lumber-calculator", description: "Lumber quantity estimator." },
  { name: "Square Footage Calculator", url: "/square-footage-calculator", description: "Calculate area." },
  { name: "Wood Finish Calculator", url: "/wood-finish-calculator", description: "Finish coverage estimator." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Board Foot Calculator"
  keywords="board foot calculator, lumber calculator, board feet, hardwood lumber, wood volume, bf calculator, lumber cost"
  breadcrumbs={[{ name: "Board Foot Calculator", url: "/board-foot-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Board Foot Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate board feet from lumber dimensions and quantity. One board foot equals a piece 1 inch thick, 12 inches wide, and 12 inches long.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Thickness (inches)</label>
        <input type="number" id="bft-thick" class="bft-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0.25" step="0.25">
      </div>

      <div class="grid grid-cols-2 gap-4 mb-5">
        <div>
          <label class="block text-sm font-medium text-text mb-2">Width (inches)</label>
          <input type="number" id="bft-width" class="bft-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="6" min="0.5" step="0.5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Length (feet)</label>
          <input type="number" id="bft-length" class="bft-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="1" step="1">
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-5">
        <div>
          <label class="block text-sm font-medium text-text mb-2">Number of Pieces</label>
          <input type="number" id="bft-qty" class="bft-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="1" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Price per Board Foot ($)</label>
          <input type="number" id="bft-price" class="bft-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="5.00" min="0" step="0.25">
        </div>
      </div>

      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Waste Factor (%)</label>
        <input type="number" id="bft-waste" class="bft-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="0" max="50" step="1">
      </div>

      <!-- Primary Result -->
      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Board Feet</div>
        <div class="text-4xl font-extrabold" id="bft-result">--</div>
        <div class="text-sm text-blue-200 mt-1" id="bft-result-sub">board feet (incl. waste)</div>
      </div>

      <!-- Secondary Stats -->
      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">BF per Piece</div>
          <div class="text-xl font-bold" id="bft-per-piece">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Estimated Cost</div>
          <div class="text-xl font-bold text-secondary" id="bft-cost">--</div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Cubic Feet</div>
          <div class="text-xl font-bold" id="bft-cuft">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Square Feet (face)</div>
          <div class="text-xl font-bold" id="bft-sqft">--</div>
        </div>
      </div>

      <ShareButton calculatorId="board-foot" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How to Calculate Board Feet</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p><strong>Board Feet = Thickness (in) x Width (in) x Length (ft) / 12</strong></p>
        <p>One board foot = 144 cubic inches = 1/12 cubic foot</p>
      </div>
      <h3 class="text-xl font-semibold text-text mt-8">Common Lumber Sizes</h3>
      <ul>
        <li><strong>4/4 (1 inch):</strong> Standard thickness for furniture stock</li>
        <li><strong>6/4 (1.5 inch):</strong> Common for table tops and thick panels</li>
        <li><strong>8/4 (2 inch):</strong> Used for turning blanks and heavy furniture</li>
        <li><strong>12/4 (3 inch):</strong> Used for posts, large turnings</li>
      </ul>
      <h3 class="text-xl font-semibold text-text mt-8">Frequently Asked Questions</h3>
      <p><strong>What is a board foot?</strong> A board foot is the standard unit of measure for hardwood lumber. It equals 144 cubic inches (1" thick x 12" wide x 12" long).</p>
      <p><strong>How much waste should I plan for?</strong> A 10-15% waste factor is typical for most projects, accounting for defects, saw kerf, and jointing.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcBFT() {
      const thick = parseFloat((document.getElementById('bft-thick') as HTMLInputElement).value) || 0;
      const width = parseFloat((document.getElementById('bft-width') as HTMLInputElement).value) || 0;
      const length = parseFloat((document.getElementById('bft-length') as HTMLInputElement).value) || 0;
      const qty = parseInt((document.getElementById('bft-qty') as HTMLInputElement).value) || 1;
      const price = parseFloat((document.getElementById('bft-price') as HTMLInputElement).value) || 0;
      const waste = (parseFloat((document.getElementById('bft-waste') as HTMLInputElement).value) || 0) / 100;

      const bfPerPiece = (thick * width * length) / 12;
      const totalBF = bfPerPiece * qty;
      const totalWithWaste = totalBF * (1 + waste);
      const cost = totalWithWaste * price;
      const cuFt = totalWithWaste / 12;
      const sqFt = (width / 12) * length * qty * (1 + waste);

      document.getElementById('bft-result')!.textContent = totalWithWaste.toFixed(2);
      document.getElementById('bft-per-piece')!.textContent = bfPerPiece.toFixed(2);
      document.getElementById('bft-cost')!.textContent = '$' + cost.toFixed(2);
      document.getElementById('bft-cuft')!.textContent = cuFt.toFixed(2);
      document.getElementById('bft-sqft')!.textContent = sqFt.toFixed(1);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.bft-in').forEach(el => {
        el.addEventListener('input', calcBFT);
        el.addEventListener('change', calcBFT);
      });
      calcBFT();
    }, 50);
  </script>
</CalculatorLayout>
