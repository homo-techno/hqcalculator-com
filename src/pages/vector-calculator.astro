---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Vector Calculator";
const description = "Calculate vector addition, subtraction, dot product, cross product, magnitude, and unit vectors in 2D/3D.";
const relatedCalcs = [
  { name: "Matrix Calculator", url: "/matrix-calculator", description: "Matrix." },
  { name: "Midpoint Calculator", url: "/midpoint-calculator", description: "Midpoint." },
  { name: "Slope Calculator", url: "/slope-calculator", description: "Slope." },
  { name: "Triangle Calculator", url: "/triangle-calculator", description: "Triangle." },
  { name: "Pythagorean Theorem", url: "/pythagorean-theorem-calculator", description: "Pythagorean." },
  { name: "Force Calculator", url: "/force-calculator", description: "Force." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Vector Calculator" keywords="vector calculator, dot product, cross product, vector magnitude, unit vector, vector operations" breadcrumbs={[{ name: "Vector Calculator", url: "/vector-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Vector Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Perform vector operations in 2D and 3D.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="flex gap-2">
          <button class="vc-dim flex-1 py-2 rounded-xl font-bold text-sm border-2 border-primary bg-blue-50 text-primary" data-dim="2">2D</button>
          <button class="vc-dim flex-1 py-2 rounded-xl font-bold text-sm border-2 border-border text-text-muted" data-dim="3">3D</button>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Vector A</h3>
          <div class="flex gap-2" id="vc-a-wrap">
            <input type="number" id="vc-ax" class="vc-in flex-1 px-3 py-2 border border-border rounded-xl text-lg font-bold text-center" value="3" step="0.1" placeholder="x">
            <input type="number" id="vc-ay" class="vc-in flex-1 px-3 py-2 border border-border rounded-xl text-lg font-bold text-center" value="4" step="0.1" placeholder="y">
            <input type="number" id="vc-az" class="vc-in flex-1 px-3 py-2 border border-border rounded-xl text-lg font-bold text-center hidden" value="0" step="0.1" placeholder="z">
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Vector B</h3>
          <div class="flex gap-2" id="vc-b-wrap">
            <input type="number" id="vc-bx" class="vc-in flex-1 px-3 py-2 border border-border rounded-xl text-lg font-bold text-center" value="1" step="0.1" placeholder="x">
            <input type="number" id="vc-by" class="vc-in flex-1 px-3 py-2 border border-border rounded-xl text-lg font-bold text-center" value="2" step="0.1" placeholder="y">
            <input type="number" id="vc-bz" class="vc-in flex-1 px-3 py-2 border border-border rounded-xl text-lg font-bold text-center hidden" value="0" step="0.1" placeholder="z">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Dot Product (A · B)</div>
          <div class="text-5xl font-extrabold font-mono" id="vc-dot">0</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">|A| Magnitude</div><div class="text-xl font-bold font-mono" id="vc-magA">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">|B| Magnitude</div><div class="text-xl font-bold font-mono" id="vc-magB">0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Angle (degrees)</div><div class="text-xl font-bold font-mono" id="vc-angle">0°</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase" id="vc-cross-label">Cross Product</div><div class="text-xl font-bold font-mono" id="vc-cross">0</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Operations</h3>
          <div class="text-xs space-y-1" id="vc-ops"></div>
        </div>
      </div>
      <ShareButton calculatorId="vector" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    let vcDim = 2;
    function calcVC() {
      const ax = parseFloat((document.getElementById('vc-ax') as HTMLInputElement).value) || 0;
      const ay = parseFloat((document.getElementById('vc-ay') as HTMLInputElement).value) || 0;
      const az = vcDim === 3 ? (parseFloat((document.getElementById('vc-az') as HTMLInputElement).value) || 0) : 0;
      const bx = parseFloat((document.getElementById('vc-bx') as HTMLInputElement).value) || 0;
      const by = parseFloat((document.getElementById('vc-by') as HTMLInputElement).value) || 0;
      const bz = vcDim === 3 ? (parseFloat((document.getElementById('vc-bz') as HTMLInputElement).value) || 0) : 0;
      const dot = ax * bx + ay * by + az * bz;
      const magA = Math.sqrt(ax * ax + ay * ay + az * az);
      const magB = Math.sqrt(bx * bx + by * by + bz * bz);
      const cosTheta = (magA > 0 && magB > 0) ? dot / (magA * magB) : 0;
      const angle = Math.acos(Math.max(-1, Math.min(1, cosTheta))) * 180 / Math.PI;
      const crossX = ay * bz - az * by;
      const crossY = az * bx - ax * bz;
      const crossZ = ax * by - ay * bx;
      document.getElementById('vc-dot')!.textContent = dot.toFixed(2);
      document.getElementById('vc-magA')!.textContent = magA.toFixed(4);
      document.getElementById('vc-magB')!.textContent = magB.toFixed(4);
      document.getElementById('vc-angle')!.textContent = angle.toFixed(2) + '°';
      if (vcDim === 3) {
        document.getElementById('vc-cross-label')!.textContent = 'Cross Product';
        document.getElementById('vc-cross')!.textContent = `(${crossX.toFixed(2)}, ${crossY.toFixed(2)}, ${crossZ.toFixed(2)})`;
      } else {
        document.getElementById('vc-cross-label')!.textContent = 'Cross (z-comp)';
        document.getElementById('vc-cross')!.textContent = crossZ.toFixed(2);
      }
      const fmt = (x: number, y: number, z: number) => vcDim === 3 ? `(${x.toFixed(2)}, ${y.toFixed(2)}, ${z.toFixed(2)})` : `(${x.toFixed(2)}, ${y.toFixed(2)})`;
      const unitA = magA > 0 ? fmt(ax / magA, ay / magA, az / magA) : fmt(0, 0, 0);
      const unitB = magB > 0 ? fmt(bx / magB, by / magB, bz / magB) : fmt(0, 0, 0);
      const ops = [
        `<div class="flex justify-between"><span>A + B</span><span class="font-mono">${fmt(ax + bx, ay + by, az + bz)}</span></div>`,
        `<div class="flex justify-between"><span>A − B</span><span class="font-mono">${fmt(ax - bx, ay - by, az - bz)}</span></div>`,
        `<div class="flex justify-between"><span>2A</span><span class="font-mono">${fmt(2 * ax, 2 * ay, 2 * az)}</span></div>`,
        `<div class="flex justify-between"><span>Unit A</span><span class="font-mono">${unitA}</span></div>`,
        `<div class="flex justify-between"><span>Unit B</span><span class="font-mono">${unitB}</span></div>`,
      ];
      document.getElementById('vc-ops')!.innerHTML = ops.join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.vc-dim').forEach(b => b.addEventListener('click', () => {
        vcDim = parseInt((b as HTMLButtonElement).dataset.dim!);
        document.querySelectorAll('.vc-dim').forEach(btn => {
          const active = parseInt((btn as HTMLButtonElement).dataset.dim!) === vcDim;
          (btn as HTMLButtonElement).className = `vc-dim flex-1 py-2 rounded-xl font-bold text-sm border-2 ${active ? 'border-primary bg-blue-50 text-primary' : 'border-border text-text-muted'}`;
        });
        const show3d = vcDim === 3;
        document.getElementById('vc-az')!.classList.toggle('hidden', !show3d);
        document.getElementById('vc-bz')!.classList.toggle('hidden', !show3d);
        calcVC();
      }));
      document.querySelectorAll('.vc-in').forEach(el => { el.addEventListener('input', calcVC); el.addEventListener('change', calcVC); });
      calcVC();
    }, 50);
  </script>
</CalculatorLayout>
