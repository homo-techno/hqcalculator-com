---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Dermal Filler Calculator - Volume (mL) by Treatment Area";
const description = "Calculate the estimated dermal filler volume in mL needed for each treatment area including lips, cheeks, jawline, and under-eye with cost estimation.";
const relatedCalcs = [
  { name: "Botox Unit Calculator", url: "/botox-unit-calculator", description: "Botox units by treatment area." },
  { name: "Facial Proportion Calculator", url: "/facial-proportion-calculator", description: "Golden ratio measurements." },
  { name: "Permanent Makeup Calculator", url: "/permanent-makeup-calculator", description: "PMU cost and timeline." },
  { name: "Chemical Peel Calculator", url: "/chemical-peel-calculator", description: "Peel depth and recovery." },
  { name: "Beauty Budget Calculator", url: "/beauty-budget-calculator", description: "Beauty spending breakdown." },
  { name: "Skin Type Calculator", url: "/skin-type-calculator", description: "Determine your skin type." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Dermal Filler Calculator" keywords="dermal filler, lip filler, cheek filler, jawline filler, hyaluronic acid, filler volume, filler cost" breadcrumbs={[{ name: "Dermal Filler", url: "/dermal-filler-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Dermal Filler Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate dermal filler volume and cost by treatment area and desired result.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Cost Per Syringe ($) - 1 mL</label>
          <input type="number" id="dfl-cost" class="dfl-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="650" min="200" max="2000" step="25">
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Desired Result</label>
          <select id="dfl-result" class="dfl-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="0.7">Subtle / Conservative</option>
            <option value="1.0" selected>Moderate / Natural</option>
            <option value="1.3">Enhanced / Noticeable</option>
            <option value="1.6">Dramatic / Maximum</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Age Range</label>
          <select id="dfl-age" class="dfl-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="0.8">Under 30</option>
            <option value="1.0" selected>30-45</option>
            <option value="1.2">46-60</option>
            <option value="1.4">Over 60</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-2">Select Treatment Areas</label>
          <div class="space-y-2">
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-lips" class="dfl-in" checked><span class="text-sm">Lips (0.5-2 mL)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-cheeks" class="dfl-in" checked><span class="text-sm">Cheeks (1-4 mL per side)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-nasolabial" class="dfl-in"><span class="text-sm">Nasolabial Folds (0.5-2 mL per side)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-marionette" class="dfl-in"><span class="text-sm">Marionette Lines (0.5-1.5 mL per side)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-jawline" class="dfl-in"><span class="text-sm">Jawline (1-3 mL per side)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-chin" class="dfl-in"><span class="text-sm">Chin (1-3 mL)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-undereye" class="dfl-in"><span class="text-sm">Under-Eye / Tear Trough (0.5-1 mL per side)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-temples" class="dfl-in"><span class="text-sm">Temples (1-2 mL per side)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-nose" class="dfl-in"><span class="text-sm">Non-Surgical Nose Job (0.5-1.5 mL)</span></label>
            <label class="flex items-center gap-2"><input type="checkbox" id="dfl-hands" class="dfl-in"><span class="text-sm">Hands (1-2 mL per hand)</span></label>
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Filler Volume</div>
          <div class="text-5xl font-extrabold font-mono" id="dfl-volume">0 mL</div>
          <div class="text-sm text-blue-200 mt-1" id="dfl-syringes">0 syringes</div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Estimated Cost</div><div class="text-xl font-bold" id="dfl-total">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Areas Treated</div><div class="text-xl font-bold" id="dfl-areas">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Lasts Approx.</div><div class="text-xl font-bold" id="dfl-duration">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Annual Maintenance</div><div class="text-xl font-bold" id="dfl-annual">$0</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Volume Breakdown</h3>
          <div class="text-sm space-y-1" id="dfl-breakdown"></div>
        </div>
      </div>
      <ShareButton calculatorId="dermal-filler" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Dermal Filler Guide</h2>
      <p>Dermal fillers (typically hyaluronic acid based like Juvederm, Restylane) restore volume, smooth lines, and enhance facial contours. Volume needed varies by area, age, and desired result. Lips typically need 0.5-1 mL for subtle enhancement. Cheeks may require 1-4 mL per side for significant volume restoration. Results last 6-18 months depending on the filler type, area treated, and metabolism. Costs average $500-$1,000 per syringe (1 mL). Always consult a board-certified provider for assessment and treatment.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcDFL() {
      const costPerSyringe = parseFloat((document.getElementById('dfl-cost') as HTMLInputElement).value) || 650;
      const resultMult = parseFloat((document.getElementById('dfl-result') as HTMLSelectElement).value);
      const ageMult = parseFloat((document.getElementById('dfl-age') as HTMLSelectElement).value);

      const areas: {id:string, name:string, baseML:number, duration:number}[] = [
        {id:'dfl-lips', name:'Lips', baseML:1.0, duration:9},
        {id:'dfl-cheeks', name:'Cheeks (both)', baseML:3.0, duration:15},
        {id:'dfl-nasolabial', name:'Nasolabial Folds (both)', baseML:2.0, duration:12},
        {id:'dfl-marionette', name:'Marionette Lines (both)', baseML:1.5, duration:12},
        {id:'dfl-jawline', name:'Jawline (both)', baseML:4.0, duration:15},
        {id:'dfl-chin', name:'Chin', baseML:2.0, duration:15},
        {id:'dfl-undereye', name:'Under-Eye (both)', baseML:1.0, duration:12},
        {id:'dfl-temples', name:'Temples (both)', baseML:2.5, duration:18},
        {id:'dfl-nose', name:'Non-Surgical Nose', baseML:1.0, duration:12},
        {id:'dfl-hands', name:'Hands (both)', baseML:3.0, duration:9},
      ];

      let totalML = 0;
      let areaCount = 0;
      let avgDuration = 0;
      const breakdown: string[] = [];

      areas.forEach(a => {
        if ((document.getElementById(a.id) as HTMLInputElement).checked) {
          const ml = Math.round(a.baseML * resultMult * ageMult * 10) / 10;
          totalML += ml;
          areaCount++;
          avgDuration += a.duration;
          breakdown.push('<div class="flex justify-between"><span>' + a.name + '</span><span class="font-bold">' + ml.toFixed(1) + ' mL ($' + Math.round(ml * costPerSyringe) + ')</span></div>');
        }
      });

      if (areaCount > 0) avgDuration = Math.round(avgDuration / areaCount);

      const syringes = Math.ceil(totalML);
      const totalCost = syringes * costPerSyringe;
      const annualMaint = Math.round(totalCost * (12 / (avgDuration || 12)));

      document.getElementById('dfl-volume')!.textContent = totalML.toFixed(1) + ' mL';
      document.getElementById('dfl-syringes')!.textContent = syringes + ' syringe' + (syringes !== 1 ? 's' : '');
      document.getElementById('dfl-total')!.textContent = '$' + totalCost.toLocaleString();
      document.getElementById('dfl-areas')!.textContent = areaCount.toString();
      document.getElementById('dfl-duration')!.textContent = areaCount > 0 ? avgDuration + ' months' : '--';
      document.getElementById('dfl-annual')!.textContent = '$' + annualMaint.toLocaleString();
      document.getElementById('dfl-breakdown')!.innerHTML = breakdown.length > 0 ? breakdown.join('') : '<p class="text-text-muted">Select treatment areas above.</p>';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.dfl-in').forEach(el => { el.addEventListener('input', calcDFL); el.addEventListener('change', calcDFL); });
      calcDFL();
    }, 50);
  </script>
</CalculatorLayout>
