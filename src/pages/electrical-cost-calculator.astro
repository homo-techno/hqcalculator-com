---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Electrical Cost Calculator - Appliance Running Cost Estimator";
const description = "Calculate the running cost of any appliance from its wattage, usage hours, and electricity rate. View daily, monthly, and annual cost breakdowns with comparisons.";
const relatedCalcs = [
  { name: "Electricity Cost", url: "/electricity-cost-calculator", description: "Energy costs." },
  { name: "Electricity Bill", url: "/electricity-bill-calculator", description: "Bill estimates." },
  { name: "Electricity Usage", url: "/electricity-usage-calculator", description: "Usage tracking." },
  { name: "Electrical Load", url: "/electrical-load-calculator", description: "Panel loads." },
  { name: "Solar Panel", url: "/solar-panel-calculator", description: "Solar sizing." },
  { name: "Battery Life", url: "/battery-life-calculator", description: "Battery runtime." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Electrical Cost Calculator" keywords="electrical cost calculator, appliance running cost, watts to dollars, energy cost estimator, daily monthly annual electricity cost" breadcrumbs={[{ name: "Electrical Cost", url: "/electrical-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Electrical Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate how much it costs to run any appliance based on wattage, hours, and your electricity rate.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Appliance / Device</label>
            <select id="ec3-preset" class="ec3-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="0">Custom</option>
              <option value="60">LED Light Bulb (10W equiv)</option>
              <option value="100">Laptop</option>
              <option value="200">Refrigerator</option>
              <option value="300">Desktop Computer</option>
              <option value="500">Washing Machine</option>
              <option value="1000">Dishwasher</option>
              <option value="1500" selected>Space Heater</option>
              <option value="2000">Hair Dryer</option>
              <option value="3500">Central AC</option>
              <option value="4500">Electric Water Heater</option>
              <option value="5000">Electric Dryer</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Wattage (W)</label>
            <input type="number" id="ec3-watts" class="ec3-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1500" min="1" step="1">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Hours Used Per Day</label>
            <input type="number" id="ec3-hrs" class="ec3-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="0" max="24" step="0.5">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Days Used Per Week</label>
            <input type="number" id="ec3-days" class="ec3-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="7" min="1" max="7" step="1">
          </div>
        </div>
        <div>
          <label class="block text-xs font-medium text-text mb-1">Electricity Rate ($/kWh)</label>
          <input type="number" id="ec3-rate" class="ec3-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="0.14" min="0.01" step="0.01">
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Annual Running Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="ec3-result">$0</div>
          <div class="text-sm text-blue-200 mt-1" id="ec3-note">-</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Cost Per Hour</div>
            <div class="text-xl font-bold font-mono" id="ec3-hour">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Daily Cost</div>
            <div class="text-xl font-bold font-mono" id="ec3-daily">$0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Monthly Cost</div>
            <div class="text-xl font-bold font-mono" id="ec3-monthly">$0</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">kWh Per Day</div>
            <div class="text-xl font-bold font-mono" id="ec3-kwh">0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">kWh Per Year</div>
            <div class="text-xl font-bold font-mono" id="ec3-kwhyr">0</div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Cost Comparison</h3>
          <div class="text-xs space-y-1" id="ec3-compare"></div>
        </div>
      </div>
      <ShareButton calculatorId="electrical-cost" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcEC3() {
      const preset = parseInt((document.getElementById('ec3-preset') as HTMLSelectElement).value);
      const wattsInput = document.getElementById('ec3-watts') as HTMLInputElement;
      if (preset > 0) {
        wattsInput.value = preset.toString();
      }
      const watts = parseFloat(wattsInput.value) || 0;
      const hrs = parseFloat((document.getElementById('ec3-hrs') as HTMLInputElement).value) || 0;
      const days = parseFloat((document.getElementById('ec3-days') as HTMLInputElement).value) || 7;
      const rate = parseFloat((document.getElementById('ec3-rate') as HTMLInputElement).value) || 0.14;

      const kwhPerDay = (watts * hrs) / 1000;
      const kwhPerWeek = kwhPerDay * days;
      const kwhPerYear = kwhPerWeek * 52;
      const costPerHour = (watts / 1000) * rate;
      const dailyCost = kwhPerDay * rate;
      const monthlyCost = (kwhPerYear / 12) * rate;
      const annualCost = kwhPerYear * rate;

      document.getElementById('ec3-result')!.textContent = '$' + annualCost.toFixed(2);
      document.getElementById('ec3-note')!.textContent = watts + 'W x ' + hrs + 'hrs/day x ' + days + ' days/week';
      document.getElementById('ec3-hour')!.textContent = '$' + costPerHour.toFixed(4);
      document.getElementById('ec3-daily')!.textContent = '$' + dailyCost.toFixed(2);
      document.getElementById('ec3-monthly')!.textContent = '$' + monthlyCost.toFixed(2);
      document.getElementById('ec3-kwh')!.textContent = kwhPerDay.toFixed(2);
      document.getElementById('ec3-kwhyr')!.textContent = kwhPerYear.toFixed(0);

      // Comparison table
      const comparisons = [
        { name: 'LED Bulb (10W)', watts: 10 },
        { name: 'Laptop (100W)', watts: 100 },
        { name: 'Refrigerator (200W)', watts: 200 },
        { name: 'Space Heater (1500W)', watts: 1500 },
        { name: 'Central AC (3500W)', watts: 3500 },
      ];
      let compareHtml = '';
      comparisons.forEach(c => {
        const cAnnual = (c.watts * hrs * (days / 7) * 365 / 1000) * rate;
        const highlight = Math.abs(c.watts - watts) < 50 ? ' font-bold text-primary' : '';
        compareHtml += '<div class="flex justify-between' + highlight + '"><span>' + c.name + '</span><span>$' + cAnnual.toFixed(2) + '/yr</span></div>';
      });
      document.getElementById('ec3-compare')!.innerHTML = compareHtml;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.ec3-in').forEach(el => {
        el.addEventListener('input', calcEC3);
        el.addEventListener('change', calcEC3);
      });
      calcEC3();
    }, 50);
  </script>
</CalculatorLayout>
