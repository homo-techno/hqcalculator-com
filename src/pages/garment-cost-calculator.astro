---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Garment Cost Calculator - Cost per Unit & Markup";
const description = "Calculate cost per garment including fabric, trims, labor, and overhead. Determine wholesale and retail markup, MOQ, and profit margins.";
const relatedCalcs = [
  { name: "Profit Margin Calculator", url: "/profit-margin-calculator", description: "Profit margin analysis." },
  { name: "Break Even Calculator", url: "/break-even-calculator", description: "Break-even analysis." },
  { name: "Unit Price Calculator", url: "/unit-price-calculator", description: "Unit price comparison." },
  { name: "Fabric Calculator", url: "/fabric-calculator", description: "Fabric yardage needs." },
  { name: "Discount Calculator", url: "/discount-calculator", description: "Discount calculations." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Budget planning." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Garment Cost Calculator" keywords="garment cost calculator, cost per unit, wholesale markup, retail pricing, MOQ, garment production cost" breadcrumbs={[{ name: "Garment Cost", url: "/garment-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Garment Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate total garment cost, wholesale pricing, retail markup, and profit per unit.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Fabric Cost / Yard ($)</label><input type="number" id="gc2-fabcost" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="0" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Yards per Garment</label><input type="number" id="gc2-yards" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2.5" min="0.25" step="0.25"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Trims & Notions ($)</label><input type="number" id="gc2-trims" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" step="0.25"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Labor Cost / Unit ($)</label><input type="number" id="gc2-labor" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="12" min="0" step="0.5"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Overhead / Unit ($)</label><input type="number" id="gc2-overhead" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="0" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Shipping / Unit ($)</label><input type="number" id="gc2-ship" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0" step="0.25"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Wholesale Markup %</label><input type="number" id="gc2-wmark" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="100" min="0" max="500" step="5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Retail Markup %</label><input type="number" id="gc2-rmark" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="150" min="0" max="1000" step="5"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Minimum Order Quantity (MOQ)</label><input type="number" id="gc2-moq" class="gc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50" min="1" step="1"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Cost per Garment</div>
          <div class="text-4xl font-extrabold font-mono" id="gc2-result">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Wholesale Price</div><div class="text-xl font-bold font-mono" id="gc2-wholesale">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Retail Price</div><div class="text-xl font-bold font-mono" id="gc2-retail">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Retail Margin</div><div class="text-xl font-bold font-mono" id="gc2-margin">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">MOQ Investment</div><div class="text-xl font-bold font-mono" id="gc2-moqcost">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">MOQ Revenue (Retail)</div><div class="text-xl font-bold font-mono" id="gc2-moqrev">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="garment-cost" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcGC2() {
      const fabCost = parseFloat((document.getElementById('gc2-fabcost') as HTMLInputElement).value) || 0;
      const yards = parseFloat((document.getElementById('gc2-yards') as HTMLInputElement).value) || 0;
      const trims = parseFloat((document.getElementById('gc2-trims') as HTMLInputElement).value) || 0;
      const labor = parseFloat((document.getElementById('gc2-labor') as HTMLInputElement).value) || 0;
      const overhead = parseFloat((document.getElementById('gc2-overhead') as HTMLInputElement).value) || 0;
      const ship = parseFloat((document.getElementById('gc2-ship') as HTMLInputElement).value) || 0;
      const wmark = parseFloat((document.getElementById('gc2-wmark') as HTMLInputElement).value) || 0;
      const rmark = parseFloat((document.getElementById('gc2-rmark') as HTMLInputElement).value) || 0;
      const moq = parseInt((document.getElementById('gc2-moq') as HTMLInputElement).value) || 1;

      const materialCost = (fabCost * yards) + trims;
      const totalCost = materialCost + labor + overhead + ship;

      const wholesale = totalCost * (1 + wmark / 100);
      const retail = totalCost * (1 + rmark / 100);
      const retailMargin = ((retail - totalCost) / retail * 100);

      const moqInvestment = totalCost * moq;
      const moqRevenue = retail * moq;

      document.getElementById('gc2-result')!.textContent = '$' + totalCost.toFixed(2);
      document.getElementById('gc2-wholesale')!.textContent = '$' + wholesale.toFixed(2);
      document.getElementById('gc2-retail')!.textContent = '$' + retail.toFixed(2);
      document.getElementById('gc2-margin')!.textContent = retailMargin.toFixed(1) + '%';
      document.getElementById('gc2-moqcost')!.textContent = '$' + moqInvestment.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0});
      document.getElementById('gc2-moqrev')!.textContent = '$' + moqRevenue.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0});
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.gc2-in').forEach(el => { el.addEventListener('input', calcGC2); el.addEventListener('change', calcGC2); });
      calcGC2();
    }, 50);
  </script>
</CalculatorLayout>
