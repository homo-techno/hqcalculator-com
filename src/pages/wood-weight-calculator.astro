---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Wood Weight Calculator - Estimate Weight by Species & Dimensions";
const description = "Calculate wood weight from species, dimensions, and moisture content. Get weight estimates in pounds and kilograms for lumber and timber.";

const relatedCalcs = [
  { name: "Board Foot Calculator", url: "/board-foot-calculator", description: "Board feet calculator." },
  { name: "Wood Moisture Calculator", url: "/wood-moisture-calculator", description: "Moisture content." },
  { name: "Timber Span Calculator", url: "/timber-span-calculator", description: "Beam span calculator." },
  { name: "Wood Expansion Calculator", url: "/wood-expansion-calculator", description: "Wood movement." },
  { name: "Wood Drying Calculator", url: "/wood-drying-calculator", description: "Drying time estimation." },
  { name: "Plywood Cut Calculator", url: "/plywood-cut-calculator", description: "Plywood cut optimizer." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Wood Weight Calculator"
  keywords="wood weight calculator, lumber weight, timber weight, wood density, specific gravity, wood species weight"
  breadcrumbs={[{ name: "Wood Weight Calculator", url: "/wood-weight-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Wood Weight Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate the weight of lumber from species, dimensions, and moisture content.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="mb-5">
        <label class="block text-sm font-medium text-text mb-2">Wood Species</label>
        <select id="ww2-species" class="ww2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
          <option value="oak-red" selected>Red Oak</option>
          <option value="oak-white">White Oak</option>
          <option value="maple-hard">Hard Maple</option>
          <option value="maple-soft">Soft Maple</option>
          <option value="walnut">Black Walnut</option>
          <option value="cherry">Cherry</option>
          <option value="pine-white">White Pine</option>
          <option value="pine-yellow">Southern Yellow Pine</option>
          <option value="poplar">Poplar/Tulipwood</option>
          <option value="ash">White Ash</option>
          <option value="birch">Yellow Birch</option>
          <option value="mahogany">Mahogany</option>
          <option value="cedar">Western Red Cedar</option>
          <option value="douglas-fir">Douglas Fir</option>
          <option value="teak">Teak</option>
          <option value="hickory">Hickory</option>
          <option value="ebony">Ebony</option>
          <option value="balsa">Balsa</option>
          <option value="ipe">Ipe</option>
          <option value="spruce">Spruce</option>
        </select>
      </div>

      <div class="grid grid-cols-3 gap-4 mb-5">
        <div>
          <label class="block text-sm font-medium text-text mb-2">Thickness (in)</label>
          <input type="number" id="ww2-thick" class="ww2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0.25" step="0.25">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Width (in)</label>
          <input type="number" id="ww2-width" class="ww2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="6" min="0.5" step="0.5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Length (ft)</label>
          <input type="number" id="ww2-length" class="ww2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8" min="1" step="1">
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-5">
        <div>
          <label class="block text-sm font-medium text-text mb-2">Number of Pieces</label>
          <input type="number" id="ww2-qty" class="ww2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="1" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-2">Moisture Content (%)</label>
          <input type="number" id="ww2-mc" class="ww2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="12" min="0" max="100" step="1">
        </div>
      </div>

      <!-- Primary Result -->
      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Weight</div>
        <div class="text-4xl font-extrabold" id="ww2-weight">--</div>
        <div class="text-sm text-blue-200 mt-1" id="ww2-weight-kg">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Weight per Piece</div>
          <div class="text-xl font-bold" id="ww2-per-piece">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Weight per BF</div>
          <div class="text-xl font-bold" id="ww2-per-bf">--</div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Specific Gravity</div>
          <div class="text-xl font-bold" id="ww2-sg">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Density (lb/ft3)</div>
          <div class="text-xl font-bold" id="ww2-density">--</div>
        </div>
      </div>

      <ShareButton calculatorId="wood-weight" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How to Calculate Wood Weight</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p><strong>Weight = Volume (ft3) x Density (lb/ft3)</strong></p>
        <p><strong>Density at MC = Oven-Dry Density x (1 + MC/100)</strong></p>
      </div>
      <h3 class="text-xl font-semibold text-text mt-8">Common Wood Densities (at 12% MC)</h3>
      <ul>
        <li><strong>Balsa:</strong> ~10 lb/ft3 (lightest commercial wood)</li>
        <li><strong>Pine:</strong> ~25-35 lb/ft3</li>
        <li><strong>Oak:</strong> ~44-47 lb/ft3</li>
        <li><strong>Maple:</strong> ~44 lb/ft3</li>
        <li><strong>Ipe:</strong> ~69 lb/ft3 (very dense tropical hardwood)</li>
        <li><strong>Ebony:</strong> ~73 lb/ft3 (one of the heaviest)</li>
      </ul>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcWW2() {
      // Specific gravity (oven-dry basis) for common species
      const speciesData: Record<string, number> = {
        'oak-red': 0.63, 'oak-white': 0.68, 'maple-hard': 0.63, 'maple-soft': 0.54,
        'walnut': 0.55, 'cherry': 0.50, 'pine-white': 0.35, 'pine-yellow': 0.51,
        'poplar': 0.42, 'ash': 0.60, 'birch': 0.62, 'mahogany': 0.45,
        'cedar': 0.32, 'douglas-fir': 0.48, 'teak': 0.55, 'hickory': 0.72,
        'ebony': 1.03, 'balsa': 0.16, 'ipe': 0.96, 'spruce': 0.40,
      };

      const sp = (document.getElementById('ww2-species') as HTMLSelectElement).value;
      const thick = parseFloat((document.getElementById('ww2-thick') as HTMLInputElement).value) || 1;
      const width = parseFloat((document.getElementById('ww2-width') as HTMLInputElement).value) || 6;
      const length = parseFloat((document.getElementById('ww2-length') as HTMLInputElement).value) || 8;
      const qty = parseInt((document.getElementById('ww2-qty') as HTMLInputElement).value) || 1;
      const mc = parseFloat((document.getElementById('ww2-mc') as HTMLInputElement).value) || 12;

      const sg = speciesData[sp] || 0.50;

      // Oven-dry density in lb/ft3
      const ovenDryDensity = sg * 62.4; // water density in lb/ft3

      // Density adjusted for moisture content
      const densityAtMC = ovenDryDensity * (1 + mc / 100);

      // Volume in cubic feet
      const volPerPiece = (thick / 12) * (width / 12) * length;
      const totalVol = volPerPiece * qty;

      // Weight
      const weightPerPiece = volPerPiece * densityAtMC;
      const totalWeight = totalVol * densityAtMC;
      const totalWeightKg = totalWeight * 0.453592;

      // Board feet
      const bfPerPiece = (thick * width * length) / 12;
      const weightPerBF = weightPerPiece / bfPerPiece;

      document.getElementById('ww2-weight')!.textContent = totalWeight.toFixed(1) + ' lbs';
      document.getElementById('ww2-weight-kg')!.textContent = totalWeightKg.toFixed(1) + ' kg';
      document.getElementById('ww2-per-piece')!.textContent = weightPerPiece.toFixed(1) + ' lbs';
      document.getElementById('ww2-per-bf')!.textContent = weightPerBF.toFixed(2) + ' lbs';
      document.getElementById('ww2-sg')!.textContent = sg.toFixed(2);
      document.getElementById('ww2-density')!.textContent = densityAtMC.toFixed(1);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.ww2-in').forEach(el => {
        el.addEventListener('input', calcWW2);
        el.addEventListener('change', calcWW2);
      });
      calcWW2();
    }, 50);
  </script>
</CalculatorLayout>
