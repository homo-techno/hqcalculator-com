---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Wedding Timeline Calculator - Wedding Day Schedule Generator";
const description = "Generate a detailed wedding day timeline including ceremony, photos, cocktail hour, reception, speeches, dances, and sendoff with customizable durations.";
const relatedCalcs = [
  { name: "Event Timeline Calculator", url: "/event-timeline-calculator", description: "General event schedule planner." },
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Invitation Calculator", url: "/invitation-calculator", description: "Invitation and RSVP tracking." },
  { name: "Floral Budget Calculator", url: "/floral-budget-calculator", description: "Flower arrangement costs." },
  { name: "DJ Playlist Calculator", url: "/dj-playlist-calculator", description: "Music for event time slots." },
  { name: "Photo Booth Calculator", url: "/photo-booth-calculator", description: "Photo booth rental planning." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Wedding Timeline Calculator"
  keywords="wedding timeline, wedding day schedule, wedding planner, ceremony timeline, reception timeline"
  breadcrumbs={[{ name: "Wedding Timeline", url: "/wedding-timeline-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Wedding Timeline Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Generate a detailed wedding day schedule from getting ready to the grand exit.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Ceremony Start Time</label>
          <input type="time" id="wt2-start" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="15:00">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Ceremony Duration (minutes)</label>
          <input type="number" id="wt2-ceremony" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" min="10" max="120" step="5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Photo Session (minutes)</label>
          <input type="number" id="wt2-photos" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="60" min="15" max="120" step="5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Cocktail Hour (minutes)</label>
          <input type="number" id="wt2-cocktail" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="60" min="0" max="120" step="15">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Speeches / Toasts</label>
          <input type="number" id="wt2-speeches" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" max="10" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Include First Look?</label>
          <select id="wt2-firstlook" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="no">No</option>
            <option value="yes">Yes (30 min before ceremony)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Getting Ready Time (hours before ceremony)</label>
          <input type="number" id="wt2-ready" class="wt2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="1" max="8" step="0.5">
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Wedding Day Duration</div>
        <div class="text-5xl font-extrabold" id="wt2-total">--</div>
        <div class="text-sm mt-1" id="wt2-range">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Start Getting Ready</div>
          <div class="text-xl font-bold" id="wt2-readytime">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Reception End</div>
          <div class="text-xl font-bold" id="wt2-endtime">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Reception Hours</div>
          <div class="text-xl font-bold" id="wt2-rxnhrs">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Dancing Time</div>
          <div class="text-xl font-bold" id="wt2-dancetime">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="wt2-timeline"></div>

      <ShareButton calculatorId="wedding-timeline" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Wedding Day Timeline Tips</h2>
      <p>Build in buffer time between events. Allow 15-20 minutes for transitions. Tell your bridal party to arrive 15 minutes before the actual time to stay on schedule.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcWT2() {
      const startStr = (document.getElementById('wt2-start') as HTMLInputElement).value;
      const ceremonyMin = parseInt((document.getElementById('wt2-ceremony') as HTMLInputElement).value) || 30;
      const photosMin = parseInt((document.getElementById('wt2-photos') as HTMLInputElement).value) || 60;
      const cocktailMin = parseInt((document.getElementById('wt2-cocktail') as HTMLInputElement).value) || 60;
      const speeches = parseInt((document.getElementById('wt2-speeches') as HTMLInputElement).value) || 0;
      const firstLook = (document.getElementById('wt2-firstlook') as HTMLSelectElement).value;
      const readyHrs = parseFloat((document.getElementById('wt2-ready') as HTMLInputElement).value) || 4;

      const parts = startStr.split(':');
      const ceremonyStartMin = parseInt(parts[0]) * 60 + parseInt(parts[1]);

      function formatTime(totalMin: number) {
        let h = Math.floor(totalMin / 60) % 24;
        const m = totalMin % 60;
        const ampm = h >= 12 ? 'PM' : 'AM';
        if (h === 0) h = 12; else if (h > 12) h -= 12;
        return h + ':' + (m < 10 ? '0' : '') + m + ' ' + ampm;
      }

      const timeline: { time: number; label: string }[] = [];
      let t = ceremonyStartMin;

      const readyStart = t - readyHrs * 60;
      timeline.push({ time: readyStart, label: 'Start Getting Ready (hair, makeup, attire)' });

      if (firstLook === 'yes') {
        timeline.push({ time: t - 30, label: 'First Look & Private Photos' });
      }

      timeline.push({ time: t - 15, label: 'Guests Arrive & Seated' });
      timeline.push({ time: t, label: 'Ceremony Begins' });
      t += ceremonyMin;
      timeline.push({ time: t, label: 'Ceremony Ends' });
      t += 10;
      timeline.push({ time: t, label: 'Receiving Line / Guests Transition' });

      const photoStart = t;
      if (cocktailMin > 0) {
        timeline.push({ time: t, label: 'Cocktail Hour Begins' });
      }
      timeline.push({ time: t, label: 'Couple & Family Photos' });
      t += Math.max(photosMin, cocktailMin);
      if (cocktailMin > 0) {
        timeline.push({ time: t, label: 'Cocktail Hour Ends' });
      }

      timeline.push({ time: t, label: 'Reception Doors Open' });
      t += 10;
      timeline.push({ time: t, label: 'Grand Entrance & First Dance' });
      t += 10;
      timeline.push({ time: t, label: 'Dinner Service Begins' });
      t += 45;

      if (speeches > 0) {
        timeline.push({ time: t, label: 'Toasts & Speeches (' + speeches + ' speakers, ~5 min each)' });
        t += speeches * 5 + 5;
      }

      timeline.push({ time: t, label: 'Cake Cutting' });
      t += 10;
      timeline.push({ time: t, label: 'Parent Dances' });
      t += 10;
      timeline.push({ time: t, label: 'Open Dance Floor' });
      const danceStart = t;
      t += 90;
      timeline.push({ time: t - 15, label: 'Last Dance' });
      timeline.push({ time: t, label: 'Grand Exit / Sendoff' });

      const totalDuration = t - readyStart;
      const danceMin = t - danceStart;
      const rxnMin = t - (photoStart + Math.max(photosMin, cocktailMin));

      document.getElementById('wt2-total')!.textContent = Math.floor(totalDuration / 60) + 'h ' + (totalDuration % 60) + 'm';
      document.getElementById('wt2-range')!.textContent = formatTime(readyStart) + ' - ' + formatTime(t);
      document.getElementById('wt2-readytime')!.textContent = formatTime(readyStart);
      document.getElementById('wt2-endtime')!.textContent = formatTime(t);
      document.getElementById('wt2-rxnhrs')!.textContent = Math.floor(rxnMin / 60) + 'h ' + (rxnMin % 60) + 'm';
      document.getElementById('wt2-dancetime')!.textContent = danceMin + ' min';

      timeline.sort((a, b) => a.time - b.time);
      let html = '<h3 class="font-semibold text-sm text-text mb-3">Your Wedding Timeline</h3>';
      timeline.forEach(item => {
        html += '<div class="flex items-start gap-3 py-1.5 border-b border-border last:border-0"><span class="text-sm font-bold text-primary whitespace-nowrap w-20">' + formatTime(item.time) + '</span><span class="text-sm text-text-secondary">' + item.label + '</span></div>';
      });
      document.getElementById('wt2-timeline')!.innerHTML = html;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.wt2-in').forEach(el => { el.addEventListener('input', calcWT2); el.addEventListener('change', calcWT2); });
      calcWT2();
    }, 50);
  </script>
</CalculatorLayout>
