---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Quadratic Equation Calculator - Solve ax² + bx + c = 0";
const description = "Solve any quadratic equation. Find roots, discriminant, vertex, and axis of symmetry with step-by-step solution.";
const relatedCalcs = [
  { name: "Scientific Calculator", url: "/scientific-calculator", description: "Scientific math." },
  { name: "Square Root", url: "/square-root-calculator", description: "Square roots." },
  { name: "Exponent Calculator", url: "/exponent-calculator", description: "Exponents." },
  { name: "Slope Calculator", url: "/slope-calculator", description: "Line slope." },
  { name: "Matrix Calculator", url: "/matrix-calculator", description: "Matrices." },
  { name: "Logarithm Calculator", url: "/logarithm-calculator", description: "Logarithms." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Quadratic Equation Calculator" keywords="quadratic equation, quadratic formula, solve quadratic, discriminant, vertex, parabola" breadcrumbs={[{ name: "Quadratic Equation", url: "/quadratic-equation-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Quadratic Equation Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Solve ax² + bx + c = 0 and see the full solution.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="flex items-center gap-2 text-lg font-mono flex-wrap justify-center">
          <input type="number" id="qe-a" class="w-20 px-2 py-2 border border-border rounded-xl text-center font-bold" value="1">
          <span>x² +</span>
          <input type="number" id="qe-b" class="w-20 px-2 py-2 border border-border rounded-xl text-center font-bold" value="-5">
          <span>x +</span>
          <input type="number" id="qe-c" class="w-20 px-2 py-2 border border-border rounded-xl text-center font-bold" value="6">
          <span>= 0</span>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Solutions</div>
          <div class="text-3xl font-extrabold font-mono" id="qe-roots">x = 0</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Discriminant (Δ)</div>
            <div class="text-xl font-bold" id="qe-disc">0</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Root Type</div>
            <div class="text-xl font-bold" id="qe-type">Real</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Vertex</div>
            <div class="text-xl font-bold font-mono" id="qe-vertex">(0, 0)</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Axis of Symmetry</div>
            <div class="text-xl font-bold font-mono" id="qe-axis">x = 0</div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-3">Step-by-Step Solution</h3>
          <div class="space-y-1 text-sm font-mono" id="qe-steps"></div>
        </div>
      </div>
      <ShareButton calculatorId="quadratic" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">The Quadratic Formula</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-center text-lg">x = (−b ± √(b²−4ac)) / 2a</div>
      <p>The discriminant (Δ = b²−4ac) tells you the nature of the roots: positive = 2 real roots, zero = 1 repeated root, negative = 2 complex roots.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcQuad() {
      const a = parseFloat((document.getElementById('qe-a') as HTMLInputElement).value) || 0;
      const b = parseFloat((document.getElementById('qe-b') as HTMLInputElement).value) || 0;
      const c = parseFloat((document.getElementById('qe-c') as HTMLInputElement).value) || 0;
      if (a === 0) {
        document.getElementById('qe-roots')!.textContent = a === 0 && b !== 0 ? `x = ${(-c/b).toFixed(4)}` : 'Not quadratic (a=0)';
        return;
      }
      const disc = b*b - 4*a*c;
      const vertexX = -b / (2*a);
      const vertexY = a*vertexX*vertexX + b*vertexX + c;
      const steps: string[] = [];
      steps.push(`Equation: ${a}x² + ${b}x + ${c} = 0`);
      steps.push(`Δ = b²−4ac = ${b}²−4(${a})(${c}) = ${disc}`);
      let rootsText: string, rootType: string;
      if (disc > 0) {
        const sqrtDisc = Math.sqrt(disc);
        const x1 = (-b + sqrtDisc) / (2*a);
        const x2 = (-b - sqrtDisc) / (2*a);
        rootsText = `x₁ = ${x1.toFixed(4)}, x₂ = ${x2.toFixed(4)}`;
        rootType = '2 Real Distinct';
        steps.push(`√Δ = ${sqrtDisc.toFixed(4)}`);
        steps.push(`x₁ = (${-b} + ${sqrtDisc.toFixed(4)}) / ${2*a} = ${x1.toFixed(4)}`);
        steps.push(`x₂ = (${-b} − ${sqrtDisc.toFixed(4)}) / ${2*a} = ${x2.toFixed(4)}`);
      } else if (disc === 0) {
        const x = -b / (2*a);
        rootsText = `x = ${x.toFixed(4)} (repeated)`;
        rootType = '1 Repeated Real';
        steps.push(`x = −b/2a = ${x.toFixed(4)}`);
      } else {
        const real = (-b / (2*a));
        const imag = Math.sqrt(-disc) / (2*a);
        rootsText = `x = ${real.toFixed(4)} ± ${imag.toFixed(4)}i`;
        rootType = '2 Complex';
        steps.push(`Real part = ${real.toFixed(4)}, Imaginary = ±${imag.toFixed(4)}i`);
      }
      document.getElementById('qe-roots')!.textContent = rootsText;
      document.getElementById('qe-disc')!.textContent = disc.toString();
      document.getElementById('qe-type')!.textContent = rootType;
      document.getElementById('qe-vertex')!.textContent = `(${vertexX.toFixed(2)}, ${vertexY.toFixed(2)})`;
      document.getElementById('qe-axis')!.textContent = `x = ${vertexX.toFixed(2)}`;
      document.getElementById('qe-steps')!.innerHTML = steps.map(s => `<div>${s}</div>`).join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      ['qe-a','qe-b','qe-c'].forEach(id => document.getElementById(id)!.addEventListener('input', calcQuad));
      calcQuad();
    }, 50);
  </script>
</CalculatorLayout>
