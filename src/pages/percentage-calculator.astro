---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Percentage Calculator - Free Online Percent Calculator 2026";
const description = "Calculate percentages instantly. Find what percent of a number is, percentage increase/decrease, and more. Free, fast, no sign-up required.";

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I calculate a percentage of a number?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To find X% of a number, multiply the number by X and divide by 100. For example, 25% of 200 = 200 × 25 / 100 = 50."
      }
    },
    {
      "@type": "Question",
      "name": "How do I calculate percentage increase?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Percentage increase = ((New Value - Old Value) / Old Value) × 100. For example, if a price goes from $50 to $65, the increase is ((65-50)/50) × 100 = 30%."
      }
    },
    {
      "@type": "Question",
      "name": "What is the percentage difference formula?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Percentage difference = (|Value1 - Value2| / ((Value1 + Value2) / 2)) × 100. This calculates the relative difference between two values."
      }
    }
  ]
};

const relatedCalcs = [
  { name: "Fraction Calculator", url: "/fraction-calculator", description: "Convert, add, subtract, multiply and divide fractions easily." },
  { name: "Ratio Calculator", url: "/ratio-calculator", description: "Solve ratio and proportion problems step by step." },
  { name: "Discount Calculator", url: "/discount-calculator", description: "Calculate sale prices and savings from discounts." },
  { name: "Tip Calculator", url: "/tip-calculator", description: "Split bills and calculate tips for restaurants." },
  { name: "Markup Calculator", url: "/markup-calculator", description: "Calculate markup and profit margins for pricing." },
  { name: "GPA Calculator", url: "/gpa-calculator", description: "Calculate your grade point average instantly." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Percentage Calculator"
  keywords="percentage calculator, percent calculator, calculate percentage, percentage of a number, percentage increase, percentage decrease"
  breadcrumbs={[{ name: "Percentage Calculator", url: "/percentage-calculator" }]}
>
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- H1 -->
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Percentage Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate percentages instantly. Find percentages of numbers, percentage changes, and more — no sign-up required.</p>

    <!-- Calculator Card -->
    <div class="bg-white border border-border rounded-2xl shadow-sm overflow-hidden">
      <!-- Mode Tabs -->
      <div class="flex border-b border-border overflow-x-auto">
        <button class="mode-tab active px-5 py-3 text-sm font-medium text-primary border-b-2 border-primary whitespace-nowrap" data-mode="basic">
          What is X% of Y?
        </button>
        <button class="mode-tab px-5 py-3 text-sm font-medium text-text-secondary hover:text-primary whitespace-nowrap border-b-2 border-transparent" data-mode="reverse">
          X is what % of Y?
        </button>
        <button class="mode-tab px-5 py-3 text-sm font-medium text-text-secondary hover:text-primary whitespace-nowrap border-b-2 border-transparent" data-mode="change">
          % Increase / Decrease
        </button>
        <button class="mode-tab px-5 py-3 text-sm font-medium text-text-secondary hover:text-primary whitespace-nowrap border-b-2 border-transparent" data-mode="difference">
          % Difference
        </button>
      </div>

      <div class="p-6 sm:p-8">
        <!-- MODE: Basic (What is X% of Y?) -->
        <div id="panel-basic" class="calc-panel">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <div class="space-y-4">
                <div>
                  <label for="basic-percent" class="block text-sm font-medium text-text mb-1">Percentage</label>
                  <div class="flex items-center gap-2">
                    <input type="text" id="basic-percent" value="25" inputmode="decimal"
                      class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                    <span class="text-xl text-text-muted font-bold">%</span>
                  </div>
                </div>
                <div class="text-center text-2xl text-text-muted font-light">of</div>
                <div>
                  <label for="basic-number" class="block text-sm font-medium text-text mb-1">Number</label>
                  <input type="text" id="basic-number" value="200" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
              </div>
            </div>
            <div class="flex items-center">
              <div class="w-full text-center p-6 bg-primary rounded-2xl text-white">
                <div class="text-sm font-medium text-blue-200 uppercase tracking-wide mb-2">Result</div>
                <div id="basic-result" class="text-5xl sm:text-6xl font-extrabold">50</div>
                <div id="basic-formula" class="text-sm text-blue-200 mt-3">25% of 200 = 50</div>
              </div>
            </div>
          </div>
        </div>

        <!-- MODE: Reverse (X is what % of Y?) -->
        <div id="panel-reverse" class="calc-panel hidden">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <div class="space-y-4">
                <div>
                  <label for="rev-x" class="block text-sm font-medium text-text mb-1">Value</label>
                  <input type="text" id="rev-x" value="50" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
                <div class="text-center text-2xl text-text-muted font-light">is what % of</div>
                <div>
                  <label for="rev-y" class="block text-sm font-medium text-text mb-1">Total</label>
                  <input type="text" id="rev-y" value="200" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
              </div>
            </div>
            <div class="flex items-center">
              <div class="w-full text-center p-6 bg-secondary rounded-2xl text-white">
                <div class="text-sm font-medium text-emerald-200 uppercase tracking-wide mb-2">Result</div>
                <div id="rev-result" class="text-5xl sm:text-6xl font-extrabold">25%</div>
                <div id="rev-formula" class="text-sm text-emerald-200 mt-3">50 is 25% of 200</div>
              </div>
            </div>
          </div>
        </div>

        <!-- MODE: Percentage Change -->
        <div id="panel-change" class="calc-panel hidden">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <div class="space-y-4">
                <div>
                  <label for="change-from" class="block text-sm font-medium text-text mb-1">From (Original Value)</label>
                  <input type="text" id="change-from" value="100" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
                <div class="text-center text-2xl text-text-muted font-light">to</div>
                <div>
                  <label for="change-to" class="block text-sm font-medium text-text mb-1">To (New Value)</label>
                  <input type="text" id="change-to" value="150" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
              </div>
            </div>
            <div class="flex items-center">
              <div class="w-full text-center p-6 rounded-2xl text-white" id="change-result-card" style="background: #10b981">
                <div class="text-sm font-medium opacity-80 uppercase tracking-wide mb-2" id="change-direction">Increase</div>
                <div id="change-result" class="text-5xl sm:text-6xl font-extrabold">50%</div>
                <div id="change-formula" class="text-sm opacity-80 mt-3">From 100 to 150 = +50%</div>
                <div id="change-diff" class="text-sm opacity-80 mt-1">Difference: 50</div>
              </div>
            </div>
          </div>
        </div>

        <!-- MODE: Percentage Difference -->
        <div id="panel-difference" class="calc-panel hidden">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <div class="space-y-4">
                <div>
                  <label for="diff-a" class="block text-sm font-medium text-text mb-1">Value 1</label>
                  <input type="text" id="diff-a" value="100" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
                <div class="text-center text-2xl text-text-muted font-light">vs</div>
                <div>
                  <label for="diff-b" class="block text-sm font-medium text-text mb-1">Value 2</label>
                  <input type="text" id="diff-b" value="150" inputmode="decimal"
                    class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                </div>
              </div>
            </div>
            <div class="flex items-center">
              <div class="w-full text-center p-6 bg-accent rounded-2xl text-white">
                <div class="text-sm font-medium text-amber-200 uppercase tracking-wide mb-2">% Difference</div>
                <div id="diff-result" class="text-5xl sm:text-6xl font-extrabold">40%</div>
                <div id="diff-formula" class="text-sm text-amber-200 mt-3">|100 - 150| / ((100 + 150) / 2) = 40%</div>
              </div>
            </div>
          </div>
        </div>

        <ShareButton calculatorId="percentage" />
        <FeedbackWidget />
      </div>
    </div>

    <!-- Percentage Reference Table -->
    <div class="mt-12 bg-white border border-border rounded-2xl p-6 sm:p-8">
      <h2 class="text-2xl font-bold text-text mb-4">Quick Percentage Reference Table</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-sm" id="ref-table">
          <thead>
            <tr class="border-b border-border">
              <th class="text-left py-2 pr-4 font-semibold text-text">Percentage</th>
              <th class="text-left py-2 pr-4 font-semibold text-text">Fraction</th>
              <th class="text-left py-2 pr-4 font-semibold text-text">Decimal</th>
              <th class="text-right py-2 font-semibold text-text">Value of <span id="ref-base">200</span></th>
            </tr>
          </thead>
          <tbody class="text-text-secondary" id="ref-tbody">
          </tbody>
        </table>
      </div>
    </div>

    <!-- SEO Content -->
    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How to Calculate Percentages</h2>
      <p>A percentage is a way of expressing a number as a fraction of 100. The word "percent" comes from the Latin "per centum," meaning "by the hundred." Percentages are used everywhere — from shopping discounts and tax calculations to exam scores and financial reports.</p>

      <h3 class="text-xl font-semibold text-text mt-8">The Basic Percentage Formula</h3>
      <p>To find <strong>X% of a number Y</strong>, use this formula:</p>
      <div class="bg-surface-alt rounded-xl p-4 my-4 text-center font-mono text-lg">
        Result = (X / 100) &times; Y
      </div>
      <p><strong>Example:</strong> What is 15% of 300?</p>
      <p>Result = (15 / 100) &times; 300 = 0.15 &times; 300 = <strong>45</strong></p>

      <h3 class="text-xl font-semibold text-text mt-8">How to Find What Percentage One Number Is of Another</h3>
      <p>To find what percentage X is of Y:</p>
      <div class="bg-surface-alt rounded-xl p-4 my-4 text-center font-mono text-lg">
        Percentage = (X / Y) &times; 100
      </div>
      <p><strong>Example:</strong> 45 is what percent of 300?</p>
      <p>Percentage = (45 / 300) &times; 100 = <strong>15%</strong></p>

      <h3 class="text-xl font-semibold text-text mt-8">How to Calculate Percentage Increase or Decrease</h3>
      <p>The percentage change formula measures how much a value has increased or decreased relative to its original value:</p>
      <div class="bg-surface-alt rounded-xl p-4 my-4 text-center font-mono text-lg">
        % Change = ((New - Old) / Old) &times; 100
      </div>
      <p><strong>Example:</strong> A product's price increased from $80 to $100.</p>
      <p>% Change = ((100 - 80) / 80) &times; 100 = (20 / 80) &times; 100 = <strong>25% increase</strong></p>

      <h3 class="text-xl font-semibold text-text mt-8">Percentage Difference Between Two Values</h3>
      <p>Unlike percentage change, percentage difference treats both values equally — it doesn't matter which came first:</p>
      <div class="bg-surface-alt rounded-xl p-4 my-4 text-center font-mono text-lg">
        % Difference = (|V1 - V2| / ((V1 + V2) / 2)) &times; 100
      </div>
      <p><strong>Example:</strong> Compare 80 and 100.</p>
      <p>% Difference = (|80 - 100| / ((80 + 100) / 2)) &times; 100 = (20 / 90) &times; 100 = <strong>22.22%</strong></p>

      <h3 class="text-xl font-semibold text-text mt-8">Common Percentage Conversions</h3>
      <p>Here are the most commonly used percentages and their fraction/decimal equivalents:</p>
      <ul>
        <li><strong>10%</strong> = 1/10 = 0.1</li>
        <li><strong>20%</strong> = 1/5 = 0.2</li>
        <li><strong>25%</strong> = 1/4 = 0.25</li>
        <li><strong>33.33%</strong> = 1/3 = 0.333...</li>
        <li><strong>50%</strong> = 1/2 = 0.5</li>
        <li><strong>75%</strong> = 3/4 = 0.75</li>
      </ul>

      <h3 class="text-xl font-semibold text-text mt-8">Real-World Applications of Percentages</h3>
      <p>Percentages are essential in everyday life:</p>
      <ul>
        <li><strong>Shopping:</strong> Calculate discounts — "30% off $59.99" = $41.99</li>
        <li><strong>Finance:</strong> Interest rates, investment returns, inflation</li>
        <li><strong>Taxes:</strong> Income tax brackets, sales tax, property tax</li>
        <li><strong>Education:</strong> Exam scores, GPA calculations</li>
        <li><strong>Health:</strong> BMI, body fat percentage, nutrition labels</li>
        <li><strong>Business:</strong> Profit margins, growth rates, market share</li>
      </ul>

      <h2 class="text-2xl font-bold text-text mt-12">Frequently Asked Questions</h2>

      <h3 class="text-lg font-semibold text-text mt-6">How do I calculate a percentage of a number?</h3>
      <p>To find X% of a number, multiply the number by X and divide by 100. For example, 25% of 200 = 200 &times; 25 / 100 = 50. You can also convert the percentage to a decimal first: 25% = 0.25, then 0.25 &times; 200 = 50.</p>

      <h3 class="text-lg font-semibold text-text mt-6">How do I calculate percentage increase?</h3>
      <p>Percentage increase = ((New Value - Old Value) / Old Value) &times; 100. For example, if a price goes from $50 to $65, the increase is ((65-50)/50) &times; 100 = 30%.</p>

      <h3 class="text-lg font-semibold text-text mt-6">What is the percentage difference formula?</h3>
      <p>Percentage difference = (|Value1 - Value2| / ((Value1 + Value2) / 2)) &times; 100. This calculates the relative difference between two values, treating them symmetrically.</p>

      <h3 class="text-lg font-semibold text-text mt-6">How do I convert a fraction to a percentage?</h3>
      <p>Divide the numerator by the denominator, then multiply by 100. For example, 3/4 = 0.75 = 75%.</p>

      <h3 class="text-lg font-semibold text-text mt-6">How do I calculate percentage off a price?</h3>
      <p>Multiply the original price by (1 - discount/100). For example, 20% off $80: $80 &times; (1 - 20/100) = $80 &times; 0.8 = $64. You save $16.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <!-- Calculator Logic -->
  <script>
    const parse = (v: string) => parseFloat(v.replace(/[^0-9.\-]/g, '')) || 0;
    const fmt = (n: number) => {
      if (Number.isInteger(n) && Math.abs(n) < 1e15) return n.toLocaleString('en-US');
      return parseFloat(n.toFixed(6)).toLocaleString('en-US', { maximumFractionDigits: 6 });
    };

    // Mode switching
    const tabs = document.querySelectorAll('.mode-tab');
    const panels = document.querySelectorAll('.calc-panel');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => {
          t.classList.remove('active', 'text-primary', 'border-primary');
          t.classList.add('text-text-secondary', 'border-transparent');
        });
        tab.classList.add('active', 'text-primary', 'border-primary');
        tab.classList.remove('text-text-secondary', 'border-transparent');
        panels.forEach(p => p.classList.add('hidden'));
        const mode = (tab as HTMLElement).dataset.mode;
        document.getElementById(`panel-${mode}`)?.classList.remove('hidden');
        // Update URL without reload
        const url = new URL(window.location.href);
        url.searchParams.set('mode', mode || 'basic');
        history.replaceState(null, '', url.toString());
      });
    });

    // Restore mode from URL
    const urlMode = new URL(window.location.href).searchParams.get('mode');
    if (urlMode) {
      const targetTab = document.querySelector(`.mode-tab[data-mode="${urlMode}"]`) as HTMLElement;
      targetTab?.click();
    }

    // MODE: Basic
    const basicPercent = document.getElementById('basic-percent') as HTMLInputElement;
    const basicNumber = document.getElementById('basic-number') as HTMLInputElement;
    const basicResult = document.getElementById('basic-result')!;
    const basicFormula = document.getElementById('basic-formula')!;

    function calcBasic() {
      const p = parse(basicPercent.value);
      const n = parse(basicNumber.value);
      const result = (p / 100) * n;
      basicResult.textContent = fmt(result);
      basicFormula.textContent = `${fmt(p)}% of ${fmt(n)} = ${fmt(result)}`;
      updateRefTable(n);
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    basicPercent.addEventListener('input', calcBasic);
    basicNumber.addEventListener('input', calcBasic);

    // MODE: Reverse
    const revX = document.getElementById('rev-x') as HTMLInputElement;
    const revY = document.getElementById('rev-y') as HTMLInputElement;
    const revResult = document.getElementById('rev-result')!;
    const revFormula = document.getElementById('rev-formula')!;

    function calcReverse() {
      const x = parse(revX.value);
      const y = parse(revY.value);
      const result = y !== 0 ? (x / y) * 100 : 0;
      revResult.textContent = `${parseFloat(result.toFixed(4))}%`;
      revFormula.textContent = `${fmt(x)} is ${parseFloat(result.toFixed(4))}% of ${fmt(y)}`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    revX.addEventListener('input', calcReverse);
    revY.addEventListener('input', calcReverse);

    // MODE: Change
    const changeFrom = document.getElementById('change-from') as HTMLInputElement;
    const changeTo = document.getElementById('change-to') as HTMLInputElement;
    const changeResult = document.getElementById('change-result')!;
    const changeFormula = document.getElementById('change-formula')!;
    const changeDiff = document.getElementById('change-diff')!;
    const changeDirection = document.getElementById('change-direction')!;
    const changeCard = document.getElementById('change-result-card')!;

    function calcChange() {
      const from = parse(changeFrom.value);
      const to = parse(changeTo.value);
      const diff = to - from;
      const pct = from !== 0 ? (diff / from) * 100 : 0;
      const isIncrease = pct >= 0;
      changeResult.textContent = `${parseFloat(Math.abs(pct).toFixed(4))}%`;
      changeDirection.textContent = isIncrease ? 'Increase' : 'Decrease';
      changeCard.style.background = isIncrease ? '#10b981' : '#ef4444';
      changeFormula.textContent = `From ${fmt(from)} to ${fmt(to)} = ${pct >= 0 ? '+' : ''}${parseFloat(pct.toFixed(4))}%`;
      changeDiff.textContent = `Difference: ${fmt(Math.abs(diff))}`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    changeFrom.addEventListener('input', calcChange);
    changeTo.addEventListener('input', calcChange);

    // MODE: Difference
    const diffA = document.getElementById('diff-a') as HTMLInputElement;
    const diffB = document.getElementById('diff-b') as HTMLInputElement;
    const diffResult = document.getElementById('diff-result')!;
    const diffFormula = document.getElementById('diff-formula')!;

    function calcDifference() {
      const a = parse(diffA.value);
      const b = parse(diffB.value);
      const avg = (a + b) / 2;
      const result = avg !== 0 ? (Math.abs(a - b) / avg) * 100 : 0;
      diffResult.textContent = `${parseFloat(result.toFixed(4))}%`;
      diffFormula.textContent = `|${fmt(a)} - ${fmt(b)}| / ((${fmt(a)} + ${fmt(b)}) / 2) = ${parseFloat(result.toFixed(4))}%`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    diffA.addEventListener('input', calcDifference);
    diffB.addEventListener('input', calcDifference);

    // Reference table
    const refPercents = [1, 5, 10, 15, 20, 25, 30, 33.33, 40, 50, 60, 66.67, 75, 80, 90, 100];
    const fractions: Record<number, string> = { 1: '1/100', 5: '1/20', 10: '1/10', 15: '3/20', 20: '1/5', 25: '1/4', 30: '3/10', 33.33: '1/3', 40: '2/5', 50: '1/2', 60: '3/5', 66.67: '2/3', 75: '3/4', 80: '4/5', 90: '9/10', 100: '1/1' };

    function updateRefTable(base: number) {
      const tbody = document.getElementById('ref-tbody')!;
      const baseSpan = document.getElementById('ref-base')!;
      baseSpan.textContent = fmt(base);
      tbody.innerHTML = refPercents.map(p => `
        <tr class="border-b border-border/50">
          <td class="py-2 pr-4">${p}%</td>
          <td class="py-2 pr-4">${fractions[p] || ''}</td>
          <td class="py-2 pr-4">${(p / 100).toFixed(4)}</td>
          <td class="py-2 text-right font-medium">${fmt((p / 100) * base)}</td>
        </tr>
      `).join('');
    }

    // Initial calculations
    calcBasic();
    calcReverse();
    calcChange();
    calcDifference();

    // Restore values from URL params
    const params = new URL(window.location.href).searchParams;
    if (params.get('p')) basicPercent.value = params.get('p')!;
    if (params.get('n')) basicNumber.value = params.get('n')!;
    if (params.get('p') || params.get('n')) calcBasic();
  </script>
</CalculatorLayout>
