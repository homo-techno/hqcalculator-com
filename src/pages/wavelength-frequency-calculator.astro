---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Wavelength Frequency Calculator - EM Wave Converter 2026";
const description = "Convert between wavelength, frequency, and period for electromagnetic waves. Supports radio, microwave, infrared, visible light, and more.";

const relatedCalcs = [
  { name: "Free Space Path Loss Calculator", url: "/free-space-path-loss-calculator", description: "FSPL from frequency and distance." },
  { name: "Antenna Gain Calculator", url: "/antenna-gain-calculator", description: "Antenna gain from aperture." },
  { name: "RF Power Converter", url: "/rf-power-converter-calculator", description: "Convert dBm, dBW, watts." },
  { name: "Fresnel Zone Calculator", url: "/fresnel-zone-calculator", description: "Fresnel zone clearance radius." },
  { name: "Link Budget Calculator", url: "/link-budget-calculator", description: "Complete RF link budget analysis." },
  { name: "Cable Attenuation Calculator", url: "/cable-attenuation-calculator", description: "Coaxial cable signal attenuation." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Wavelength Frequency Calculator"
  keywords="wavelength frequency calculator, electromagnetic wave, wavelength to frequency, frequency to wavelength, period, speed of light"
  breadcrumbs={[{ name: "Wavelength Frequency Calculator", url: "/wavelength-frequency-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Wavelength Frequency Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert between wavelength, frequency, and period for electromagnetic waves. Enter any value and the others update automatically.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="mb-4">
        <label class="block text-sm font-medium text-text mb-1">Frequency</label>
        <div class="flex gap-2">
          <input type="number" id="wfc-freq" class="wfc-in flex-1 px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2400" step="any" min="0" data-field="freq">
          <select id="wfc-freq-unit" class="wfc-in px-4 py-3 border border-border rounded-xl text-lg" data-field="freq-unit">
            <option value="Hz">Hz</option>
            <option value="kHz">kHz</option>
            <option value="MHz" selected>MHz</option>
            <option value="GHz">GHz</option>
            <option value="THz">THz</option>
          </select>
        </div>
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-text mb-1">Wavelength</label>
        <div class="flex gap-2">
          <input type="number" id="wfc-wave" class="wfc-in flex-1 px-4 py-3 border border-border rounded-xl text-lg font-bold" step="any" min="0" data-field="wave">
          <select id="wfc-wave-unit" class="wfc-in px-4 py-3 border border-border rounded-xl text-lg" data-field="wave-unit">
            <option value="km">km</option>
            <option value="m">m</option>
            <option value="cm" selected>cm</option>
            <option value="mm">mm</option>
            <option value="um">um</option>
            <option value="nm">nm</option>
          </select>
        </div>
      </div>

      <div class="mb-6">
        <label class="block text-sm font-medium text-text mb-1">Period</label>
        <div class="flex gap-2">
          <input type="number" id="wfc-period" class="wfc-in flex-1 px-4 py-3 border border-border rounded-xl text-lg font-bold" step="any" min="0" data-field="period">
          <select id="wfc-period-unit" class="wfc-in px-4 py-3 border border-border rounded-xl text-lg" data-field="period-unit">
            <option value="s">seconds</option>
            <option value="ms">ms</option>
            <option value="us">us</option>
            <option value="ns" selected>ns</option>
            <option value="ps">ps</option>
          </select>
        </div>
      </div>

      <!-- Primary Result -->
      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm font-medium text-blue-100 mb-1">EM Band</div>
        <div class="text-4xl font-extrabold" id="wfc-band">--</div>
        <div class="text-sm text-blue-200 mt-1" id="wfc-band-sub">--</div>
      </div>

      <!-- Secondary Stats -->
      <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted mb-1">Frequency (Hz)</div>
          <div class="text-xl font-bold text-text" id="wfc-freq-hz">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted mb-1">Wavelength (m)</div>
          <div class="text-xl font-bold text-text" id="wfc-wave-m">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted mb-1">Photon Energy</div>
          <div class="text-xl font-bold text-text" id="wfc-energy">--</div>
          <div class="text-xs text-text-muted">eV</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted mb-1">Angular Frequency</div>
          <div class="text-xl font-bold text-text" id="wfc-angular">--</div>
          <div class="text-xs text-text-muted">rad/s</div>
        </div>
      </div>

      <ShareButton calculatorId="wavelength-frequency" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Wavelength, Frequency, and Period</h2>
      <p>Electromagnetic waves travel at the speed of light (c = 299,792,458 m/s in vacuum). Wavelength, frequency, and period are related by simple formulas.</p>
      <div class="bg-surface-alt rounded-xl p-4 my-4 text-center font-mono text-sm">
        c = f x lambda
        <br>lambda = c / f
        <br>T = 1 / f
        <br>E = h x f (photon energy, h = 6.626e-34 J*s)
      </div>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const c = 299792458;
    const h = 6.62607015e-34;
    const eVconst = 1.602176634e-19;
    let wfcSource = 'freq';

    function freqToHz(val: number, unit: string): number {
      const m: Record<string, number> = { Hz: 1, kHz: 1e3, MHz: 1e6, GHz: 1e9, THz: 1e12 };
      return val * (m[unit] || 1);
    }
    function waveToM(val: number, unit: string): number {
      const m: Record<string, number> = { km: 1e3, m: 1, cm: 0.01, mm: 0.001, um: 1e-6, nm: 1e-9 };
      return val * (m[unit] || 1);
    }
    function periodToS(val: number, unit: string): number {
      const m: Record<string, number> = { s: 1, ms: 1e-3, us: 1e-6, ns: 1e-9, ps: 1e-12 };
      return val * (m[unit] || 1);
    }
    function hzToUnit(hz: number, unit: string): number {
      const m: Record<string, number> = { Hz: 1, kHz: 1e3, MHz: 1e6, GHz: 1e9, THz: 1e12 };
      return hz / (m[unit] || 1);
    }
    function mToUnit(mVal: number, unit: string): number {
      const m: Record<string, number> = { km: 1e3, m: 1, cm: 0.01, mm: 0.001, um: 1e-6, nm: 1e-9 };
      return mVal / (m[unit] || 1);
    }
    function sToUnit(s: number, unit: string): number {
      const m: Record<string, number> = { s: 1, ms: 1e-3, us: 1e-6, ns: 1e-9, ps: 1e-12 };
      return s / (m[unit] || 1);
    }

    function getBand(hz: number): [string, string] {
      if (hz < 3e4) return ['VLF', 'Very Low Frequency'];
      if (hz < 3e5) return ['LF', 'Low Frequency'];
      if (hz < 3e6) return ['MF', 'Medium Frequency'];
      if (hz < 3e7) return ['HF', 'High Frequency'];
      if (hz < 3e8) return ['VHF', 'Very High Frequency'];
      if (hz < 3e9) return ['UHF', 'Ultra High Frequency'];
      if (hz < 3e10) return ['SHF', 'Super High Frequency'];
      if (hz < 3e11) return ['EHF', 'Extremely High Frequency'];
      if (hz < 4e14) return ['Infrared', 'Infrared Radiation'];
      if (hz < 7.5e14) return ['Visible', 'Visible Light'];
      if (hz < 3e16) return ['UV', 'Ultraviolet'];
      if (hz < 3e19) return ['X-Ray', 'X-Ray Radiation'];
      return ['Gamma', 'Gamma Ray'];
    }

    function calcWFC() {
      let freqHz: number;

      if (wfcSource === 'freq' || wfcSource === 'freq-unit') {
        const val = parseFloat((document.getElementById('wfc-freq') as HTMLInputElement).value) || 0;
        const unit = (document.getElementById('wfc-freq-unit') as HTMLSelectElement).value;
        freqHz = freqToHz(val, unit);
      } else if (wfcSource === 'wave' || wfcSource === 'wave-unit') {
        const val = parseFloat((document.getElementById('wfc-wave') as HTMLInputElement).value) || 0;
        const unit = (document.getElementById('wfc-wave-unit') as HTMLSelectElement).value;
        const waveM = waveToM(val, unit);
        freqHz = waveM > 0 ? c / waveM : 0;
      } else {
        const val = parseFloat((document.getElementById('wfc-period') as HTMLInputElement).value) || 0;
        const unit = (document.getElementById('wfc-period-unit') as HTMLSelectElement).value;
        const periodS = periodToS(val, unit);
        freqHz = periodS > 0 ? 1 / periodS : 0;
      }

      if (freqHz <= 0) return;

      const waveM = c / freqHz;
      const periodS = 1 / freqHz;

      // Update fields that aren't the source
      if (wfcSource !== 'freq' && wfcSource !== 'freq-unit') {
        const fUnit = (document.getElementById('wfc-freq-unit') as HTMLSelectElement).value;
        (document.getElementById('wfc-freq') as HTMLInputElement).value = hzToUnit(freqHz, fUnit).toPrecision(6);
      }
      if (wfcSource !== 'wave' && wfcSource !== 'wave-unit') {
        const wUnit = (document.getElementById('wfc-wave-unit') as HTMLSelectElement).value;
        (document.getElementById('wfc-wave') as HTMLInputElement).value = mToUnit(waveM, wUnit).toPrecision(6);
      }
      if (wfcSource !== 'period' && wfcSource !== 'period-unit') {
        const pUnit = (document.getElementById('wfc-period-unit') as HTMLSelectElement).value;
        (document.getElementById('wfc-period') as HTMLInputElement).value = sToUnit(periodS, pUnit).toPrecision(6);
      }

      const [band, bandDesc] = getBand(freqHz);
      document.getElementById('wfc-band')!.textContent = band;
      document.getElementById('wfc-band-sub')!.textContent = bandDesc;
      document.getElementById('wfc-freq-hz')!.textContent = freqHz.toExponential(4);
      document.getElementById('wfc-wave-m')!.textContent = waveM.toExponential(4);

      const energyEv = (h * freqHz) / eVconst;
      document.getElementById('wfc-energy')!.textContent = energyEv.toExponential(4);
      document.getElementById('wfc-angular')!.textContent = (2 * Math.PI * freqHz).toExponential(4);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.wfc-in').forEach(el => {
        const handler = (e: Event) => {
          wfcSource = (e.target as HTMLElement).dataset.field || 'freq';
          calcWFC();
        };
        el.addEventListener('input', handler);
        el.addEventListener('change', handler);
      });
      wfcSource = 'freq';
      calcWFC();
    }, 50);
  </script>
</CalculatorLayout>
