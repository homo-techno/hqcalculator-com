---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Incorporation Calculator - LLC, S-Corp & C-Corp Costs by State";
const description = "Calculate business incorporation costs for LLC, S-Corp, and C-Corp formations by state, including filing fees, registered agent, and annual requirements.";
const relatedCalcs = [
  { name: "Compliance Cost Calculator", url: "/compliance-cost-calculator", description: "Annual compliance costs." },
  { name: "Trademark Cost Calculator", url: "/trademark-cost-calculator", description: "Protect your brand." },
  { name: "Legal Fee Calculator", url: "/legal-fee-calculator", description: "Attorney costs." },
  { name: "Tax Penalty Calculator", url: "/tax-penalty-calculator", description: "IRS penalty estimates." },
  { name: "Regulatory Compliance", url: "/regulatory-compliance-calculator", description: "Regulatory budgeting." },
  { name: "Workers Comp Calculator", url: "/workers-comp-calculator", description: "Workers comp premiums." },
];
---

<CalculatorLayout title={title} description={description} calculatorName="Incorporation Calculator" keywords="incorporation calculator, LLC cost, S-Corp formation, C-Corp filing, state filing fee, registered agent, business formation" breadcrumbs={[{ name: "Incorporation", url: "/incorporation-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Incorporation Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate business formation costs by entity type and state.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Business Entity Type</label>
          <select id="inc-type" class="inc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="llc" selected>LLC (Limited Liability Company)</option>
            <option value="s-corp">S-Corporation</option>
            <option value="c-corp">C-Corporation</option>
            <option value="nonprofit">Nonprofit Corporation</option>
            <option value="sole-prop">Sole Proprietorship / DBA</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">State Fee Level</label>
          <select id="inc-state" class="inc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="low">Low-fee state (e.g., CO, IA, AR)</option>
            <option value="medium" selected>Medium-fee state (e.g., TX, FL, OH)</option>
            <option value="high">High-fee state (e.g., CA, NY, MA)</option>
            <option value="delaware">Delaware</option>
            <option value="wyoming">Wyoming</option>
            <option value="nevada">Nevada</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Registered Agent</label>
          <select id="inc-agent" class="inc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="self">Self (no cost, must have state address)</option>
            <option value="service" selected>Registered agent service ($100-300/yr)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Legal Assistance</label>
          <select id="inc-legal" class="inc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="diy">DIY filing</option>
            <option value="online" selected>Online formation service ($100-400)</option>
            <option value="attorney">Business attorney ($500-2,000)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Expedited Processing?</label>
          <select id="inc-expedite" class="inc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="no" selected>No - Standard processing</option>
            <option value="yes">Yes - Expedited (+$50-$500)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Include First Year Costs?</label>
          <select id="inc-annual" class="inc-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="no">Formation only</option>
            <option value="yes" selected>Include first year annual fees</option>
          </select>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Estimated Total Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="inc-total"></div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">State Filing Fee</div>
            <div class="text-xl font-bold text-secondary" id="inc-filing"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Legal / Service Fee</div>
            <div class="text-xl font-bold" id="inc-legal-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Registered Agent</div>
            <div class="text-xl font-bold text-orange-600" id="inc-agent-cost"></div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Annual/Franchise Tax</div>
            <div class="text-xl font-bold" id="inc-annual-cost"></div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="incorporation" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Understanding Business Formation Costs</h2>
      <p>Forming an LLC typically costs $50-$500 in state filing fees, while corporations may cost $100-$800. Delaware and Wyoming are popular for their business-friendly laws and lower fees. Beyond formation, consider ongoing costs like annual reports, franchise taxes, and registered agent fees.</p>
      <h3 class="text-xl font-semibold text-text mt-8">LLC vs Corporation</h3>
      <p>LLCs offer flexibility and pass-through taxation with less formality. S-Corps can save on self-employment taxes but require payroll. C-Corps are ideal for venture funding but face double taxation. Consult a tax professional to determine the best structure for your situation.</p>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const fmt = (n: number) => '$' + Math.round(n).toLocaleString();

    function calcINC() {
      const entityType = (document.getElementById('inc-type') as HTMLSelectElement).value;
      const stateLevel = (document.getElementById('inc-state') as HTMLSelectElement).value;
      const agent = (document.getElementById('inc-agent') as HTMLSelectElement).value;
      const legal = (document.getElementById('inc-legal') as HTMLSelectElement).value;
      const expedite = (document.getElementById('inc-expedite') as HTMLSelectElement).value;
      const inclAnnual = (document.getElementById('inc-annual') as HTMLSelectElement).value;

      // State filing fees by entity and state
      const filingFees: Record<string, Record<string, number>> = {
        llc: { low: 50, medium: 125, high: 200, delaware: 90, wyoming: 100, nevada: 425 },
        's-corp': { low: 75, medium: 150, high: 275, delaware: 89, wyoming: 100, nevada: 725 },
        'c-corp': { low: 75, medium: 150, high: 275, delaware: 89, wyoming: 100, nevada: 725 },
        nonprofit: { low: 50, medium: 100, high: 200, delaware: 89, wyoming: 25, nevada: 75 },
        'sole-prop': { low: 10, medium: 25, high: 50, delaware: 25, wyoming: 100, nevada: 200 }
      };

      const filingFee = (filingFees[entityType] && filingFees[entityType][stateLevel]) || 125;

      const agentCost = agent === 'service' ? 175 : 0;

      const legalCosts: Record<string, number> = { diy: 0, online: 250, attorney: 1200 };
      const legalCost = legalCosts[legal] || 0;

      const expediteFee = expedite === 'yes' ? (stateLevel === 'high' ? 350 : 150) : 0;

      // Annual franchise/report fees
      let annualCost = 0;
      if (inclAnnual === 'yes') {
        const annualFees: Record<string, Record<string, number>> = {
          llc: { low: 0, medium: 50, high: 800, delaware: 300, wyoming: 60, nevada: 350 },
          's-corp': { low: 0, medium: 50, high: 800, delaware: 225, wyoming: 60, nevada: 500 },
          'c-corp': { low: 0, medium: 100, high: 800, delaware: 225, wyoming: 60, nevada: 500 },
          nonprofit: { low: 0, medium: 25, high: 50, delaware: 25, wyoming: 25, nevada: 50 },
          'sole-prop': { low: 0, medium: 0, high: 0, delaware: 0, wyoming: 0, nevada: 200 }
        };
        annualCost = (annualFees[entityType] && annualFees[entityType][stateLevel]) || 50;
      }

      const total = filingFee + agentCost + legalCost + expediteFee + annualCost;

      document.getElementById('inc-total')!.textContent = fmt(total);
      document.getElementById('inc-filing')!.textContent = fmt(filingFee + expediteFee);
      document.getElementById('inc-legal-cost')!.textContent = fmt(legalCost);
      document.getElementById('inc-agent-cost')!.textContent = fmt(agentCost);
      document.getElementById('inc-annual-cost')!.textContent = fmt(annualCost);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      document.querySelectorAll('.inc-in').forEach(el => {
        el.addEventListener('input', calcINC);
        el.addEventListener('change', calcINC);
      });
      calcINC();
    }, 50);
  </script>
</CalculatorLayout>
