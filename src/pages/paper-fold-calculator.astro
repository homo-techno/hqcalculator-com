---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Paper Fold Calculator - Bi-Fold, Tri-Fold, Z-Fold & Gate Panel Sizes";
const description = "Calculate panel sizes for different paper fold types including bi-fold, tri-fold, z-fold, gate fold, and accordion from any sheet size.";
const relatedCalcs = [
  { name: "Bleed Margin Calculator", url: "/bleed-margin-calculator", description: "Print bleed calculations." },
  { name: "Magazine Layout Calculator", url: "/magazine-layout-calculator", description: "Magazine page planning." },
  { name: "Paper Weight Calculator", url: "/paper-weight-calculator", description: "Paper weight converter." },
  { name: "Print Cost Calculator", url: "/print-cost-calculator", description: "Print job cost estimator." },
  { name: "Envelope Calculator", url: "/envelope-calculator", description: "Envelope sizing." },
  { name: "Booklet Imposition Calculator", url: "/booklet-imposition-calculator", description: "Page imposition layout." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Paper Fold Calculator" keywords="paper fold, bi-fold, tri-fold, z-fold, gate fold, accordion fold, panel size, brochure fold, folding calculator" breadcrumbs={[{ name: "Paper Fold Calculator", url: "/paper-fold-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Paper Fold Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate panel dimensions for any fold type from your sheet size. Get precise panel widths for bi-fold, tri-fold, z-fold, gate fold, and more.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Sheet Width (inches)</label><input type="number" id="pf2-width" class="pf2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="0.25"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Sheet Height (inches)</label><input type="number" id="pf2-height" class="pf2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="0.25"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Fold Type</label>
          <select id="pf2-fold" class="pf2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="bi">Bi-fold (half fold)</option>
            <option value="tri">Tri-fold (letter fold)</option>
            <option value="z">Z-fold (accordion 3)</option>
            <option value="gate">Gate fold</option>
            <option value="accordion4">Accordion (4 panels)</option>
            <option value="double-parallel">Double parallel fold</option>
            <option value="roll4">Roll fold (4 panels)</option>
          </select>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Fold Direction</label>
          <select id="pf2-dir" class="pf2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="width">Along width (portrait panels)</option>
            <option value="height">Along height (landscape panels)</option>
          </select>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Finished Size</div>
          <div class="text-4xl font-extrabold font-mono" id="pf2-result">0 x 0 in</div>
          <div class="text-sm text-blue-200 mt-1" id="pf2-panels"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Number of Panels</div><div class="text-xl font-bold" id="pf2-numpanels">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Number of Folds</div><div class="text-xl font-bold" id="pf2-numfolds">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Finished (mm)</div><div class="text-xl font-bold" id="pf2-finmm">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Print Sides</div><div class="text-xl font-bold" id="pf2-sides">--</div></div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl">
          <h3 class="font-semibold text-sm text-text mb-2">Panel Dimensions</h3>
          <div class="font-mono text-sm space-y-1" id="pf2-steps"></div>
        </div>
      </div>
      <ShareButton calculatorId="paper-fold" />
      <FeedbackWidget />
    </div>
    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Common Paper Fold Types</h2>
      <div class="bg-surface-alt rounded-xl p-4 my-4 font-mono text-sm space-y-1">
        <p>Bi-fold: 1 fold, 2 panels = 4 pages</p>
        <p>Tri-fold: 2 folds, 3 panels = 6 pages (inside panel slightly narrower)</p>
        <p>Z-fold: 2 folds, 3 equal panels = 6 pages</p>
        <p>Gate fold: 2 folds, flaps fold to center = 6 pages</p>
        <p>Accordion (4): 3 folds, 4 equal panels = 8 pages</p>
        <p>Roll fold (4): 3 folds, each panel slightly narrower = 8 pages</p>
      </div>
    </article>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPf2() {
      const sheetW = parseFloat((document.getElementById('pf2-width') as HTMLInputElement).value) || 0;
      const sheetH = parseFloat((document.getElementById('pf2-height') as HTMLInputElement).value) || 0;
      const fold = (document.getElementById('pf2-fold') as HTMLSelectElement).value;
      const dir = (document.getElementById('pf2-dir') as HTMLSelectElement).value;
      const foldDim = dir === 'width' ? sheetW : sheetH;
      const otherDim = dir === 'width' ? sheetH : sheetW;
      let panels: number[] = [];
      let numFolds = 0;
      const steps: string[] = [];
      if (fold === 'bi') {
        numFolds = 1;
        const p = foldDim / 2;
        panels = [p, p];
        steps.push('Bi-fold: ' + foldDim + ' / 2 = ' + p.toFixed(3) + ' in each panel');
      } else if (fold === 'tri') {
        numFolds = 2;
        const innerPanel = foldDim / 3 - 0.0625;
        const outerPanels = (foldDim - innerPanel) / 2;
        panels = [outerPanels, outerPanels, innerPanel];
        steps.push('Tri-fold (letter): Inside flap panel slightly narrower');
        steps.push('Inside panel: ' + innerPanel.toFixed(3) + ' in (1/3 minus 1/16")');
        steps.push('Outer panels: ' + outerPanels.toFixed(3) + ' in each');
      } else if (fold === 'z') {
        numFolds = 2;
        const p = foldDim / 3;
        panels = [p, p, p];
        steps.push('Z-fold: 3 equal panels of ' + p.toFixed(3) + ' in');
      } else if (fold === 'gate') {
        numFolds = 2;
        const center = foldDim / 2;
        const flap = foldDim / 4;
        panels = [flap, center, flap];
        steps.push('Gate fold: Center panel ' + center.toFixed(3) + ' in');
        steps.push('Flap panels: ' + flap.toFixed(3) + ' in each');
      } else if (fold === 'accordion4') {
        numFolds = 3;
        const p = foldDim / 4;
        panels = [p, p, p, p];
        steps.push('Accordion (4): 4 equal panels of ' + p.toFixed(3) + ' in');
      } else if (fold === 'double-parallel') {
        numFolds = 2;
        const half = foldDim / 2;
        const quarter = half / 2;
        panels = [quarter, quarter, quarter, quarter];
        steps.push('Double parallel: First fold in half (' + half.toFixed(3) + ')');
        steps.push('Second fold in half again (' + quarter.toFixed(3) + ')');
        steps.push('4 panels of ' + quarter.toFixed(3) + ' in');
      } else if (fold === 'roll4') {
        numFolds = 3;
        const p4 = foldDim / 4 - 0.125;
        const p3 = foldDim / 4 - 0.0625;
        const p2 = foldDim / 4;
        const p1 = foldDim - p2 - p3 - p4;
        panels = [p1, p2, p3, p4];
        steps.push('Roll fold: Each inner panel slightly narrower');
        steps.push('Panel 1 (outer): ' + p1.toFixed(3) + ' in');
        steps.push('Panel 2: ' + p2.toFixed(3) + ' in');
        steps.push('Panel 3: ' + p3.toFixed(3) + ' in');
        steps.push('Panel 4 (innermost): ' + p4.toFixed(3) + ' in');
      }
      const finishedW = dir === 'width' ? (panels.length > 0 ? Math.max(...panels) : sheetW) : sheetW;
      const finishedH = dir === 'height' ? (panels.length > 0 ? Math.max(...panels) : sheetH) : sheetH;
      const finW = dir === 'width' ? (panels.length > 0 ? panels[0] : sheetW) : sheetW;
      const finH = dir === 'height' ? (panels.length > 0 ? panels[0] : sheetH) : sheetH;
      steps.push('');
      steps.push('Sheet: ' + sheetW + ' x ' + sheetH + ' in');
      steps.push('Finished: ~' + finW.toFixed(3) + ' x ' + (dir === 'width' ? sheetH : finH).toFixed(3) + ' in');
      steps.push('Pages (front + back): ' + (panels.length * 2));
      const resultW = dir === 'width' ? finW : sheetW;
      const resultH = dir === 'width' ? sheetH : finH;
      document.getElementById('pf2-result')!.textContent = resultW.toFixed(3) + ' x ' + resultH.toFixed(3) + ' in';
      document.getElementById('pf2-panels')!.textContent = panels.length + ' panels, ' + numFolds + ' folds';
      document.getElementById('pf2-numpanels')!.textContent = panels.length.toString();
      document.getElementById('pf2-numfolds')!.textContent = numFolds.toString();
      document.getElementById('pf2-finmm')!.textContent = (resultW * 25.4).toFixed(1) + ' x ' + (resultH * 25.4).toFixed(1);
      document.getElementById('pf2-sides')!.textContent = (panels.length * 2).toString() + ' pages';
      document.getElementById('pf2-steps')!.innerHTML = steps.map(s => '<div>' + (s || '&nbsp;') + '</div>').join('');
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('pf2-width') as HTMLInputElement).value = '11';
      (document.getElementById('pf2-height') as HTMLInputElement).value = '8.5';
      document.querySelectorAll('.pf2-in').forEach(el => { el.addEventListener('input', calcPf2); el.addEventListener('change', calcPf2); });
      calcPf2();
    }, 50);
  </script>
</CalculatorLayout>
