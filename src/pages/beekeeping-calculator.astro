---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Beekeeping Calculator - Hive Count, Honey Yield & Revenue";
const description = "Calculate hive count, honey yield per hive, equipment costs, revenue, and colony management timing for beekeeping operations.";
const relatedCalcs = [
  { name: "Egg Production", url: "/egg-production-calculator", description: "Egg production estimates." },
  { name: "Greenhouse Calculator", url: "/greenhouse-calculator", description: "Greenhouse sizing and costs." },
  { name: "Garden Spacing", url: "/garden-spacing-calculator", description: "Plant spacing for gardens." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Plan your budget." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentage computations." },
  { name: "Food Cost", url: "/food-cost-calculator", description: "Food expense calculations." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Beekeeping Calculator" keywords="beekeeping calculator, honey yield, hive count, beekeeping cost, colony management, apiary revenue" breadcrumbs={[{ name: "Beekeeping", url: "/beekeeping-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Beekeeping Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Plan your apiary with hive counts, honey yield estimates, and profitability analysis.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Number of Hives</label>
            <input type="number" id="bk-hives" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="5" min="1" max="500" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Region/Forage Quality</label>
            <select id="bk-region" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="80">Excellent Forage (80 lbs/hive)</option>
              <option value="60" selected>Good Forage (60 lbs/hive)</option>
              <option value="40">Average Forage (40 lbs/hive)</option>
              <option value="25">Poor Forage (25 lbs/hive)</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Hive Setup Cost ($)</label>
            <input type="number" id="bk-setup" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="350" min="0" step="25">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Bee Package/Nuc Cost ($)</label>
            <input type="number" id="bk-bees" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="180" min="0" step="10">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Annual Maint/Hive ($)</label>
            <input type="number" id="bk-maint" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="75" min="0" step="5">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Winter Loss Rate (%)</label>
            <input type="number" id="bk-loss" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="20" min="0" max="80" step="5">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Honey Price ($/lb)</label>
            <input type="number" id="bk-price" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="12" min="0" step="0.50">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Wax/Products Revenue/Hive ($)</label>
            <input type="number" id="bk-wax" class="bk-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="30" min="0" step="5">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Annual Net Profit</div>
          <div class="text-5xl font-extrabold font-mono" id="bk-profit">--</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Total Honey (lbs)</div>
            <div class="text-xl font-bold font-mono" id="bk-honey">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Gross Revenue</div>
            <div class="text-xl font-bold font-mono" id="bk-revenue">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Startup Cost</div>
            <div class="text-xl font-bold font-mono" id="bk-startup">--</div>
          </div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Annual Costs</div>
            <div class="text-xl font-bold font-mono" id="bk-annual">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Revenue/Hive</div>
            <div class="text-xl font-bold font-mono" id="bk-perhive">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Hives After Winter</div>
            <div class="text-xl font-bold font-mono" id="bk-surviving">--</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="beekeeping" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcBK() {
      const hives = parseInt((document.getElementById('bk-hives') as HTMLInputElement).value) || 5;
      const yieldPerHive = parseFloat((document.getElementById('bk-region') as HTMLSelectElement).value) || 60;
      const setupCost = parseFloat((document.getElementById('bk-setup') as HTMLInputElement).value) || 0;
      const beeCost = parseFloat((document.getElementById('bk-bees') as HTMLInputElement).value) || 0;
      const maintCost = parseFloat((document.getElementById('bk-maint') as HTMLInputElement).value) || 0;
      const lossRate = parseFloat((document.getElementById('bk-loss') as HTMLInputElement).value) || 0;
      const honeyPrice = parseFloat((document.getElementById('bk-price') as HTMLInputElement).value) || 0;
      const waxRevenue = parseFloat((document.getElementById('bk-wax') as HTMLInputElement).value) || 0;
      const totalHoney = hives * yieldPerHive;
      const honeyRevenue = totalHoney * honeyPrice;
      const waxTotal = hives * waxRevenue;
      const grossRevenue = honeyRevenue + waxTotal;
      const startupTotal = hives * (setupCost + beeCost);
      const annualMaint = hives * maintCost;
      const replacementHives = Math.ceil(hives * (lossRate / 100));
      const replacementCost = replacementHives * beeCost;
      const totalAnnualCost = annualMaint + replacementCost;
      const netProfit = grossRevenue - totalAnnualCost;
      const revenuePerHive = grossRevenue / hives;
      const survivingHives = hives - replacementHives;
      document.getElementById('bk-profit')!.textContent = (netProfit >= 0 ? '$' : '-$') + Math.abs(Math.round(netProfit)).toLocaleString();
      document.getElementById('bk-honey')!.textContent = Math.round(totalHoney).toLocaleString();
      document.getElementById('bk-revenue')!.textContent = '$' + Math.round(grossRevenue).toLocaleString();
      document.getElementById('bk-startup')!.textContent = '$' + Math.round(startupTotal).toLocaleString();
      document.getElementById('bk-annual')!.textContent = '$' + Math.round(totalAnnualCost).toLocaleString();
      document.getElementById('bk-perhive')!.textContent = '$' + Math.round(revenuePerHive).toLocaleString();
      document.getElementById('bk-surviving')!.textContent = survivingHives.toString();
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.bk-in').forEach(el => { el.addEventListener('input', calcBK); el.addEventListener('change', calcBK); });
      calcBK();
    }, 50);
  </script>
</CalculatorLayout>
