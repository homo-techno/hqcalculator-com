---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Event Lighting Calculator - String Lights, Uplights & Spotlights";
const description = "Calculate string lights, uplights, spotlights, and other decorative lighting needed for your event venue based on space size and desired ambiance.";
const relatedCalcs = [
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Tent Size Calculator", url: "/tent-size-calculator", description: "Tent dimensions needed." },
  { name: "Banquet Room Calculator", url: "/banquet-room-calculator", description: "Room size for events." },
  { name: "Sound System Calculator", url: "/sound-system-calculator", description: "Audio equipment needed." },
  { name: "Floral Budget Calculator", url: "/floral-budget-calculator", description: "Flower arrangement costs." },
  { name: "Photo Booth Calculator", url: "/photo-booth-calculator", description: "Photo booth planning." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Event Lighting Calculator"
  keywords="event lighting calculator, string lights, uplighting, wedding lights, venue lighting, decorative lighting"
  breadcrumbs={[{ name: "Event Lighting", url: "/event-lighting-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Event Lighting Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Plan decorative lighting for your event venue.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Venue Length (ft)</label>
          <input type="number" id="el2-length" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="60" min="10" step="5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Venue Width (ft)</label>
          <input type="number" id="el2-width" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="40" min="10" step="5">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Ceiling / Canopy Height (ft)</label>
          <input type="number" id="el2-height" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="14" min="8" max="40" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Lighting Style</label>
          <select id="el2-style" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="romantic">Romantic / Warm Glow</option>
            <option value="elegant">Elegant / Dramatic</option>
            <option value="festive">Festive / Party</option>
            <option value="minimal">Minimal / Subtle</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">String Lights Layout</label>
          <select id="el2-strings" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="canopy">Full ceiling canopy</option>
            <option value="zigzag">Zigzag across ceiling</option>
            <option value="perimeter">Perimeter only</option>
            <option value="none">No string lights</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Wall Uplighting</label>
          <select id="el2-uplight" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="full" selected>Full perimeter</option>
            <option value="accent">Accent walls only</option>
            <option value="none">None</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Spotlights (dance floor, cake, etc.)</label>
          <input type="number" id="el2-spots" class="el2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" max="10" step="1">
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">String Lights Needed</div>
        <div class="text-5xl font-extrabold" id="el2-stringft">--</div>
        <div class="text-sm mt-1" id="el2-strands">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Uplights</div>
          <div class="text-xl font-bold" id="el2-uplights">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Spotlights</div>
          <div class="text-xl font-bold" id="el2-spotcount">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Power Needed</div>
          <div class="text-xl font-bold" id="el2-power">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Est. Rental Cost</div>
          <div class="text-xl font-bold" id="el2-cost">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="el2-details"></div>

      <ShareButton calculatorId="event-lighting" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Event Lighting Guide</h2>
      <p>String lights create warm ambiance. Place uplights every 6-8 ft along walls for dramatic effect. Spotlights highlight key areas like the dance floor, cake table, and head table. LED lights are more energy-efficient and run cooler.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcEL2() {
      const length = parseInt((document.getElementById('el2-length') as HTMLInputElement).value) || 60;
      const width = parseInt((document.getElementById('el2-width') as HTMLInputElement).value) || 40;
      const height = parseInt((document.getElementById('el2-height') as HTMLInputElement).value) || 14;
      const style = (document.getElementById('el2-style') as HTMLSelectElement).value;
      const strings = (document.getElementById('el2-strings') as HTMLSelectElement).value;
      const uplight = (document.getElementById('el2-uplight') as HTMLSelectElement).value;
      const spots = parseInt((document.getElementById('el2-spots') as HTMLInputElement).value) || 0;

      const perimeter = 2 * (length + width);
      const area = length * width;

      let stringFt = 0;
      if (strings === 'canopy') {
        const rows = Math.ceil(width / 3);
        stringFt = rows * length + perimeter;
      } else if (strings === 'zigzag') {
        const passes = Math.ceil(width / 6);
        stringFt = passes * length * 1.2;
      } else if (strings === 'perimeter') {
        stringFt = perimeter;
      }
      stringFt = Math.ceil(stringFt);

      const strandsNeeded = Math.ceil(stringFt / 48);

      let uplightCount = 0;
      if (uplight === 'full') {
        uplightCount = Math.ceil(perimeter / 7);
      } else if (uplight === 'accent') {
        uplightCount = Math.ceil(perimeter / 7 * 0.4);
      }

      const stringWatts = stringFt * 0.5;
      const uplightWatts = uplightCount * 15;
      const spotWatts = spots * 75;
      const totalWatts = Math.ceil(stringWatts + uplightWatts + spotWatts);
      const amps = Math.ceil(totalWatts / 120);

      const stringCost = strandsNeeded * 15;
      const uplightCost = uplightCount * 25;
      const spotCost = spots * 35;
      const totalCost = stringCost + uplightCost + spotCost;

      document.getElementById('el2-stringft')!.textContent = stringFt > 0 ? stringFt.toLocaleString() + ' ft' : 'None';
      document.getElementById('el2-strands')!.textContent = stringFt > 0 ? strandsNeeded + ' strands (48 ft each)' : 'No string lights selected';
      document.getElementById('el2-uplights')!.textContent = uplightCount > 0 ? uplightCount.toString() : 'None';
      document.getElementById('el2-spotcount')!.textContent = spots.toString();
      document.getElementById('el2-power')!.textContent = totalWatts + 'W / ' + amps + 'A';
      document.getElementById('el2-cost')!.textContent = '$' + totalCost.toLocaleString();

      let details = '<h3 class="font-semibold text-sm text-text mb-2">Lighting Plan</h3><ul class="text-sm text-text-secondary space-y-1">';
      details += '<li>Venue: ' + length + ' x ' + width + ' ft (' + area.toLocaleString() + ' sq ft), ' + height + ' ft ceiling</li>';
      if (stringFt > 0) details += '<li>String lights: ' + stringFt + ' ft total (' + strandsNeeded + ' strands) - ' + strings + ' layout</li>';
      if (uplightCount > 0) details += '<li>Uplights: ' + uplightCount + ' units, spaced ~' + (uplight === 'full' ? '7' : '15') + ' ft apart</li>';
      if (spots > 0) details += '<li>Spotlights: ' + spots + ' fixtures</li>';
      details += '<li>Total power: ' + totalWatts + 'W (' + amps + ' amps at 120V)</li>';
      details += '<li>Extension cords needed: ~' + Math.ceil(amps / 5) + ' (15A circuits)</li>';
      details += '<li>Style: ' + style + '</li>';
      details += '</ul>';
      document.getElementById('el2-details')!.innerHTML = details;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.el2-in').forEach(el => { el.addEventListener('input', calcEL2); el.addEventListener('change', calcEL2); });
      calcEL2();
    }, 50);
  </script>
</CalculatorLayout>
