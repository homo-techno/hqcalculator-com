---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Conference Calculator - Breakout Rooms, AV & Materials Planner";
const description = "Plan your conference with breakout room allocation, AV equipment needs, name badges, printed materials, and per-attendee supply estimates.";
const relatedCalcs = [
  { name: "Event Budget Calculator", url: "/event-budget-calculator", description: "Total event cost breakdown." },
  { name: "Banquet Room Calculator", url: "/banquet-room-calculator", description: "Room size for events." },
  { name: "Sound System Calculator", url: "/sound-system-calculator", description: "Audio equipment needed." },
  { name: "Event Staffing Calculator", url: "/event-staffing-calculator", description: "Staff needed for events." },
  { name: "Event Timeline Calculator", url: "/event-timeline-calculator", description: "Event schedule planner." },
  { name: "Event Parking Calculator", url: "/event-parking-calculator", description: "Parking space planning." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Conference Calculator"
  keywords="conference calculator, conference planning, breakout rooms, conference AV, conference materials, event badges"
  breadcrumbs={[{ name: "Conference", url: "/conference-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Conference Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Plan breakout rooms, AV needs, badges, and materials for your conference.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4 mb-6">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Number of Attendees</label>
          <input type="number" id="con-attendees" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="250" min="10" step="10">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Conference Duration (days)</label>
          <input type="number" id="con-days" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="1" max="7" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Breakout Session Tracks (concurrent)</label>
          <input type="number" id="con-tracks" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" max="10" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Sessions per Track per Day</label>
          <input type="number" id="con-sessions" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="4" min="1" max="10" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Keynote Speakers</label>
          <input type="number" id="con-keynotes" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0" max="10" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Material Type per Attendee</label>
          <select id="con-materials" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="full">Full packet (badge, program, folder, notepad, pen)</option>
            <option value="basic">Basic (badge, program, pen)</option>
            <option value="digital">Digital only (badge + app)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Meals Included</label>
          <select id="con-meals" class="con-in w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="all" selected>All meals (breakfast, lunch, breaks)</option>
            <option value="lunch">Lunch + breaks only</option>
            <option value="breaks">Coffee breaks only</option>
            <option value="none">No meals</option>
          </select>
        </div>
      </div>

      <div class="p-6 bg-primary rounded-2xl text-white text-center mb-4">
        <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Breakout Rooms Needed</div>
        <div class="text-5xl font-extrabold" id="con-rooms">--</div>
        <div class="text-sm mt-1" id="con-plus">--</div>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Total Sessions</div>
          <div class="text-xl font-bold" id="con-totalsess">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Name Badges</div>
          <div class="text-xl font-bold" id="con-badges">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Microphones</div>
          <div class="text-xl font-bold" id="con-mics">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Projectors / Screens</div>
          <div class="text-xl font-bold" id="con-projectors">--</div>
        </div>
      </div>

      <div class="p-4 bg-surface-alt rounded-xl mb-4" id="con-details"></div>

      <ShareButton calculatorId="conference" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Conference Planning Guide</h2>
      <p>Breakout rooms should fit 30-50% of attendees each. Always have 1 main ballroom plus breakout rooms. Each room needs its own AV setup (projector, screen, microphone). Order 10% extra badges and materials for walk-ins and mistakes.</p>
      <h3 class="text-xl font-semibold text-text mt-6">Per-Attendee Checklist</h3>
      <ul>
        <li>Name badge with lanyard</li>
        <li>Printed program or digital app access</li>
        <li>Welcome packet or tote bag</li>
        <li>Notepad and pen (if provided)</li>
        <li>WiFi access credentials</li>
      </ul>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcCON() {
      const attendees = parseInt((document.getElementById('con-attendees') as HTMLInputElement).value) || 10;
      const days = parseInt((document.getElementById('con-days') as HTMLInputElement).value) || 2;
      const tracks = parseInt((document.getElementById('con-tracks') as HTMLInputElement).value) || 3;
      const sessionsPerTrack = parseInt((document.getElementById('con-sessions') as HTMLInputElement).value) || 4;
      const keynotes = parseInt((document.getElementById('con-keynotes') as HTMLInputElement).value) || 2;
      const materials = (document.getElementById('con-materials') as HTMLSelectElement).value;
      const meals = (document.getElementById('con-meals') as HTMLSelectElement).value;

      const breakoutRooms = tracks;
      const mainRoom = 1;
      const totalRooms = breakoutRooms + mainRoom;
      const totalSessions = (tracks * sessionsPerTrack * days) + (keynotes * days);
      const badges = Math.ceil(attendees * 1.1);
      const attendeesPerBreakout = Math.ceil(attendees / tracks);

      const micsPerRoom = 2;
      const totalMics = totalRooms * micsPerRoom;
      const projectors = totalRooms;

      let materialItems: { name: string; qty: number }[] = [];
      if (materials === 'full') {
        materialItems = [
          { name: 'Name badges + lanyards', qty: badges },
          { name: 'Printed programs', qty: badges },
          { name: 'Folders/portfolios', qty: badges },
          { name: 'Notepads', qty: badges },
          { name: 'Pens', qty: Math.ceil(badges * 1.2) },
          { name: 'Tote bags', qty: badges },
        ];
      } else if (materials === 'basic') {
        materialItems = [
          { name: 'Name badges + lanyards', qty: badges },
          { name: 'Printed programs', qty: badges },
          { name: 'Pens', qty: badges },
        ];
      } else {
        materialItems = [
          { name: 'Name badges + lanyards', qty: badges },
          { name: 'App access QR cards', qty: badges },
        ];
      }

      let mealCount = 0;
      if (meals === 'all') mealCount = 3 * days;
      else if (meals === 'lunch') mealCount = 2 * days;
      else if (meals === 'breaks') mealCount = 2 * days;

      const totalMealServings = mealCount * attendees;

      document.getElementById('con-rooms')!.textContent = totalRooms.toString();
      document.getElementById('con-plus')!.textContent = mainRoom + ' main ballroom + ' + breakoutRooms + ' breakout rooms (~' + attendeesPerBreakout + ' per room)';
      document.getElementById('con-totalsess')!.textContent = totalSessions.toString();
      document.getElementById('con-badges')!.textContent = badges.toString();
      document.getElementById('con-mics')!.textContent = totalMics.toString();
      document.getElementById('con-projectors')!.textContent = projectors.toString();

      let details = '<h3 class="font-semibold text-sm text-text mb-2">Conference Supplies & AV</h3>';
      details += '<div class="mb-3"><span class="text-xs font-semibold text-text-muted uppercase">AV Equipment</span><ul class="text-sm text-text-secondary space-y-1 mt-1">';
      details += '<li>Projectors + screens: ' + projectors + ' sets</li>';
      details += '<li>Wireless microphones: ' + totalMics + '</li>';
      details += '<li>Laptop connections/adapters: ' + projectors + '</li>';
      details += '<li>Speaker timers/clocks: ' + totalRooms + '</li>';
      details += '<li>Recording equipment: ' + (keynotes > 0 ? mainRoom : 0) + ' room(s)</li>';
      details += '</ul></div>';

      details += '<div class="mb-3"><span class="text-xs font-semibold text-text-muted uppercase">Materials per Attendee</span><ul class="text-sm text-text-secondary space-y-1 mt-1">';
      materialItems.forEach(item => {
        details += '<li>' + item.name + ': ' + item.qty + '</li>';
      });
      details += '</ul></div>';

      if (mealCount > 0) {
        details += '<div><span class="text-xs font-semibold text-text-muted uppercase">Food & Beverage</span><ul class="text-sm text-text-secondary space-y-1 mt-1">';
        details += '<li>Total meal/break servings: ' + totalMealServings.toLocaleString() + '</li>';
        details += '<li>Coffee/water stations: ' + Math.max(2, Math.ceil(attendees / 75)) + '</li>';
        details += '</ul></div>';
      }

      document.getElementById('con-details')!.innerHTML = details;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.con-in').forEach(el => { el.addEventListener('input', calcCON); el.addEventListener('change', calcCON); });
      calcCON();
    }, 50);
  </script>
</CalculatorLayout>
