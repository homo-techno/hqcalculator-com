---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Protein Per Dollar Calculator - Best Protein Value";
const description = "Compare protein value across foods. Input price, serving size, and protein per serving to see protein per dollar, cost per 30g protein, and rankings.";
const relatedCalcs = [
  { name: "Food Cost Calculator", url: "/food-cost-calculator", description: "Restaurant food cost analysis." },
  { name: "Meal Prep Calculator", url: "/meal-prep-calculator", description: "Plan weekly meal prep." },
  { name: "Meat Cooking Calculator", url: "/meat-cooking-calculator", description: "Cooking times and temps." },
  { name: "Chicken Feed Calculator", url: "/chicken-feed-calculator", description: "Chicken feed and egg costs." },
  { name: "Egg Production Calculator", url: "/egg-production-calculator", description: "Egg production estimates." },
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Daily calorie needs." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Protein Per Dollar Calculator" keywords="protein per dollar, protein value, cost per gram protein, cheap protein, protein comparison, protein cost" breadcrumbs={[{ name: "Protein Per Dollar", url: "/protein-per-dollar-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Protein Per Dollar Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find the best protein value by comparing cost per gram of protein across different foods.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-text mb-1">Food Item</label>
          <input type="text" id="pd-food" class="pd-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="Chicken Breast" placeholder="e.g., Chicken Breast">
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Total Price ($)</label>
            <input type="number" id="pd-price" class="pd-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8.99" min="0" step="0.01">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Total Weight (oz)</label>
            <input type="number" id="pd-weight" class="pd-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="48" min="0" step="1">
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Protein per oz (g)</label>
            <input type="number" id="pd-protein" class="pd-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="8.8" min="0" step="0.1">
          </div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Protein Per Dollar</div>
          <div class="text-5xl font-extrabold font-mono" id="pd-result">0 g/$</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cost per 30g Protein</div><div class="text-xl font-bold font-mono" id="pd-cost30">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Protein</div><div class="text-xl font-bold font-mono" id="pd-totalp">0 g</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cost per oz</div><div class="text-xl font-bold font-mono" id="pd-peroz">$0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Servings (4oz)</div><div class="text-xl font-bold font-mono" id="pd-servings">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Value Rating</div><div class="text-xl font-bold font-mono" id="pd-rating">-</div></div>
        </div>
        <div class="mt-4 p-4 bg-surface-alt rounded-xl">
          <div class="text-xs text-text-muted uppercase mb-2">Reference: Common Protein Values (g protein per $)</div>
          <div class="grid grid-cols-2 gap-1 text-sm">
            <div>Eggs: ~47g/$</div>
            <div>Chicken Breast: ~47g/$</div>
            <div>Ground Beef: ~30g/$</div>
            <div>Canned Tuna: ~50g/$</div>
            <div>Greek Yogurt: ~22g/$</div>
            <div>Whey Protein: ~55g/$</div>
          </div>
        </div>
      </div>
      <ShareButton calculatorId="protein-per-dollar" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcPD() {
      const price = parseFloat((document.getElementById('pd-price') as HTMLInputElement).value) || 0;
      const weight = parseFloat((document.getElementById('pd-weight') as HTMLInputElement).value) || 0;
      const proteinPerOz = parseFloat((document.getElementById('pd-protein') as HTMLInputElement).value) || 0;
      const totalProtein = weight * proteinPerOz;
      const proteinPerDollar = price > 0 ? totalProtein / price : 0;
      const costPer30g = totalProtein > 0 ? (30 / totalProtein) * price : 0;
      const costPerOz = weight > 0 ? price / weight : 0;
      const servings = Math.floor(weight / 4);
      // Rating based on protein per dollar
      let rating = '';
      if (proteinPerDollar >= 50) rating = 'Excellent';
      else if (proteinPerDollar >= 35) rating = 'Great';
      else if (proteinPerDollar >= 20) rating = 'Good';
      else if (proteinPerDollar >= 10) rating = 'Average';
      else rating = 'Expensive';
      document.getElementById('pd-result')!.textContent = proteinPerDollar.toFixed(1) + ' g/$';
      document.getElementById('pd-cost30')!.textContent = '$' + costPer30g.toFixed(2);
      document.getElementById('pd-totalp')!.textContent = totalProtein.toFixed(0) + ' g';
      document.getElementById('pd-peroz')!.textContent = '$' + costPerOz.toFixed(2);
      document.getElementById('pd-servings')!.textContent = servings.toString();
      document.getElementById('pd-rating')!.textContent = rating;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.pd-in').forEach(el => { el.addEventListener('input', calcPD); el.addEventListener('change', calcPD); });
      calcPD();
    }, 50);
  </script>
</CalculatorLayout>
