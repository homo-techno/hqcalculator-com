---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Supply Chain Cost Calculator";
const description = "Break down total supply chain costs across procurement, production, transportation, warehousing, and overhead for comprehensive cost analysis.";
const relatedCalcs = [
  { name: "Break Even", url: "/break-even-calculator", description: "Find break-even point." },
  { name: "Profit Margin", url: "/profit-margin-calculator", description: "Calculate profit margins." },
  { name: "ROI", url: "/roi-calculator", description: "Return on investment." },
  { name: "Cost Per Acquisition", url: "/cost-per-acquisition-calculator", description: "CPA calculations." },
  { name: "Inventory Turnover", url: "/inventory-turnover-calculator", description: "Inventory efficiency." },
  { name: "Cost of Living", url: "/cost-of-living-calculator", description: "Cost comparison." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Supply Chain Cost Calculator" keywords="supply chain cost, procurement cost, logistics cost, warehousing cost, total cost breakdown, supply chain analysis" breadcrumbs={[{ name: "Supply Chain Cost", url: "/supply-chain-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Supply Chain Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Analyze total supply chain costs across procurement, production, transport, warehousing, and overhead.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div><label class="block text-xs font-medium text-text mb-1">Annual Revenue ($)</label><input type="number" id="sc2-revenue" class="sc2-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" min="0" step="1000"></div>
        <div><label class="block text-xs font-medium text-text mb-1">Procurement / Raw Materials ($)</label><input type="number" id="sc2-procure" class="sc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="100"></div>
        <div><label class="block text-xs font-medium text-text mb-1">Production / Manufacturing ($)</label><input type="number" id="sc2-prod" class="sc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="100"></div>
        <div><label class="block text-xs font-medium text-text mb-1">Transportation / Freight ($)</label><input type="number" id="sc2-transport" class="sc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="100"></div>
        <div><label class="block text-xs font-medium text-text mb-1">Warehousing / Storage ($)</label><input type="number" id="sc2-warehouse" class="sc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="100"></div>
        <div><label class="block text-xs font-medium text-text mb-1">Overhead / Admin ($)</label><input type="number" id="sc2-overhead" class="sc2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="100"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Supply Chain Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="sc2-result">--</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">SC Cost % of Revenue</div><div class="text-xl font-bold font-mono" id="sc2-pct">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Largest Category</div><div class="text-xl font-bold font-mono" id="sc2-largest">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Transport % of SC</div><div class="text-xl font-bold font-mono" id="sc2-transpct">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Warehouse % of SC</div><div class="text-xl font-bold font-mono" id="sc2-warepct">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="supply-chain-cost" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcSC2() {
      const revenue = parseFloat((document.getElementById('sc2-revenue') as HTMLInputElement).value) || 0;
      const procure = parseFloat((document.getElementById('sc2-procure') as HTMLInputElement).value) || 0;
      const prod = parseFloat((document.getElementById('sc2-prod') as HTMLInputElement).value) || 0;
      const transport = parseFloat((document.getElementById('sc2-transport') as HTMLInputElement).value) || 0;
      const warehouse = parseFloat((document.getElementById('sc2-warehouse') as HTMLInputElement).value) || 0;
      const overhead = parseFloat((document.getElementById('sc2-overhead') as HTMLInputElement).value) || 0;

      const totalSC = procure + prod + transport + warehouse + overhead;
      const scPctRevenue = revenue > 0 ? (totalSC / revenue) * 100 : 0;
      const transportPct = totalSC > 0 ? (transport / totalSC) * 100 : 0;
      const warehousePct = totalSC > 0 ? (warehouse / totalSC) * 100 : 0;

      const categories = [
        { name: 'Procurement', val: procure },
        { name: 'Production', val: prod },
        { name: 'Transport', val: transport },
        { name: 'Warehousing', val: warehouse },
        { name: 'Overhead', val: overhead }
      ];
      categories.sort((a, b) => b.val - a.val);
      const largest = categories[0].name;

      const fmt = (v: number) => '$' + v.toLocaleString(undefined, { maximumFractionDigits: 0 });

      document.getElementById('sc2-result')!.textContent = fmt(totalSC);
      document.getElementById('sc2-pct')!.textContent = scPctRevenue.toFixed(1) + '%';
      document.getElementById('sc2-largest')!.textContent = largest;
      document.getElementById('sc2-transpct')!.textContent = transportPct.toFixed(1) + '%';
      document.getElementById('sc2-warepct')!.textContent = warehousePct.toFixed(1) + '%';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('sc2-revenue') as HTMLInputElement).value = '5000000';
      (document.getElementById('sc2-procure') as HTMLInputElement).value = '1500000';
      (document.getElementById('sc2-prod') as HTMLInputElement).value = '800000';
      (document.getElementById('sc2-transport') as HTMLInputElement).value = '350000';
      (document.getElementById('sc2-warehouse') as HTMLInputElement).value = '200000';
      (document.getElementById('sc2-overhead') as HTMLInputElement).value = '150000';
      document.querySelectorAll('.sc2-in').forEach(el => { el.addEventListener('input', calcSC2); el.addEventListener('change', calcSC2); });
      calcSC2();
    }, 50);
  </script>
</CalculatorLayout>
