---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Burnout Calculator - Maslach Burnout Inventory Estimate";
const description = "Estimate your burnout risk using a simplified Maslach Burnout Inventory. Get scores for emotional exhaustion, cynicism, and professional efficacy.";
const relatedCalcs = [
  { name: "Sleep Calculator", url: "/sleep-calculator", description: "Optimize sleep cycles." },
  { name: "Productivity Calculator", url: "/productivity-calculator", description: "Productivity metrics." },
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Daily calorie needs." },
  { name: "Heart Rate Calculator", url: "/heart-rate-calculator", description: "Heart rate zones." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Pomodoro Calculator", url: "/pomodoro-calculator", description: "Pomodoro timer." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Burnout Calculator" keywords="burnout, Maslach Burnout Inventory, emotional exhaustion, cynicism, professional efficacy, burnout risk, workplace stress" breadcrumbs={[{ name: "Burnout", url: "/burnout-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Burnout Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Rate how often you experience each statement (0 = Never, 6 = Every day) to assess your burnout risk.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <p class="text-sm text-text-secondary mb-4">0 = Never, 1 = A few times a year, 2 = Monthly, 3 = A few times a month, 4 = Weekly, 5 = A few times a week, 6 = Every day</p>

      <div class="space-y-4">
        <h3 class="font-semibold text-text">Emotional Exhaustion</h3>
        <div>
          <label class="block text-sm text-text mb-1">I feel emotionally drained from my work.</label>
          <input type="range" id="bo-ee1" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I feel used up at the end of the workday.</label>
          <input type="range" id="bo-ee2" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I feel fatigued when I get up and have to face another day on the job.</label>
          <input type="range" id="bo-ee3" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>

        <h3 class="font-semibold text-text mt-2">Cynicism / Depersonalization</h3>
        <div>
          <label class="block text-sm text-text mb-1">I feel I treat some people as impersonal objects.</label>
          <input type="range" id="bo-cy1" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I have become more callous toward people since taking this job.</label>
          <input type="range" id="bo-cy2" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I worry this job is making me emotionally harder.</label>
          <input type="range" id="bo-cy3" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>

        <h3 class="font-semibold text-text mt-2">Professional Efficacy (reverse scored)</h3>
        <div>
          <label class="block text-sm text-text mb-1">I deal effectively with the problems of my work.</label>
          <input type="range" id="bo-pe1" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I feel I am making a meaningful contribution through my work.</label>
          <input type="range" id="bo-pe2" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I feel energized and accomplished after a good day of work.</label>
          <input type="range" id="bo-pe3" class="bo-in w-full" min="0" max="6" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Never (0)</span><span>Every day (6)</span></div>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm opacity-80">Burnout Risk Level</div>
          <div class="text-2xl font-extrabold mt-1" id="bo-risk">--</div>
        </div>

        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Exhaustion</div>
            <div class="text-xl font-bold text-text mt-1" id="bo-escore">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Cynicism</div>
            <div class="text-xl font-bold text-text mt-1" id="bo-cscore">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Efficacy</div>
            <div class="text-xl font-bold text-text mt-1" id="bo-pscore">--</div>
          </div>
        </div>

        <div class="p-4 bg-surface-alt rounded-xl">
          <div class="text-xs text-text-secondary mb-2">Interpretation & Recommendations</div>
          <div class="text-sm text-text" id="bo-recs">--</div>
        </div>
      </div>

      <ShareButton calculatorId="burnout" />
      <FeedbackWidget />
    </div>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcBO() {
      const ee1 = parseInt((document.getElementById('bo-ee1') as HTMLInputElement).value) || 0;
      const ee2 = parseInt((document.getElementById('bo-ee2') as HTMLInputElement).value) || 0;
      const ee3 = parseInt((document.getElementById('bo-ee3') as HTMLInputElement).value) || 0;
      const cy1 = parseInt((document.getElementById('bo-cy1') as HTMLInputElement).value) || 0;
      const cy2 = parseInt((document.getElementById('bo-cy2') as HTMLInputElement).value) || 0;
      const cy3 = parseInt((document.getElementById('bo-cy3') as HTMLInputElement).value) || 0;
      const pe1 = parseInt((document.getElementById('bo-pe1') as HTMLInputElement).value) || 0;
      const pe2 = parseInt((document.getElementById('bo-pe2') as HTMLInputElement).value) || 0;
      const pe3 = parseInt((document.getElementById('bo-pe3') as HTMLInputElement).value) || 0;

      const eeTotal = ee1 + ee2 + ee3;
      const cyTotal = cy1 + cy2 + cy3;
      const peTotal = pe1 + pe2 + pe3; // Higher = better (reverse scored for burnout)

      // Classify each dimension
      // EE: Low 0-5, Moderate 6-10, High 11-18
      let eeLabel = 'Low';
      if (eeTotal >= 11) eeLabel = 'High';
      else if (eeTotal >= 6) eeLabel = 'Moderate';

      // Cynicism: Low 0-4, Moderate 5-9, High 10-18
      let cyLabel = 'Low';
      if (cyTotal >= 10) cyLabel = 'High';
      else if (cyTotal >= 5) cyLabel = 'Moderate';

      // PE: Low efficacy 0-7, Moderate 8-13, High 14-18
      let peLabel = 'High';
      if (peTotal <= 7) peLabel = 'Low (burnout risk)';
      else if (peTotal <= 13) peLabel = 'Moderate';

      // Overall risk
      let risk = 'Low';
      let recs = '';
      const burnoutScore = eeTotal + cyTotal + (18 - peTotal);

      if (burnoutScore >= 36) {
        risk = 'Severe Burnout';
        recs = 'Your scores indicate severe burnout across multiple dimensions. Immediate action is recommended: speak with a mental health professional, discuss workload with your manager, consider taking time off. Burnout is a recognized occupational syndrome (WHO ICD-11) and is treatable.';
      } else if (burnoutScore >= 24) {
        risk = 'High Burnout Risk';
        recs = 'You are showing significant signs of burnout. Take action now: set firm boundaries on work hours, prioritize recovery activities (exercise, sleep, social connection), and consider professional support. Identify your primary stressor and address it directly.';
      } else if (burnoutScore >= 14) {
        risk = 'Moderate Risk';
        recs = 'You are showing some burnout symptoms. Preventive measures recommended: ensure adequate rest, practice stress management, maintain work-life boundaries, seek social support. Monitor these scores monthly.';
      } else {
        risk = 'Low Risk';
        recs = 'Your burnout risk is currently low. Maintain your healthy practices: reasonable workload, regular breaks, meaningful work engagement, and self-care routines.';
      }

      document.getElementById('bo-risk')!.textContent = risk;
      document.getElementById('bo-escore')!.textContent = eeTotal + '/18 (' + eeLabel + ')';
      document.getElementById('bo-cscore')!.textContent = cyTotal + '/18 (' + cyLabel + ')';
      document.getElementById('bo-pscore')!.textContent = peTotal + '/18 (' + peLabel + ')';
      document.getElementById('bo-recs')!.textContent = recs;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      const ids = ['bo-ee1','bo-ee2','bo-ee3','bo-cy1','bo-cy2','bo-cy3','bo-pe1','bo-pe2','bo-pe3'];
      ids.forEach((id, i) => {
        (document.getElementById(id) as HTMLInputElement).value = i < 6 ? '2' : '4';
      });
      document.querySelectorAll('.bo-in').forEach(el => {
        el.addEventListener('input', calcBO);
        el.addEventListener('change', calcBO);
      });
      calcBO();
    }, 50);
  </script>
</CalculatorLayout>
