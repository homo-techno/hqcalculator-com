---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Cooking Converter - Kitchen Measurement Conversion";
const description = "Convert between cups, tablespoons, teaspoons, ounces, milliliters, and more. Scale recipes up or down instantly.";

const relatedCalcs = [
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Daily calories." },
  { name: "Macro Calculator", url: "/macro-calculator", description: "Macros." },
  { name: "Weight Converter", url: "/weight-converter", description: "Weight units." },
  { name: "Temperature Converter", url: "/temperature-converter", description: "Temperature." },
  { name: "Ratio Calculator", url: "/ratio-calculator", description: "Ratios." },
  { name: "Unit Price", url: "/unit-price-calculator", description: "Best deal." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Cooking Converter"
  keywords="cooking converter, cups to tablespoons, teaspoons to cups, kitchen measurement, recipe converter, cooking measurement chart"
  breadcrumbs={[{ name: "Cooking Converter", url: "/cooking-converter" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Cooking Converter</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Convert kitchen measurements and scale recipes instantly.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <!-- Converter -->
      <h3 class="font-semibold text-text mb-3">Volume Converter</h3>
      <div class="flex items-end gap-3 mb-4">
        <div class="flex-1">
          <label class="block text-xs font-medium text-text mb-1">Amount</label>
          <input type="number" id="ck-val" class="w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold text-center" value="1" step="any" min="0">
        </div>
        <div class="flex-1">
          <label class="block text-xs font-medium text-text mb-1">From</label>
          <select id="ck-from" class="w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="cup" selected>Cups</option>
            <option value="tbsp">Tablespoons</option>
            <option value="tsp">Teaspoons</option>
            <option value="floz">Fluid Ounces</option>
            <option value="ml">Milliliters</option>
            <option value="L">Liters</option>
            <option value="pint">Pints</option>
            <option value="quart">Quarts</option>
            <option value="gallon">Gallons</option>
          </select>
        </div>
      </div>

      <div class="grid grid-cols-3 gap-3 mb-6" id="ck-results"></div>

      <!-- Quick buttons -->
      <div class="flex flex-wrap gap-2 mb-6">
        <button class="ck-quick px-3 py-1 text-xs rounded-full border border-border hover:bg-surface-alt font-semibold" data-v="0.25" data-u="cup">¼ cup</button>
        <button class="ck-quick px-3 py-1 text-xs rounded-full border border-border hover:bg-surface-alt font-semibold" data-v="0.333" data-u="cup">⅓ cup</button>
        <button class="ck-quick px-3 py-1 text-xs rounded-full border border-border hover:bg-surface-alt font-semibold" data-v="0.5" data-u="cup">½ cup</button>
        <button class="ck-quick px-3 py-1 text-xs rounded-full border border-border hover:bg-surface-alt font-semibold" data-v="1" data-u="tbsp">1 tbsp</button>
        <button class="ck-quick px-3 py-1 text-xs rounded-full border border-border hover:bg-surface-alt font-semibold" data-v="1" data-u="tsp">1 tsp</button>
        <button class="ck-quick px-3 py-1 text-xs rounded-full border border-border hover:bg-surface-alt font-semibold" data-v="250" data-u="ml">250 ml</button>
      </div>

      <!-- Oven Temperature -->
      <h3 class="font-semibold text-text mb-3">Oven Temperature</h3>
      <div class="flex items-end gap-3 mb-4">
        <div class="flex-1">
          <input type="number" id="ck-temp" class="w-full px-4 py-3 border border-border rounded-xl text-xl font-bold text-center" value="350" step="5" min="0">
        </div>
        <div class="flex-1">
          <select id="ck-temp-unit" class="w-full px-4 py-3 border border-border rounded-xl text-lg">
            <option value="f" selected>°F</option>
            <option value="c">°C</option>
            <option value="gas">Gas Mark</option>
          </select>
        </div>
      </div>
      <div class="grid grid-cols-3 gap-3 mb-6">
        <div class="p-3 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted">°F</div>
          <div class="text-xl font-bold" id="ck-f">350</div>
        </div>
        <div class="p-3 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted">°C</div>
          <div class="text-xl font-bold" id="ck-c">177</div>
        </div>
        <div class="p-3 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted">Gas Mark</div>
          <div class="text-xl font-bold" id="ck-gas">4</div>
        </div>
      </div>

      <!-- Common reference -->
      <div class="p-4 bg-surface-alt rounded-xl mb-6">
        <h3 class="font-semibold text-sm text-text mb-2">Quick Reference</h3>
        <div class="grid grid-cols-2 gap-1 text-xs">
          <div class="flex justify-between p-1"><span>1 cup</span><span class="font-bold">16 tbsp / 48 tsp</span></div>
          <div class="flex justify-between p-1"><span>1 cup</span><span class="font-bold">8 fl oz / 237 ml</span></div>
          <div class="flex justify-between p-1"><span>1 tbsp</span><span class="font-bold">3 tsp / 15 ml</span></div>
          <div class="flex justify-between p-1"><span>1 pint</span><span class="font-bold">2 cups / 473 ml</span></div>
          <div class="flex justify-between p-1"><span>1 quart</span><span class="font-bold">4 cups / 946 ml</span></div>
          <div class="flex justify-between p-1"><span>1 gallon</span><span class="font-bold">16 cups / 3,785 ml</span></div>
        </div>
      </div>

      <ShareButton calculatorId="cooking" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate mx-auto">
      <h2 class="text-2xl font-bold text-text">Kitchen Measurement Guide</h2>
      <p>Cooking measurements can be confusing, especially when converting between US customary and metric systems. This converter handles all common kitchen units.</p>

      <h3 class="text-xl font-semibold text-text mt-8">Frequently Asked Questions</h3>
      <p><strong>How many tablespoons in a cup?</strong> There are 16 tablespoons in 1 US cup.</p>
      <p><strong>Is a UK cup the same as a US cup?</strong> No. A US cup is 236.6 ml while a UK (imperial) cup is 284.1 ml. This converter uses US measurements.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    // Volume units in ml
    const toMl: Record<string, number> = {
      tsp: 4.929, tbsp: 14.787, floz: 29.574, cup: 236.588,
      pint: 473.176, quart: 946.353, gallon: 3785.41, ml: 1, L: 1000,
    };
    const unitLabels: Record<string, string> = {
      tsp: 'tsp', tbsp: 'tbsp', floz: 'fl oz', cup: 'cups',
      pint: 'pints', quart: 'quarts', gallon: 'gal', ml: 'ml', L: 'L',
    };

    function formatVal(n: number): string {
      if (n === 0) return '0';
      if (n >= 1000) return Math.round(n).toLocaleString();
      if (n >= 100) return n.toFixed(1);
      if (n >= 1) return n.toFixed(2);
      return n.toFixed(3);
    }

    function calcCooking() {
      const val = parseFloat((document.getElementById('ck-val') as HTMLInputElement).value) || 0;
      const from = (document.getElementById('ck-from') as HTMLSelectElement).value;
      const ml = val * toMl[from];

      document.getElementById('ck-results')!.innerHTML = Object.entries(toMl).map(([key, factor]) => {
        const converted = ml / factor;
        const isSource = key === from;
        return `<div class="p-3 rounded-xl text-center ${isSource ? 'bg-primary text-white' : 'bg-surface-alt'}">
          <div class="text-xs ${isSource ? 'text-blue-200' : 'text-text-muted'}">${unitLabels[key]}</div>
          <div class="text-lg font-bold">${formatVal(converted)}</div>
        </div>`;
      }).join('');
    }

    function calcTemp() {
      const val = parseFloat((document.getElementById('ck-temp') as HTMLInputElement).value) || 0;
      const unit = (document.getElementById('ck-temp-unit') as HTMLSelectElement).value;

      let f: number, c: number, gas: number;
      if (unit === 'f') { f = val; c = (val - 32) * 5 / 9; }
      else if (unit === 'c') { c = val; f = val * 9 / 5 + 32; }
      else { gas = val; f = gas * 25 + 250; c = (f - 32) * 5 / 9; }

      f = f!; c = c!;
      gas = Math.round((f - 250) / 25);

      document.getElementById('ck-f')!.textContent = Math.round(f).toString();
      document.getElementById('ck-c')!.textContent = Math.round(c).toString();
      document.getElementById('ck-gas')!.textContent = String(Math.max(1, gas));
    }

    setTimeout(() => {
      document.getElementById('ck-val')!.addEventListener('input', calcCooking);
      document.getElementById('ck-from')!.addEventListener('change', calcCooking);

      document.querySelectorAll('.ck-quick').forEach(btn => {
        btn.addEventListener('click', () => {
          (document.getElementById('ck-val') as HTMLInputElement).value = (btn as HTMLElement).dataset.v || '1';
          (document.getElementById('ck-from') as HTMLSelectElement).value = (btn as HTMLElement).dataset.u || 'cup';
          calcCooking();
        });
      });

      document.getElementById('ck-temp')!.addEventListener('input', calcTemp);
      document.getElementById('ck-temp-unit')!.addEventListener('change', calcTemp);

      calcCooking();
      calcTemp();
    }, 50);
  </script>
</CalculatorLayout>
