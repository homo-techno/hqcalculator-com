---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Teeth Whitening Calculator";
const description = "Compare teeth whitening costs: in-office, take-home trays, and OTC products. Estimate shade improvement and maintenance schedule.";
const relatedCalcs = [
  { name: "Dental Crown Calculator", url: "/dental-crown-calculator", description: "Crown cost by material." },
  { name: "Braces Cost Calculator", url: "/braces-cost-calculator", description: "Orthodontic treatment costs." },
  { name: "Dental Insurance Calculator", url: "/dental-insurance-calculator", description: "Dental plan analysis." },
  { name: "Dental Implant Cost Calculator", url: "/dental-implant-cost-calculator", description: "Implant cost estimates." },
  { name: "Tooth Filling Calculator", url: "/tooth-filling-calculator", description: "Filling cost by material." },
  { name: "Budget Calculator", url: "/budget-calculator", description: "Plan your monthly budget." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Teeth Whitening Calculator" keywords="teeth whitening cost, in-office whitening, Zoom whitening, whitening strips, shade guide, whitening maintenance" breadcrumbs={[{ name: "Teeth Whitening", url: "/teeth-whitening-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Teeth Whitening Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Compare whitening methods, estimate shade improvement, and plan maintenance costs.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Whitening Method</label>
            <select id="tw2-method" class="tw2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="office" selected>In-Office (Zoom/Laser)</option>
              <option value="custom">Custom Take-Home Trays</option>
              <option value="otcstrips">OTC Whitening Strips</option>
              <option value="otcpen">OTC Whitening Pen</option>
              <option value="toothpaste">Whitening Toothpaste Only</option>
            </select>
          </div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Current Shade (VITA scale)</label>
            <select id="tw2-shade" class="tw2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="2">A2 (Light)</option>
              <option value="4" selected>A3 (Average)</option>
              <option value="6">A3.5 (Moderate)</option>
              <option value="8">A4 (Dark)</option>
              <option value="10">Very Stained</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-xs font-medium text-text mb-1">Stain Type</label>
            <select id="tw2-stain" class="tw2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="surface" selected>Surface Stains (coffee/wine)</option>
              <option value="age">Age-Related Yellowing</option>
              <option value="tetracycline">Tetracycline Staining</option>
              <option value="fluorosis">Fluorosis</option>
            </select>
          </div>
          <div><label class="block text-xs font-medium text-text mb-1">Maintenance (sessions/year)</label><input type="number" id="tw2-maint" class="tw2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2" min="0" max="12" step="1"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Initial Treatment Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="tw2-cost">$0</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Shade Improvement</div><div class="text-xl font-bold font-mono" id="tw2-shades">0 shades</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Duration to Results</div><div class="text-xl font-bold font-mono" id="tw2-time">0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Results Last</div><div class="text-xl font-bold font-mono" id="tw2-last">0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Annual Maintenance</div><div class="text-xl font-bold font-mono" id="tw2-annual">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">5-Year Total Cost</div><div class="text-xl font-bold font-mono" id="tw2-five">$0</div></div>
        </div>
      </div>
      <ShareButton calculatorId="teeth-whitening" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcTW2() {
      const method = (document.getElementById('tw2-method') as HTMLSelectElement).value;
      const shadeLevel = parseInt((document.getElementById('tw2-shade') as HTMLSelectElement).value) || 4;
      const stain = (document.getElementById('tw2-stain') as HTMLSelectElement).value;
      const maint = parseFloat((document.getElementById('tw2-maint') as HTMLInputElement).value) || 0;

      const costs: Record<string, number> = { office: 650, custom: 350, otcstrips: 45, otcpen: 25, toothpaste: 8 };
      const shadeGains: Record<string, number> = { office: 8, custom: 5, otcstrips: 3, otcpen: 2, toothpaste: 1 };
      const times: Record<string, string> = { office: '1-2 hours', custom: '2-4 weeks', otcstrips: '2-3 weeks', otcpen: '2-4 weeks', toothpaste: '4-8 weeks' };
      const lasts: Record<string, string> = { office: '1-3 years', custom: '6-12 months', otcstrips: '3-6 months', otcpen: '1-3 months', toothpaste: 'While using' };

      const stainMult: Record<string, number> = { surface: 1.0, age: 0.75, tetracycline: 0.4, fluorosis: 0.5 };

      const cost = costs[method];
      const maxGain = shadeGains[method];
      const possibleGain = Math.min(maxGain, shadeLevel);
      const actualGain = Math.round(possibleGain * (stainMult[stain] || 1.0));

      const maintCosts: Record<string, number> = { office: 300, custom: 150, otcstrips: 45, otcpen: 25, toothpaste: 8 };
      const annualMaint = Math.round(maint * maintCosts[method]);
      const fiveYear = cost + annualMaint * 5;

      document.getElementById('tw2-cost')!.textContent = '$' + cost.toLocaleString();
      document.getElementById('tw2-shades')!.textContent = actualGain + ' shades';
      document.getElementById('tw2-time')!.textContent = times[method];
      document.getElementById('tw2-last')!.textContent = lasts[method];
      document.getElementById('tw2-annual')!.textContent = '$' + annualMaint.toLocaleString();
      document.getElementById('tw2-five')!.textContent = '$' + fiveYear.toLocaleString();

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.tw2-in').forEach(el => { el.addEventListener('input', calcTW2); el.addEventListener('change', calcTW2); });
      calcTW2();
    }, 50);
  </script>
</CalculatorLayout>
