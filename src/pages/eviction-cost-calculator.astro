---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Eviction Cost Calculator";
const description = "Calculate total eviction cost including legal fees, court costs, lost rent, and turnover expenses, with timeline and prevention comparison.";
const relatedCalcs = [
  { name: "Rental Property", url: "/rental-property-calculator", description: "Rental property ROI." },
  { name: "Rental Yield", url: "/rental-yield-calculator", description: "Rental yield analysis." },
  { name: "Cash Flow", url: "/cash-flow-calculator", description: "Cash flow analysis." },
  { name: "Cap Rate", url: "/cap-rate-calculator", description: "Capitalization rate." },
  { name: "Rent vs Buy", url: "/rent-vs-buy-calculator", description: "Rent vs buy comparison." },
  { name: "ROI Calculator", url: "/roi-calculator", description: "Return on investment." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Eviction Cost Calculator" keywords="eviction cost, eviction timeline, legal fees, lost rent, tenant turnover, eviction prevention" breadcrumbs={[{ name: "Eviction Cost", url: "/eviction-cost-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Eviction Cost Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate the full cost of eviction and compare to prevention or cash-for-keys alternatives.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div><label class="block text-xs font-medium text-text mb-1">Monthly Rent ($)</label><input type="number" id="ev4-rent" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-2xl font-bold" value="1800" min="0" step="50"></div>
        <h3 class="font-semibold text-sm text-text">Legal &amp; Court Costs</h3>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Attorney Fees ($)</label><input type="number" id="ev4-attorney" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2500" min="0" step="100"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Court Filing Fees ($)</label><input type="number" id="ev4-court" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="300" min="0" step="50"></div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Process Server / Sheriff ($)</label><input type="number" id="ev4-process" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="200" min="0" step="50"></div>
        <h3 class="font-semibold text-sm text-text">Lost Income &amp; Turnover</h3>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Months of Lost Rent</label><input type="number" id="ev4-lostmonths" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="3" min="0" max="12" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Unit Repair / Turnover ($)</label><input type="number" id="ev4-repair" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2000" min="0" step="250"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Vacancy After (months)</label><input type="number" id="ev4-vacancy" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1" min="0" max="6" step="0.5"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Cash-for-Keys Offer ($)</label><input type="number" id="ev4-cashkeys" class="ev4-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="2000" min="0" step="250"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Eviction Cost</div>
          <div class="text-5xl font-extrabold font-mono" id="ev4-total">$0</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Legal Costs</div><div class="text-xl font-bold font-mono" id="ev4-legal">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Lost Rent</div><div class="text-xl font-bold font-mono" id="ev4-lostrent">$0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Turnover Costs</div><div class="text-xl font-bold font-mono" id="ev4-turnover">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Est. Timeline</div><div class="text-xl font-bold font-mono" id="ev4-timeline">-- weeks</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cash-for-Keys Total</div><div class="text-xl font-bold font-mono" id="ev4-cfktotal">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Savings vs Eviction</div><div class="text-xl font-bold font-mono" id="ev4-cfksavings">$0</div></div>
        </div>
        <div class="p-4 rounded-xl text-center" id="ev4-status-box"><div class="font-bold text-sm" id="ev4-status">-</div></div>
      </div>
      <ShareButton calculatorId="eviction-cost" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcEV4() {
      const rent = parseFloat((document.getElementById('ev4-rent') as HTMLInputElement).value) || 0;
      const attorney = parseFloat((document.getElementById('ev4-attorney') as HTMLInputElement).value) || 0;
      const court = parseFloat((document.getElementById('ev4-court') as HTMLInputElement).value) || 0;
      const process = parseFloat((document.getElementById('ev4-process') as HTMLInputElement).value) || 0;
      const lostMonths = parseFloat((document.getElementById('ev4-lostmonths') as HTMLInputElement).value) || 0;
      const repair = parseFloat((document.getElementById('ev4-repair') as HTMLInputElement).value) || 0;
      const vacancy = parseFloat((document.getElementById('ev4-vacancy') as HTMLInputElement).value) || 0;
      const cashKeys = parseFloat((document.getElementById('ev4-cashkeys') as HTMLInputElement).value) || 0;

      const legalCosts = attorney + court + process;
      const lostRent = rent * lostMonths;
      const vacancyLoss = rent * vacancy;
      const turnoverCosts = repair + vacancyLoss;
      const totalEviction = legalCosts + lostRent + turnoverCosts;

      const cfkLostRent = rent * 0.5;
      const cfkTotal = cashKeys + cfkLostRent + repair * 0.5;
      const cfkSavings = totalEviction - cfkTotal;

      const timelineWeeks = Math.round((lostMonths * 4.3) + 2);

      const fmt = (v: number) => (v >= 0 ? '$' : '-$') + Math.abs(v).toLocaleString(undefined, { maximumFractionDigits: 0 });

      document.getElementById('ev4-total')!.textContent = '$' + totalEviction.toLocaleString(undefined, { maximumFractionDigits: 0 });
      document.getElementById('ev4-legal')!.textContent = '$' + legalCosts.toLocaleString(undefined, { maximumFractionDigits: 0 });
      document.getElementById('ev4-lostrent')!.textContent = '$' + lostRent.toLocaleString(undefined, { maximumFractionDigits: 0 });
      document.getElementById('ev4-turnover')!.textContent = '$' + turnoverCosts.toLocaleString(undefined, { maximumFractionDigits: 0 });
      document.getElementById('ev4-timeline')!.textContent = timelineWeeks + ' weeks';
      document.getElementById('ev4-cfktotal')!.textContent = '$' + cfkTotal.toLocaleString(undefined, { maximumFractionDigits: 0 });
      document.getElementById('ev4-cfksavings')!.textContent = fmt(cfkSavings);

      let status: string, color: string;
      if (cfkSavings > totalEviction * 0.3) { status = 'Cash-for-keys strongly recommended â€” significant savings'; color = 'bg-green-50 text-green-800'; }
      else if (cfkSavings > 0) { status = 'Cash-for-keys saves money and time over formal eviction'; color = 'bg-blue-50 text-blue-800'; }
      else { status = 'Formal eviction may be more cost-effective in this case'; color = 'bg-yellow-50 text-yellow-800'; }

      document.getElementById('ev4-status')!.textContent = status;
      document.getElementById('ev4-status-box')!.className = `p-4 rounded-xl text-center ${color}`;
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.ev4-in').forEach(el => { el.addEventListener('input', calcEV4); el.addEventListener('change', calcEV4); });
      calcEV4();
    }, 50);
  </script>
</CalculatorLayout>
