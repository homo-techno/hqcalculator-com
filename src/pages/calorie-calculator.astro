---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Calorie Calculator - Free Daily Calorie Needs Calculator 2026";
const description = "Calculate how many calories you need per day to maintain, lose, or gain weight. Based on Mifflin-St Jeor equation with activity level adjustment.";

const relatedCalcs = [
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Check your Body Mass Index." },
  { name: "Macro Calculator", url: "/macro-calculator", description: "Calculate protein, carbs, and fat needs." },
  { name: "TDEE Calculator", url: "/tdee-calculator", description: "Total Daily Energy Expenditure." },
  { name: "BMR Calculator", url: "/bmr-calculator", description: "Basal Metabolic Rate calculator." },
  { name: "Body Fat Calculator", url: "/body-fat-calculator", description: "Estimate your body fat percentage." },
  { name: "Weight Loss Calculator", url: "/weight-loss-calculator", description: "Plan your weight loss timeline." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Calorie Calculator"
  keywords="calorie calculator, daily calories, TDEE, how many calories do I need, calorie deficit, calorie intake calculator"
  breadcrumbs={[{ name: "Calorie Calculator", url: "/calorie-calculator" }]}
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Calorie Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find out how many calories you need per day based on your age, gender, height, weight, and activity level.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Inputs -->
        <div class="space-y-5">
          <!-- Gender -->
          <div>
            <label class="block text-sm font-medium text-text mb-2">Gender</label>
            <div class="flex gap-3">
              <button id="gender-male" class="flex-1 py-3 text-sm font-medium rounded-xl border-2 border-primary bg-primary/5 text-primary cursor-pointer transition-all">Male</button>
              <button id="gender-female" class="flex-1 py-3 text-sm font-medium rounded-xl border-2 border-border text-text-secondary cursor-pointer transition-all hover:border-primary/30">Female</button>
            </div>
          </div>

          <!-- Age -->
          <div>
            <label for="cal-age" class="block text-sm font-medium text-text mb-1">Age</label>
            <input type="number" id="cal-age" value="30" min="15" max="100" class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
          </div>

          <!-- Unit toggle -->
          <div class="flex gap-2">
            <button id="cal-metric" class="flex-1 py-2 text-xs font-medium rounded-lg bg-primary text-white cursor-pointer">Metric (kg, cm)</button>
            <button id="cal-imperial" class="flex-1 py-2 text-xs font-medium rounded-lg bg-surface-alt text-text-secondary cursor-pointer">Imperial (lbs, ft/in)</button>
          </div>

          <!-- Metric inputs -->
          <div id="cal-metric-inputs">
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label for="cal-weight-kg" class="block text-sm font-medium text-text mb-1">Weight (kg)</label>
                <input type="number" id="cal-weight-kg" value="70" min="30" max="300" class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
              </div>
              <div>
                <label for="cal-height-cm" class="block text-sm font-medium text-text mb-1">Height (cm)</label>
                <input type="number" id="cal-height-cm" value="175" min="100" max="250" class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
              </div>
            </div>
          </div>

          <!-- Imperial inputs -->
          <div id="cal-imperial-inputs" class="hidden">
            <div class="grid grid-cols-3 gap-4">
              <div>
                <label for="cal-weight-lbs" class="block text-sm font-medium text-text mb-1">Weight (lbs)</label>
                <input type="number" id="cal-weight-lbs" value="154" min="66" max="660" class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
              </div>
              <div>
                <label for="cal-height-ft" class="block text-sm font-medium text-text mb-1">Height (ft)</label>
                <input type="number" id="cal-height-ft" value="5" min="3" max="8" class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
              </div>
              <div>
                <label for="cal-height-in" class="block text-sm font-medium text-text mb-1">(in)</label>
                <input type="number" id="cal-height-in" value="9" min="0" max="11" class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
              </div>
            </div>
          </div>

          <!-- Activity Level -->
          <div>
            <label class="block text-sm font-medium text-text mb-2">Activity Level</label>
            <select id="cal-activity" class="w-full text-sm border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary">
              <option value="1.2">Sedentary (little or no exercise)</option>
              <option value="1.375">Lightly active (exercise 1-3 days/week)</option>
              <option value="1.55" selected>Moderately active (exercise 3-5 days/week)</option>
              <option value="1.725">Very active (exercise 6-7 days/week)</option>
              <option value="1.9">Extra active (very hard exercise, physical job)</option>
            </select>
          </div>
        </div>

        <!-- Results -->
        <div class="space-y-4">
          <div class="p-6 bg-primary rounded-2xl text-white text-center">
            <div class="text-sm font-medium text-blue-200 uppercase tracking-wide mb-1">Daily Calories to Maintain Weight</div>
            <div class="text-5xl font-extrabold" id="cal-maintain">2,450</div>
            <div class="text-blue-200 text-sm mt-1">calories/day</div>
          </div>

          <div class="grid grid-cols-1 gap-3">
            <div class="p-4 bg-green-50 border border-green-200 rounded-xl">
              <div class="flex justify-between items-center">
                <div>
                  <div class="text-xs font-medium text-green-700 uppercase">Mild Weight Loss (0.25 kg/week)</div>
                  <div class="text-2xl font-bold text-green-800" id="cal-mild-loss">2,200</div>
                </div>
                <span class="text-sm text-green-600 font-medium">-250 cal/day</span>
              </div>
            </div>
            <div class="p-4 bg-emerald-50 border border-emerald-200 rounded-xl">
              <div class="flex justify-between items-center">
                <div>
                  <div class="text-xs font-medium text-emerald-700 uppercase">Weight Loss (0.5 kg/week)</div>
                  <div class="text-2xl font-bold text-emerald-800" id="cal-loss">1,950</div>
                </div>
                <span class="text-sm text-emerald-600 font-medium">-500 cal/day</span>
              </div>
            </div>
            <div class="p-4 bg-orange-50 border border-orange-200 rounded-xl">
              <div class="flex justify-between items-center">
                <div>
                  <div class="text-xs font-medium text-orange-700 uppercase">Extreme Loss (1 kg/week)</div>
                  <div class="text-2xl font-bold text-orange-800" id="cal-extreme-loss">1,450</div>
                </div>
                <span class="text-sm text-orange-600 font-medium">-1000 cal/day</span>
              </div>
            </div>
            <div class="p-4 bg-blue-50 border border-blue-200 rounded-xl">
              <div class="flex justify-between items-center">
                <div>
                  <div class="text-xs font-medium text-blue-700 uppercase">Weight Gain (0.5 kg/week)</div>
                  <div class="text-2xl font-bold text-blue-800" id="cal-gain">2,950</div>
                </div>
                <span class="text-sm text-blue-600 font-medium">+500 cal/day</span>
              </div>
            </div>
          </div>

          <div class="p-4 bg-surface-alt rounded-xl text-sm">
            <div class="font-medium text-text mb-1">Your BMR (Basal Metabolic Rate)</div>
            <div class="text-xl font-bold" id="cal-bmr">1,680</div>
            <p class="text-text-muted text-xs mt-1">Calories your body burns at complete rest. Based on Mifflin-St Jeor equation.</p>
          </div>
        </div>
      </div>

      <ShareButton calculatorId="calorie" />
      <FeedbackWidget />
    </div>

    <!-- SEO Content -->
    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How Many Calories Do You Need Per Day?</h2>
      <p>The number of calories you need depends on your age, gender, height, weight, and activity level. Our calculator uses the <strong>Mifflin-St Jeor equation</strong>, which is considered the most accurate formula for estimating Basal Metabolic Rate (BMR) and daily calorie needs.</p>

      <h3 class="text-xl font-semibold text-text mt-8">The Mifflin-St Jeor Equation</h3>
      <div class="bg-surface-alt rounded-xl p-4 my-4 space-y-2 font-mono text-sm">
        <p><strong>Men:</strong> BMR = (10 &times; weight in kg) + (6.25 &times; height in cm) - (5 &times; age) + 5</p>
        <p><strong>Women:</strong> BMR = (10 &times; weight in kg) + (6.25 &times; height in cm) - (5 &times; age) - 161</p>
      </div>
      <p>Your BMR is then multiplied by an activity factor to get your Total Daily Energy Expenditure (TDEE) â€” the total calories you burn per day.</p>

      <h3 class="text-xl font-semibold text-text mt-8">Activity Level Multipliers</h3>
      <ul>
        <li><strong>Sedentary (x1.2):</strong> Desk job, little exercise</li>
        <li><strong>Lightly active (x1.375):</strong> Light exercise 1-3 days/week</li>
        <li><strong>Moderately active (x1.55):</strong> Moderate exercise 3-5 days/week</li>
        <li><strong>Very active (x1.725):</strong> Hard exercise 6-7 days/week</li>
        <li><strong>Extra active (x1.9):</strong> Very intense exercise, physical job</li>
      </ul>

      <h3 class="text-xl font-semibold text-text mt-8">Calorie Deficit for Weight Loss</h3>
      <p>To lose weight, you need to eat fewer calories than you burn. A deficit of <strong>500 calories/day</strong> leads to approximately 0.5 kg (1 lb) of weight loss per week. This is generally considered a safe and sustainable rate of loss.</p>
      <p>Important: Never go below 1,200 calories/day for women or 1,500 calories/day for men without medical supervision.</p>

      <h2 class="text-2xl font-bold text-text mt-12">Frequently Asked Questions</h2>
      <h3 class="text-lg font-semibold text-text mt-6">How accurate is this calorie calculator?</h3>
      <p>The Mifflin-St Jeor equation is accurate to within about 10% for most people. Individual metabolism varies based on genetics, muscle mass, hormones, and other factors. Use this as a starting point and adjust based on actual results over 2-4 weeks.</p>
      <h3 class="text-lg font-semibold text-text mt-6">Should I eat back exercise calories?</h3>
      <p>If your activity level is already factored in, you generally don't need to eat back exercise calories. If you track exercise separately, eating back 50-75% of exercise calories is a common approach to avoid overestimating burns.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    let gender = 'male';
    let unitMode = 'metric';

    // Gender toggle
    document.getElementById('gender-male')!.addEventListener('click', () => { gender = 'male'; updateGenderUI(); calc(); });
    document.getElementById('gender-female')!.addEventListener('click', () => { gender = 'female'; updateGenderUI(); calc(); });

    function updateGenderUI() {
      const m = document.getElementById('gender-male')!;
      const f = document.getElementById('gender-female')!;
      if (gender === 'male') {
        m.className = 'flex-1 py-3 text-sm font-medium rounded-xl border-2 border-primary bg-primary/5 text-primary cursor-pointer transition-all';
        f.className = 'flex-1 py-3 text-sm font-medium rounded-xl border-2 border-border text-text-secondary cursor-pointer transition-all hover:border-primary/30';
      } else {
        f.className = 'flex-1 py-3 text-sm font-medium rounded-xl border-2 border-primary bg-primary/5 text-primary cursor-pointer transition-all';
        m.className = 'flex-1 py-3 text-sm font-medium rounded-xl border-2 border-border text-text-secondary cursor-pointer transition-all hover:border-primary/30';
      }
    }

    // Unit toggle
    document.getElementById('cal-metric')!.addEventListener('click', () => { unitMode = 'metric'; updateUnitUI(); calc(); });
    document.getElementById('cal-imperial')!.addEventListener('click', () => { unitMode = 'imperial'; updateUnitUI(); calc(); });

    function updateUnitUI() {
      const mb = document.getElementById('cal-metric')!;
      const ib = document.getElementById('cal-imperial')!;
      const mi = document.getElementById('cal-metric-inputs')!;
      const ii = document.getElementById('cal-imperial-inputs')!;
      if (unitMode === 'metric') {
        mb.className = 'flex-1 py-2 text-xs font-medium rounded-lg bg-primary text-white cursor-pointer';
        ib.className = 'flex-1 py-2 text-xs font-medium rounded-lg bg-surface-alt text-text-secondary cursor-pointer';
        mi.classList.remove('hidden'); ii.classList.add('hidden');
      } else {
        ib.className = 'flex-1 py-2 text-xs font-medium rounded-lg bg-primary text-white cursor-pointer';
        mb.className = 'flex-1 py-2 text-xs font-medium rounded-lg bg-surface-alt text-text-secondary cursor-pointer';
        ii.classList.remove('hidden'); mi.classList.add('hidden');
      }
    }

    function getVals() {
      const age = parseFloat((document.getElementById('cal-age') as HTMLInputElement).value) || 30;
      const activity = parseFloat((document.getElementById('cal-activity') as HTMLSelectElement).value);
      let weightKg: number, heightCm: number;
      if (unitMode === 'metric') {
        weightKg = parseFloat((document.getElementById('cal-weight-kg') as HTMLInputElement).value) || 70;
        heightCm = parseFloat((document.getElementById('cal-height-cm') as HTMLInputElement).value) || 175;
      } else {
        const lbs = parseFloat((document.getElementById('cal-weight-lbs') as HTMLInputElement).value) || 154;
        const ft = parseFloat((document.getElementById('cal-height-ft') as HTMLInputElement).value) || 5;
        const inches = parseFloat((document.getElementById('cal-height-in') as HTMLInputElement).value) || 9;
        weightKg = lbs * 0.453592;
        heightCm = (ft * 12 + inches) * 2.54;
      }
      return { age, weightKg, heightCm, activity };
    }

    function calc() {
      const { age, weightKg, heightCm, activity } = getVals();
      // Mifflin-St Jeor
      let bmr: number;
      if (gender === 'male') {
        bmr = 10 * weightKg + 6.25 * heightCm - 5 * age + 5;
      } else {
        bmr = 10 * weightKg + 6.25 * heightCm - 5 * age - 161;
      }
      const tdee = bmr * activity;
      const fmt = (n: number) => Math.round(n).toLocaleString('en-US');

      document.getElementById('cal-bmr')!.textContent = fmt(bmr);
      document.getElementById('cal-maintain')!.textContent = fmt(tdee);
      document.getElementById('cal-mild-loss')!.textContent = fmt(tdee - 250);
      document.getElementById('cal-loss')!.textContent = fmt(tdee - 500);
      document.getElementById('cal-extreme-loss')!.textContent = fmt(tdee - 1000);
      document.getElementById('cal-gain')!.textContent = fmt(tdee + 500);

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    // Attach listeners
    ['cal-age', 'cal-weight-kg', 'cal-height-cm', 'cal-weight-lbs', 'cal-height-ft', 'cal-height-in'].forEach(id => {
      document.getElementById(id)?.addEventListener('input', calc);
    });
    document.getElementById('cal-activity')?.addEventListener('change', calc);

    calc();
  </script>
</CalculatorLayout>
