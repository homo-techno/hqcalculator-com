---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Geological Time Calculator - Era, Period & Epoch Lookup";
const description = "Determine the geological era, period, and epoch from an age in millions of years. See major events and proportion of Earth's history.";
const relatedCalcs = [
  { name: "Age Calculator", url: "/age-calculator", description: "Calculate age." },
  { name: "Half-Life Calculator", url: "/half-life-calculator", description: "Decay rates." },
  { name: "Radioactive Decay", url: "/radioactive-decay-calculator", description: "Isotope decay." },
  { name: "Percentage Calculator", url: "/percentage-calculator", description: "Percentage math." },
  { name: "Earthquake Magnitude", url: "/earthquake-magnitude-calculator", description: "Earthquake scale." },
  { name: "Erosion Calculator", url: "/erosion-calculator", description: "Erosion rates." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Geological Time Calculator" keywords="geological time scale, era, period, epoch, Ma, million years, Earth history, geology" breadcrumbs={[{ name: "Geological Time", url: "/geological-time-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Geological Time Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Enter an age in millions of years (Ma) to identify the geological era, period, epoch, and major events from that time.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-text mb-1">Age (millions of years ago - Ma)</label>
          <input type="number" id="gt3-age" class="gt3-in w-full px-4 py-3 border border-border rounded-xl text-lg" value="66" min="0" max="4600" step="1">
        </div>
        <div>
          <label class="block text-sm font-medium text-text mb-1">Quick Select</label>
          <div class="flex flex-wrap gap-2">
            <button class="gt3-btn px-3 py-1.5 text-xs rounded-lg border border-border hover:bg-surface-alt" data-age="0.01">Ice Age (0.01)</button>
            <button class="gt3-btn px-3 py-1.5 text-xs rounded-lg border border-border hover:bg-surface-alt" data-age="66">Dino Extinction (66)</button>
            <button class="gt3-btn px-3 py-1.5 text-xs rounded-lg border border-border hover:bg-surface-alt" data-age="252">Great Dying (252)</button>
            <button class="gt3-btn px-3 py-1.5 text-xs rounded-lg border border-border hover:bg-surface-alt" data-age="541">Cambrian Explosion (541)</button>
            <button class="gt3-btn px-3 py-1.5 text-xs rounded-lg border border-border hover:bg-surface-alt" data-age="2500">Great Oxidation (2500)</button>
            <button class="gt3-btn px-3 py-1.5 text-xs rounded-lg border border-border hover:bg-surface-alt" data-age="4600">Earth Formation (4600)</button>
          </div>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Geological Period</div>
          <div class="text-4xl font-extrabold" id="gt3-period">--</div>
          <div class="text-sm text-blue-200 mt-1" id="gt3-era">--</div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Eon</div>
            <div class="text-xl font-bold" id="gt3-eon">--</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Epoch</div>
            <div class="text-xl font-bold" id="gt3-epoch">--</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">% of Earth History</div>
            <div class="text-xl font-bold" id="gt3-pct">0%</div>
          </div>
          <div class="p-4 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-muted uppercase">Years Ago</div>
            <div class="text-xl font-bold" id="gt3-years">0</div>
          </div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Major Event</div>
          <div class="text-sm font-bold" id="gt3-event">--</div>
        </div>
        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-muted uppercase">Life on Earth</div>
          <div class="text-sm" id="gt3-life">--</div>
        </div>
      </div>

      <ShareButton calculatorId="geological-time" />
      <FeedbackWidget />
    </div>

    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">Geological Time Scale</h2>
      <p>Earth is approximately 4,600 million years (4.6 billion years) old. The geological time scale divides this vast span into eons, eras, periods, and epochs based on major geological and biological events recorded in the rock record.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcGT3() {
      const age = parseFloat((document.getElementById('gt3-age') as HTMLInputElement).value) || 0;

      const timescale = [
        { maxAge: 0.0117, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Quaternary', epoch: 'Holocene', event: 'Human civilization develops', life: 'Modern humans dominate, agriculture begins' },
        { maxAge: 2.58, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Quaternary', epoch: 'Pleistocene', event: 'Ice ages, woolly mammoths', life: 'Early humans evolve, megafauna roam Earth' },
        { maxAge: 5.33, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Neogene', epoch: 'Pliocene', event: 'Formation of Panama isthmus', life: 'Early hominins appear, grasslands expand' },
        { maxAge: 23.03, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Neogene', epoch: 'Miocene', event: 'Himalayas rising, grasslands spread', life: 'Apes diversify, horses and whales evolve' },
        { maxAge: 33.9, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Paleogene', epoch: 'Oligocene', event: 'Antarctic ice sheet forms', life: 'Early monkeys, cats and dogs appear' },
        { maxAge: 56, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Paleogene', epoch: 'Eocene', event: 'Thermal maximum, India collides with Asia', life: 'Early whales, horses, bats evolve' },
        { maxAge: 66, eon: 'Phanerozoic', era: 'Cenozoic', period: 'Paleogene', epoch: 'Paleocene', event: 'Recovery from mass extinction', life: 'Mammals diversify after dinosaur extinction' },
        { maxAge: 145, eon: 'Phanerozoic', era: 'Mesozoic', period: 'Cretaceous', epoch: 'Late Cretaceous', event: 'Asteroid impact, mass extinction at end', life: 'T-Rex, flowering plants, dinosaur peak diversity' },
        { maxAge: 201.3, eon: 'Phanerozoic', era: 'Mesozoic', period: 'Jurassic', epoch: 'Jurassic', event: 'Pangaea breaks apart', life: 'Large dinosaurs, Archaeopteryx, earliest birds' },
        { maxAge: 252, eon: 'Phanerozoic', era: 'Mesozoic', period: 'Triassic', epoch: 'Triassic', event: 'Recovery from Permian extinction', life: 'First dinosaurs, mammals, and pterosaurs' },
        { maxAge: 299, eon: 'Phanerozoic', era: 'Paleozoic', period: 'Permian', epoch: 'Permian', event: 'Greatest mass extinction (The Great Dying)', life: 'Mammal-like reptiles, 96% of species go extinct' },
        { maxAge: 359, eon: 'Phanerozoic', era: 'Paleozoic', period: 'Carboniferous', epoch: 'Carboniferous', event: 'Vast coal swamp forests', life: 'Giant insects, first reptiles, coal deposits form' },
        { maxAge: 419, eon: 'Phanerozoic', era: 'Paleozoic', period: 'Devonian', epoch: 'Devonian', event: 'Age of Fishes', life: 'First forests, amphibians move to land' },
        { maxAge: 444, eon: 'Phanerozoic', era: 'Paleozoic', period: 'Silurian', epoch: 'Silurian', event: 'First land plants', life: 'Vascular plants, jawed fishes appear' },
        { maxAge: 485, eon: 'Phanerozoic', era: 'Paleozoic', period: 'Ordovician', epoch: 'Ordovician', event: 'Mass extinction at end', life: 'Marine invertebrates diversify, first fish' },
        { maxAge: 541, eon: 'Phanerozoic', era: 'Paleozoic', period: 'Cambrian', epoch: 'Cambrian', event: 'Cambrian Explosion', life: 'Rapid appearance of most major animal phyla' },
        { maxAge: 1000, eon: 'Proterozoic', era: 'Neoproterozoic', period: 'Neoproterozoic', epoch: 'N/A', event: 'Snowball Earth glaciations', life: 'First multicellular organisms, Ediacaran biota' },
        { maxAge: 1600, eon: 'Proterozoic', era: 'Mesoproterozoic', period: 'Mesoproterozoic', epoch: 'N/A', event: 'Supercontinent Rodinia forms', life: 'Eukaryotic cells diversify' },
        { maxAge: 2500, eon: 'Proterozoic', era: 'Paleoproterozoic', period: 'Paleoproterozoic', epoch: 'N/A', event: 'Great Oxidation Event', life: 'Oxygen accumulates, cyanobacteria thrive' },
        { maxAge: 4000, eon: 'Archean', era: 'Archean', period: 'Archean', epoch: 'N/A', event: 'Oldest known rocks form', life: 'First single-celled life (prokaryotes)' },
        { maxAge: 4600, eon: 'Hadean', era: 'Hadean', period: 'Hadean', epoch: 'N/A', event: 'Earth forms from solar nebula', life: 'No life, molten surface, heavy bombardment' },
      ];

      let match = timescale[timescale.length - 1];
      for (const t of timescale) {
        if (age <= t.maxAge) {
          match = t;
          break;
        }
      }

      const pctHistory = (age / 4600 * 100).toFixed(2);
      const yearsAgo = age * 1e6;
      const yearsStr = yearsAgo >= 1e9 ? (yearsAgo / 1e9).toFixed(2) + ' billion' : yearsAgo >= 1e6 ? (yearsAgo / 1e6).toFixed(1) + ' million' : yearsAgo.toLocaleString();

      document.getElementById('gt3-period')!.textContent = match.period;
      document.getElementById('gt3-era')!.textContent = match.era + ' Era';
      document.getElementById('gt3-eon')!.textContent = match.eon;
      document.getElementById('gt3-epoch')!.textContent = match.epoch;
      document.getElementById('gt3-pct')!.textContent = pctHistory + '%';
      document.getElementById('gt3-years')!.textContent = yearsStr + ' years';
      document.getElementById('gt3-event')!.textContent = match.event;
      document.getElementById('gt3-life')!.textContent = match.life;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      document.querySelectorAll('.gt3-in').forEach(el => { el.addEventListener('input', calcGT3); el.addEventListener('change', calcGT3); });
      document.querySelectorAll('.gt3-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const age = (btn as HTMLElement).dataset.age || '66';
          (document.getElementById('gt3-age') as HTMLInputElement).value = age;
          calcGT3();
        });
      });
      calcGT3();
    }, 50);
  </script>
</CalculatorLayout>
