---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Emotional Intelligence Calculator - EQ Self-Assessment";
const description = "Assess your emotional intelligence across five domains: self-awareness, self-regulation, motivation, empathy, and social skills. Get your EQ score and percentile.";
const relatedCalcs = [
  { name: "Productivity Calculator", url: "/productivity-calculator", description: "Productivity metrics." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Body mass index." },
  { name: "Sleep Calculator", url: "/sleep-calculator", description: "Optimize sleep cycles." },
  { name: "Age Calculator", url: "/age-calculator", description: "Calculate exact age." },
  { name: "Heart Rate Calculator", url: "/heart-rate-calculator", description: "Heart rate zones." },
  { name: "Calorie Calculator", url: "/calorie-calculator", description: "Daily calorie needs." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Emotional Intelligence Calculator" keywords="emotional intelligence, EQ, self-awareness, empathy, social skills, self-regulation, motivation, EQ score" breadcrumbs={[{ name: "Emotional Intelligence", url: "/emotional-intelligence-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Emotional Intelligence Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Rate yourself on each statement (1 = Strongly Disagree, 5 = Strongly Agree) to estimate your EQ profile.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <h3 class="font-semibold text-text">Self-Awareness</h3>
        <div>
          <label class="block text-sm text-text mb-1">I can accurately identify my emotions as I experience them.</label>
          <input type="range" id="ei-sa1" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I understand how my feelings affect my behavior and decisions.</label>
          <input type="range" id="ei-sa2" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>

        <h3 class="font-semibold text-text mt-2">Self-Regulation</h3>
        <div>
          <label class="block text-sm text-text mb-1">I can stay calm and composed under pressure.</label>
          <input type="range" id="ei-sr1" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I think before acting when emotionally charged.</label>
          <input type="range" id="ei-sr2" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>

        <h3 class="font-semibold text-text mt-2">Motivation</h3>
        <div>
          <label class="block text-sm text-text mb-1">I persist toward goals despite setbacks and obstacles.</label>
          <input type="range" id="ei-mo1" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I am driven by internal standards rather than external rewards.</label>
          <input type="range" id="ei-mo2" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>

        <h3 class="font-semibold text-text mt-2">Empathy</h3>
        <div>
          <label class="block text-sm text-text mb-1">I can sense how others are feeling even when they do not say it.</label>
          <input type="range" id="ei-em1" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I consider other people's feelings when making decisions.</label>
          <input type="range" id="ei-em2" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>

        <h3 class="font-semibold text-text mt-2">Social Skills</h3>
        <div>
          <label class="block text-sm text-text mb-1">I handle conflicts and disagreements constructively.</label>
          <input type="range" id="ei-ss1" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>
        <div>
          <label class="block text-sm text-text mb-1">I build rapport easily and maintain strong relationships.</label>
          <input type="range" id="ei-ss2" class="ei-in w-full" min="1" max="5" step="1">
          <div class="flex justify-between text-xs text-text-secondary"><span>Disagree (1)</span><span>Agree (5)</span></div>
        </div>
      </div>

      <div class="mt-6 space-y-3">
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm opacity-80">Overall EQ Score</div>
          <div class="text-2xl font-extrabold mt-1" id="ei-total">--</div>
        </div>

        <div class="grid grid-cols-5 gap-2">
          <div class="p-3 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Self-Aware</div>
            <div class="text-lg font-bold text-text mt-1" id="ei-d1">--</div>
          </div>
          <div class="p-3 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Regulate</div>
            <div class="text-lg font-bold text-text mt-1" id="ei-d2">--</div>
          </div>
          <div class="p-3 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Motivate</div>
            <div class="text-lg font-bold text-text mt-1" id="ei-d3">--</div>
          </div>
          <div class="p-3 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Empathy</div>
            <div class="text-lg font-bold text-text mt-1" id="ei-d4">--</div>
          </div>
          <div class="p-3 bg-surface-alt rounded-xl text-center">
            <div class="text-xs text-text-secondary">Social</div>
            <div class="text-lg font-bold text-text mt-1" id="ei-d5">--</div>
          </div>
        </div>

        <div class="p-4 bg-surface-alt rounded-xl text-center">
          <div class="text-xs text-text-secondary">Estimated Percentile</div>
          <div class="text-xl font-bold text-text mt-1" id="ei-pct">--</div>
        </div>

        <div class="p-4 bg-surface-alt rounded-xl">
          <div class="text-xs text-text-secondary mb-2">Profile Summary</div>
          <div class="text-sm text-text" id="ei-summary">--</div>
        </div>
      </div>

      <ShareButton calculatorId="emotional-intelligence" />
      <FeedbackWidget />
    </div>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    function calcEI() {
      const sa = (parseInt((document.getElementById('ei-sa1') as HTMLInputElement).value) || 3) + (parseInt((document.getElementById('ei-sa2') as HTMLInputElement).value) || 3);
      const sr = (parseInt((document.getElementById('ei-sr1') as HTMLInputElement).value) || 3) + (parseInt((document.getElementById('ei-sr2') as HTMLInputElement).value) || 3);
      const mo = (parseInt((document.getElementById('ei-mo1') as HTMLInputElement).value) || 3) + (parseInt((document.getElementById('ei-mo2') as HTMLInputElement).value) || 3);
      const em = (parseInt((document.getElementById('ei-em1') as HTMLInputElement).value) || 3) + (parseInt((document.getElementById('ei-em2') as HTMLInputElement).value) || 3);
      const ss = (parseInt((document.getElementById('ei-ss1') as HTMLInputElement).value) || 3) + (parseInt((document.getElementById('ei-ss2') as HTMLInputElement).value) || 3);

      const total = sa + sr + mo + em + ss;
      const maxScore = 50;
      const pct = Math.min(99, Math.max(1, Math.round((total / maxScore) * 100)));

      function domainLabel(score: number): string {
        if (score >= 9) return 'High';
        if (score >= 7) return 'Above Avg';
        if (score >= 5) return 'Average';
        if (score >= 3) return 'Below Avg';
        return 'Low';
      }

      document.getElementById('ei-total')!.textContent = total + ' / ' + maxScore;
      document.getElementById('ei-d1')!.textContent = sa + '/10';
      document.getElementById('ei-d2')!.textContent = sr + '/10';
      document.getElementById('ei-d3')!.textContent = mo + '/10';
      document.getElementById('ei-d4')!.textContent = em + '/10';
      document.getElementById('ei-d5')!.textContent = ss + '/10';
      document.getElementById('ei-pct')!.textContent = pct + 'th percentile (approx.)';

      // Find strengths and areas for growth
      const domains = [
        { name: 'Self-Awareness', score: sa },
        { name: 'Self-Regulation', score: sr },
        { name: 'Motivation', score: mo },
        { name: 'Empathy', score: em },
        { name: 'Social Skills', score: ss },
      ];
      domains.sort((a, b) => b.score - a.score);
      const strongest = domains[0].name;
      const weakest = domains[4].name;

      let summary = 'Your strongest domain is ' + strongest + ' and your area with most room for growth is ' + weakest + '. ';
      if (total >= 40) summary += 'Your EQ is very high. You likely excel in leadership, relationships, and emotional management.';
      else if (total >= 30) summary += 'Your EQ is above average. You have good emotional skills with some areas to develop further.';
      else if (total >= 20) summary += 'Your EQ is in the average range. Targeted practice in your weaker domains can yield significant improvement.';
      else summary += 'Your EQ score suggests room for growth. The good news is that unlike IQ, emotional intelligence can be substantially improved through practice and awareness.';

      document.getElementById('ei-summary')!.textContent = summary;

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    setTimeout(() => {
      const ids = ['ei-sa1','ei-sa2','ei-sr1','ei-sr2','ei-mo1','ei-mo2','ei-em1','ei-em2','ei-ss1','ei-ss2'];
      ids.forEach(id => { (document.getElementById(id) as HTMLInputElement).value = '3'; });
      document.querySelectorAll('.ei-in').forEach(el => {
        el.addEventListener('input', calcEI);
        el.addEventListener('change', calcEI);
      });
      calcEI();
    }, 50);
  </script>
</CalculatorLayout>
