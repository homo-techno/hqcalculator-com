---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';

const title = "Age Calculator - How Old Am I? Free Online Age Calculator 2026";
const description = "Calculate your exact age in years, months, days, hours, and minutes. Find out how old you are today or on any date. Free and instant.";

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I calculate my exact age?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Enter your date of birth in the age calculator above. It will instantly show your exact age in years, months, and days, accounting for leap years and varying month lengths."
      }
    },
    {
      "@type": "Question",
      "name": "How many days old am I?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The age calculator shows your age in total days. For example, a 30-year-old person is approximately 10,950 days old, though the exact number depends on leap years in that period."
      }
    }
  ]
};

const relatedCalcs = [
  { name: "Date Calculator", url: "/date-calculator", description: "Calculate the number of days between two dates." },
  { name: "Pregnancy Calculator", url: "/pregnancy-calculator", description: "Calculate your due date and pregnancy milestones." },
  { name: "BMI Calculator", url: "/bmi-calculator", description: "Calculate your Body Mass Index based on height and weight." },
  { name: "Day Counter", url: "/day-counter", description: "Count days from or until a specific date." },
  { name: "Time Calculator", url: "/time-calculator", description: "Add or subtract time durations easily." },
  { name: "Retirement Calculator", url: "/retirement-calculator", description: "Plan your retirement and savings goals." },
];
---

<CalculatorLayout
  title={title}
  description={description}
  calculatorName="Age Calculator"
  keywords="age calculator, how old am I, calculate age, age in days, date of birth calculator, birthday calculator"
  breadcrumbs={[{ name: "Age Calculator", url: "/age-calculator" }]}
>
  <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Age Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Find your exact age in years, months, days, hours, and minutes. Just enter your date of birth.</p>

    <div class="bg-white border border-border rounded-2xl shadow-sm overflow-hidden">
      <div class="p-6 sm:p-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Inputs -->
          <div>
            <div class="space-y-5">
              <div>
                <label for="birth-date" class="block text-sm font-medium text-text mb-2">Date of Birth</label>
                <input type="date" id="birth-date" value="1990-06-15"
                  class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
              </div>
              <div>
                <label for="target-date" class="block text-sm font-medium text-text mb-2">Age at Date</label>
                <input type="date" id="target-date"
                  class="w-full text-lg font-semibold border border-border rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                <p class="text-xs text-text-muted mt-1">Default: today. Change to calculate age on a different date.</p>
              </div>
            </div>
          </div>

          <!-- Results -->
          <div class="space-y-4">
            <div class="p-5 bg-primary rounded-2xl text-white text-center">
              <div class="text-sm font-medium text-blue-200 uppercase tracking-wide mb-1">Your Age</div>
              <div class="text-4xl sm:text-5xl font-extrabold" id="age-years">—</div>
              <div class="text-blue-200 font-medium mt-1" id="age-full">—</div>
            </div>

            <div class="grid grid-cols-2 gap-3">
              <div class="p-4 bg-surface-alt rounded-xl text-center">
                <div class="text-xs text-text-muted uppercase tracking-wide">Months</div>
                <div class="text-2xl font-bold text-text" id="age-months">—</div>
              </div>
              <div class="p-4 bg-surface-alt rounded-xl text-center">
                <div class="text-xs text-text-muted uppercase tracking-wide">Weeks</div>
                <div class="text-2xl font-bold text-text" id="age-weeks">—</div>
              </div>
              <div class="p-4 bg-surface-alt rounded-xl text-center">
                <div class="text-xs text-text-muted uppercase tracking-wide">Days</div>
                <div class="text-2xl font-bold text-text" id="age-days">—</div>
              </div>
              <div class="p-4 bg-surface-alt rounded-xl text-center">
                <div class="text-xs text-text-muted uppercase tracking-wide">Hours</div>
                <div class="text-2xl font-bold text-text" id="age-hours">—</div>
              </div>
            </div>

            <!-- Next Birthday -->
            <div class="p-4 bg-accent/10 rounded-xl">
              <div class="text-xs text-accent uppercase tracking-wide font-medium">Next Birthday</div>
              <div class="text-lg font-bold text-text" id="next-birthday">—</div>
              <div class="text-sm text-text-secondary" id="next-birthday-days">—</div>
            </div>
          </div>
        </div>

        <ShareButton calculatorId="age" />
        <FeedbackWidget />
      </div>
    </div>

    <!-- Milestones -->
    <div class="mt-12 bg-white border border-border rounded-2xl p-6 sm:p-8">
      <h2 class="text-2xl font-bold text-text mb-4">Life Milestones</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-border">
              <th class="text-left py-2 pr-4 font-semibold text-text">Milestone</th>
              <th class="text-left py-2 pr-4 font-semibold text-text">Date</th>
              <th class="text-right py-2 font-semibold text-text">Status</th>
            </tr>
          </thead>
          <tbody id="milestones-tbody" class="text-text-secondary">
          </tbody>
        </table>
      </div>
    </div>

    <!-- SEO Content -->
    <article class="mt-12 max-w-4xl prose prose-slate">
      <h2 class="text-2xl font-bold text-text">How to Calculate Your Exact Age</h2>
      <p>Calculating your exact age is more complex than simply subtracting your birth year from the current year. The precise calculation must account for the specific month and day, leap years, and varying month lengths (28, 29, 30, or 31 days).</p>

      <h3 class="text-xl font-semibold text-text mt-8">Step-by-Step Age Calculation</h3>
      <ol>
        <li><strong>Start with the years:</strong> Subtract the birth year from the current year.</li>
        <li><strong>Adjust for months:</strong> If the current month is before your birth month, subtract one year and add the remaining months.</li>
        <li><strong>Adjust for days:</strong> If the current day is before your birth day, subtract one month and add the remaining days from the previous month.</li>
      </ol>

      <h3 class="text-xl font-semibold text-text mt-8">Understanding Leap Years</h3>
      <p>A leap year occurs every 4 years (with exceptions for century years not divisible by 400). This means February has 29 days instead of 28. If you were born on February 29, you technically have a birthday only once every 4 years — though most people celebrate on either February 28 or March 1 in non-leap years.</p>

      <h3 class="text-xl font-semibold text-text mt-8">Age in Different Units</h3>
      <p>Your age can be expressed in various units:</p>
      <ul>
        <li><strong>Years:</strong> The most common way to express age</li>
        <li><strong>Months:</strong> Often used for babies and toddlers (e.g., "18 months old")</li>
        <li><strong>Weeks:</strong> Used during pregnancy and early infancy</li>
        <li><strong>Days:</strong> Used for precise calculations, such as legal age requirements</li>
        <li><strong>Hours:</strong> Shows the vast scale of time in a human life</li>
      </ul>

      <h3 class="text-xl font-semibold text-text mt-8">Why Calculate Your Exact Age?</h3>
      <p>There are many practical reasons to know your exact age:</p>
      <ul>
        <li><strong>Legal requirements:</strong> Voting age, drinking age, retirement age, driving age</li>
        <li><strong>Insurance:</strong> Life and health insurance premiums are based on exact age</li>
        <li><strong>Retirement planning:</strong> Social Security benefits depend on your exact age</li>
        <li><strong>Medical purposes:</strong> Growth charts, developmental milestones, health screenings</li>
        <li><strong>Fun facts:</strong> Know exactly how many days you've been alive!</li>
      </ul>

      <h2 class="text-2xl font-bold text-text mt-12">Frequently Asked Questions</h2>

      <h3 class="text-lg font-semibold text-text mt-6">How do I calculate my exact age?</h3>
      <p>Enter your date of birth in the age calculator above. It will instantly show your exact age in years, months, and days, accounting for leap years and varying month lengths.</p>

      <h3 class="text-lg font-semibold text-text mt-6">How many days old am I?</h3>
      <p>The age calculator shows your age in total days. For example, a 30-year-old person is approximately 10,950 days old, though the exact number depends on leap years in that period.</p>

      <h3 class="text-lg font-semibold text-text mt-6">Does the calculator account for leap years?</h3>
      <p>Yes, our age calculator fully accounts for leap years when calculating your exact age. This ensures accuracy down to the day.</p>

      <h3 class="text-lg font-semibold text-text mt-6">Can I calculate my age on a future date?</h3>
      <p>Yes! Change the "Age at Date" field to any future (or past) date to see how old you will be (or were) on that specific date.</p>
    </article>

    <RelatedCalculators calculators={relatedCalcs} />
  </div>

  <script>
    const birthInput = document.getElementById('birth-date') as HTMLInputElement;
    const targetInput = document.getElementById('target-date') as HTMLInputElement;

    // Set default target date to today
    const today = new Date();
    targetInput.value = today.toISOString().split('T')[0];

    function calculateAge() {
      const birth = new Date(birthInput.value + 'T00:00:00');
      const target = new Date(targetInput.value + 'T00:00:00');
      if (isNaN(birth.getTime()) || isNaN(target.getTime())) return;
      if (target < birth) return;

      // Calculate years, months, days
      let years = target.getFullYear() - birth.getFullYear();
      let months = target.getMonth() - birth.getMonth();
      let days = target.getDate() - birth.getDate();

      if (days < 0) {
        months--;
        const prevMonth = new Date(target.getFullYear(), target.getMonth(), 0);
        days += prevMonth.getDate();
      }
      if (months < 0) {
        years--;
        months += 12;
      }

      // Total calculations
      const diffMs = target.getTime() - birth.getTime();
      const totalDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      const totalWeeks = Math.floor(totalDays / 7);
      const totalMonths = years * 12 + months;
      const totalHours = totalDays * 24;

      // Update display
      const fmt = (n: number) => n.toLocaleString('en-US');

      document.getElementById('age-years')!.textContent = `${years} years old`;
      document.getElementById('age-full')!.textContent = `${years} years, ${months} months, ${days} days`;
      document.getElementById('age-months')!.textContent = fmt(totalMonths);
      document.getElementById('age-weeks')!.textContent = fmt(totalWeeks);
      document.getElementById('age-days')!.textContent = fmt(totalDays);
      document.getElementById('age-hours')!.textContent = fmt(totalHours);

      // Next birthday
      const nextBirthday = new Date(target.getFullYear(), birth.getMonth(), birth.getDate());
      if (nextBirthday <= target) {
        nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
      }
      const daysUntil = Math.ceil((nextBirthday.getTime() - target.getTime()) / (1000 * 60 * 60 * 24));
      const nextAge = nextBirthday.getFullYear() - birth.getFullYear();

      document.getElementById('next-birthday')!.textContent =
        nextBirthday.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
      document.getElementById('next-birthday-days')!.textContent =
        `${fmt(daysUntil)} days until your ${nextAge}${getOrdinal(nextAge)} birthday`;

      // Milestones
      updateMilestones(birth, target);

      // Update URL for sharing
      const url = new URL(window.location.href);
      url.searchParams.set('dob', birthInput.value);
      url.searchParams.set('date', targetInput.value);
      history.replaceState(null, '', url.toString());

      document.dispatchEvent(new CustomEvent('calc-update'));
    }

    function getOrdinal(n: number): string {
      const s = ["th", "st", "nd", "rd"];
      const v = n % 100;
      return s[(v - 20) % 10] || s[v] || s[0];
    }

    function updateMilestones(birth: Date, target: Date) {
      const milestones = [
        { label: '1,000 days old', days: 1000 },
        { label: '5,000 days old', days: 5000 },
        { label: '10,000 days old', days: 10000 },
        { label: '20,000 days old', days: 20000 },
        { label: '30,000 days old', days: 30000 },
        { label: '18th Birthday (Legal Adult)', days: null, years: 18 },
        { label: '21st Birthday', days: null, years: 21 },
        { label: '30th Birthday', days: null, years: 30 },
        { label: '40th Birthday', days: null, years: 40 },
        { label: '50th Birthday', days: null, years: 50 },
        { label: '65th Birthday (Retirement)', days: null, years: 65 },
      ];

      const tbody = document.getElementById('milestones-tbody')!;
      tbody.innerHTML = milestones.map(m => {
        let date: Date;
        if (m.days) {
          date = new Date(birth.getTime() + m.days * 24 * 60 * 60 * 1000);
        } else {
          date = new Date(birth.getFullYear() + (m.years || 0), birth.getMonth(), birth.getDate());
        }
        const isPast = date <= target;
        const dateStr = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        return `<tr class="border-b border-border/50">
          <td class="py-2 pr-4">${m.label}</td>
          <td class="py-2 pr-4">${dateStr}</td>
          <td class="py-2 text-right font-medium ${isPast ? 'text-secondary' : 'text-text-muted'}">${isPast ? 'Reached' : 'Upcoming'}</td>
        </tr>`;
      }).join('');
    }

    birthInput.addEventListener('change', calculateAge);
    targetInput.addEventListener('change', calculateAge);

    // Restore from URL
    const params = new URL(window.location.href).searchParams;
    if (params.get('dob')) birthInput.value = params.get('dob')!;
    if (params.get('date')) targetInput.value = params.get('date')!;

    calculateAge();
  </script>
</CalculatorLayout>
