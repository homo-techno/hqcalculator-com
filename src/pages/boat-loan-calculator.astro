---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Boat Loan Calculator - Marine Financing Calculator";
const description = "Calculate monthly payments, total interest, and cost of ownership for boat and marine loans.";
const relatedCalcs = [
  { name: "Auto Loan", url: "/auto-loan-calculator", description: "Auto loan." },
  { name: "Loan Calculator", url: "/loan-calculator", description: "Loans." },
  { name: "Amortization", url: "/amortization-calculator", description: "Amortization." },
  { name: "Business Loan", url: "/business-loan-calculator", description: "Business loan." },
  { name: "Lease Calculator", url: "/lease-calculator", description: "Leasing." },
  { name: "Savings Calculator", url: "/savings-calculator", description: "Savings." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Boat Loan Calculator" keywords="boat loan calculator, marine financing, boat payment, yacht loan, boat loan rates, marine loan" breadcrumbs={[{ name: "Boat Loan", url: "/boat-loan-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Boat Loan Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Calculate marine loan payments and total financing costs.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Boat Price ($)</label><input type="number" id="bt-price" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="50000" min="0" step="1000"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Down Payment ($)</label><input type="number" id="bt-down" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10000" min="0" step="500"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Interest Rate (%)</label><input type="number" id="bt-rate" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="6.99" min="0" max="25" step="0.01"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Loan Term (years)</label><input type="number" id="bt-term" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="10" min="1" max="20" step="1"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Annual Insurance ($)</label><input type="number" id="bt-ins" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="800" min="0" step="50"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Annual Maintenance ($)</label><input type="number" id="bt-maint" class="bt-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" value="1500" min="0" step="100"></div>
        </div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Monthly Payment</div>
          <div class="text-5xl font-extrabold font-mono" id="bt-payment">$0</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Loan Amount</div><div class="text-xl font-bold" id="bt-loan">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Interest</div><div class="text-xl font-bold" id="bt-interest">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Cost</div><div class="text-xl font-bold" id="bt-total">$0</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Monthly Ownership</div><div class="text-xl font-bold" id="bt-own">$0</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Annual Ownership</div><div class="text-xl font-bold" id="bt-annual">$0</div></div>
        </div>
      </div>
      <ShareButton calculatorId="boat-loan" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcBoat() {
      const price = parseFloat((document.getElementById('bt-price') as HTMLInputElement).value) || 0;
      const down = parseFloat((document.getElementById('bt-down') as HTMLInputElement).value) || 0;
      const rate = (parseFloat((document.getElementById('bt-rate') as HTMLInputElement).value) || 0) / 100 / 12;
      const term = (parseInt((document.getElementById('bt-term') as HTMLInputElement).value) || 1) * 12;
      const ins = parseFloat((document.getElementById('bt-ins') as HTMLInputElement).value) || 0;
      const maint = parseFloat((document.getElementById('bt-maint') as HTMLInputElement).value) || 0;
      const loan = price - down;
      let payment: number;
      if (rate === 0) payment = loan / term;
      else payment = loan * rate * Math.pow(1 + rate, term) / (Math.pow(1 + rate, term) - 1);
      const totalPaid = payment * term;
      const totalInterest = totalPaid - loan;
      const monthlyOwn = payment + ins / 12 + maint / 12;
      document.getElementById('bt-payment')!.textContent = '$' + Math.round(payment).toLocaleString();
      document.getElementById('bt-loan')!.textContent = '$' + Math.round(loan).toLocaleString();
      document.getElementById('bt-interest')!.textContent = '$' + Math.round(totalInterest).toLocaleString();
      document.getElementById('bt-total')!.textContent = '$' + Math.round(totalPaid + down).toLocaleString();
      document.getElementById('bt-own')!.textContent = '$' + Math.round(monthlyOwn).toLocaleString();
      document.getElementById('bt-annual')!.textContent = '$' + Math.round(monthlyOwn * 12).toLocaleString();
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => { document.querySelectorAll('.bt-in').forEach(el => el.addEventListener('input', calcBoat)); calcBoat(); }, 50);
  </script>
</CalculatorLayout>
