---
import CalculatorLayout from '../layouts/CalculatorLayout.astro';
import ShareButton from '../components/ShareButton.astro';
import FeedbackWidget from '../components/FeedbackWidget.astro';
import RelatedCalculators from '../components/RelatedCalculators.astro';
const title = "Marine Paint Calculator - Bottom Paint & Antifouling Coverage";
const description = "Calculate bottom paint area from hull dimensions, number of coats, antifouling type, and total paint volume needed for your boat.";
const relatedCalcs = [
  { name: "Paint Calculator", url: "/paint-calculator", description: "General paint coverage." },
  { name: "Boat Loan", url: "/boat-loan-calculator", description: "Marine financing costs." },
  { name: "Paint Mixing", url: "/paint-mixing-calculator", description: "Color mixing ratios." },
  { name: "Buoyancy", url: "/buoyancy-calculator", description: "Buoyancy force calculations." },
  { name: "Nautical Mile", url: "/nautical-mile-calculator", description: "Nautical distance conversion." },
  { name: "Area Calculator", url: "/area-calculator", description: "Area calculations." },
];
---
<CalculatorLayout title={title} description={description} calculatorName="Marine Paint Calculator" keywords="marine paint calculator, bottom paint, antifouling paint, hull paint area, boat paint coverage, antifouling calculator" breadcrumbs={[{ name: "Marine Paint", url: "/marine-paint-calculator" }]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl sm:text-4xl font-extrabold text-text mb-2">Marine Paint Calculator</h1>
    <p class="text-text-secondary mb-8 max-w-2xl">Estimate hull bottom paint area and calculate the amount of antifouling paint needed for your boat.</p>
    <div class="bg-white border border-border rounded-2xl shadow-sm p-6 sm:p-8 max-w-2xl mx-auto">
      <div class="space-y-4">
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Waterline Length (ft)</label><input type="number" id="mp2-lwl" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="1"></div>
          <div><label class="block text-xs font-medium text-text mb-1">Beam (ft)</label><input type="number" id="mp2-beam" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" step="0.5"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Draft (ft)</label><input type="number" id="mp2-draft" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0.5" step="0.5"></div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Hull Shape</label>
            <select id="mp2-shape" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="0.5">Flat Bottom (0.50)</option>
              <option value="0.65">V-Hull Power (0.65)</option>
              <option value="0.75" selected>Sailboat Fin Keel (0.75)</option>
              <option value="0.85">Full Keel Sail (0.85)</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div><label class="block text-xs font-medium text-text mb-1">Number of Coats</label><input type="number" id="mp2-coats" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="1" max="5" step="1"></div>
          <div>
            <label class="block text-xs font-medium text-text mb-1">Paint Type</label>
            <select id="mp2-type" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold">
              <option value="350">Ablative (350 sqft/gal)</option>
              <option value="400">Hard Modified (400 sqft/gal)</option>
              <option value="300">Copper-based (300 sqft/gal)</option>
              <option value="450">Water-based (450 sqft/gal)</option>
            </select>
          </div>
        </div>
        <div><label class="block text-xs font-medium text-text mb-1">Price Per Gallon ($)</label><input type="number" id="mp2-price" class="mp2-in w-full px-4 py-3 border border-border rounded-xl text-lg font-bold" min="0" step="5"></div>
        <div class="p-6 bg-primary rounded-2xl text-white text-center">
          <div class="text-sm text-blue-200 uppercase tracking-wide mb-1">Total Paint Needed</div>
          <div class="text-5xl font-extrabold font-mono" id="mp2-gallons">--</div>
          <div class="text-sm text-blue-200 mt-1">gallons</div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Hull Area</div><div class="text-xl font-bold" id="mp2-area">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Coverage</div><div class="text-xl font-bold" id="mp2-coverage">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Total Cost</div><div class="text-xl font-bold" id="mp2-cost">--</div></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Quarts Needed</div><div class="text-xl font-bold" id="mp2-quarts">--</div></div>
          <div class="p-4 bg-surface-alt rounded-xl text-center"><div class="text-xs text-text-muted uppercase">Cost Per Sq Ft</div><div class="text-xl font-bold" id="mp2-cpsf">--</div></div>
        </div>
      </div>
      <ShareButton calculatorId="marine-paint" />
      <FeedbackWidget />
    </div>
    <RelatedCalculators calculators={relatedCalcs} />
  </div>
  <script>
    function calcMP2() {
      const lwl = parseFloat((document.getElementById('mp2-lwl') as HTMLInputElement).value) || 0;
      const beam = parseFloat((document.getElementById('mp2-beam') as HTMLInputElement).value) || 0;
      const draft = parseFloat((document.getElementById('mp2-draft') as HTMLInputElement).value) || 0;
      const shapeFactor = parseFloat((document.getElementById('mp2-shape') as HTMLSelectElement).value) || 0.75;
      const coats = parseInt((document.getElementById('mp2-coats') as HTMLInputElement).value) || 1;
      const coverage = parseFloat((document.getElementById('mp2-type') as HTMLSelectElement).value) || 350;
      const price = parseFloat((document.getElementById('mp2-price') as HTMLInputElement).value) || 0;

      // Wetted surface area approximation: LWL * (Beam + Draft) * shapeFactor
      const hullArea = lwl * (beam + draft) * shapeFactor;
      const totalCoverage = hullArea * coats;
      const gallons = totalCoverage / coverage;
      const quarts = Math.ceil(gallons * 4);
      const gallonsRounded = Math.ceil(gallons * 10) / 10;
      const cost = gallonsRounded * price;
      const costPerSqFt = hullArea > 0 ? cost / hullArea : 0;

      document.getElementById('mp2-gallons')!.textContent = gallons > 0 ? gallonsRounded.toFixed(1) : '--';
      document.getElementById('mp2-area')!.textContent = hullArea > 0 ? Math.round(hullArea) + ' sqft' : '--';
      document.getElementById('mp2-coverage')!.textContent = totalCoverage > 0 ? Math.round(totalCoverage) + ' sqft' : '--';
      document.getElementById('mp2-cost')!.textContent = cost > 0 ? '$' + cost.toFixed(0) : '--';
      document.getElementById('mp2-quarts')!.textContent = quarts > 0 ? quarts.toString() : '--';
      document.getElementById('mp2-cpsf')!.textContent = costPerSqFt > 0 ? '$' + costPerSqFt.toFixed(2) : '--';
      document.dispatchEvent(new CustomEvent('calc-update'));
    }
    setTimeout(() => {
      (document.getElementById('mp2-lwl') as HTMLInputElement).value = '30';
      (document.getElementById('mp2-beam') as HTMLInputElement).value = '10';
      (document.getElementById('mp2-draft') as HTMLInputElement).value = '5';
      (document.getElementById('mp2-coats') as HTMLInputElement).value = '2';
      (document.getElementById('mp2-price') as HTMLInputElement).value = '180';
      document.querySelectorAll('.mp2-in').forEach(el => { el.addEventListener('input', calcMP2); el.addEventListener('change', calcMP2); });
      calcMP2();
    }, 50);
  </script>
</CalculatorLayout>
